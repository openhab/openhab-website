(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{277:function(e,t,r){e.exports=r.p+"assets/img/example.b0357624.png"},736:function(e,t,r){"use strict";r.r(t);var n=[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"gpstracker-binding"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gpstracker-binding","aria-hidden":"true"}},[this._v("#")]),this._v(" GPSTracker Binding")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("strong",[this._v("Location")]),this._v(" - This is a simple location report with coordinates extended with some extra information about the tracker (e.g. tracker device battery level). [OwnTracks, GPSLogger]")]),this._v(" "),t("li",[t("strong",[this._v("Transition")]),this._v(' - This report is based on regions defined in tracker application only. A message is sent every time the tracker enters or leaves a region. [OwnTracks only] See "Distance Channel and Presence Switch" how this behavior can be achieved with openHAB\'s on-board tools.')])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuration")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"owntracks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#owntracks","aria-hidden":"true"}},[this._v("#")]),this._v(" OwnTracks")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("Mode")]),this._v(" - select Private HTTP")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"gpslogger"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gpslogger","aria-hidden":"true"}},[this._v("#")]),this._v(" GPSLogger")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",[e._v("Go to "),r("em",[e._v("Logging details")]),e._v(" and enable "),r("strong",[e._v("Log to custom URL")]),e._v('.\nIf you only want to use GPSLogger for this binding, you can disable all other "'),r("em",[e._v("Log to")]),e._v('" entries.\nRight after enabling, the app takes you to the '),r("em",[e._v("Log to custom URL")]),e._v(" settings:")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("HTTP Body")]),this._v(' - type in: { "_type":"location", "lat":%LAT, "lon":%LON, "tid":"XY", "acc":%ACC, "batt":%BATT, "tst":%TIMESTAMP }\n'),t("ul",[t("li",[this._v('Note: "'),t("em",[this._v("tid")]),this._v('" is the tracker id that identifies the tracker as a thing. This must be unique for each tracker connected to the same openHAB instance (e.g. family members).')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("HTTP Headers")]),this._v(" - type in: "),t("em",[this._v("Content-Type: application/json")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("HTTP Method")]),this._v(" - type in: "),t("em",[this._v("POST")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[this._v("Check if everything is ok by clicking on "),t("strong",[this._v("Validate SSL Certificate")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"things"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#things","aria-hidden":"true"}},[this._v("#")]),this._v(" Things")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("It is possible to define things manually or to use the discovery feature of the openHAB.\nAn important detail for both methods is that a tracker is identified by a "),t("strong",[this._v("tracker id")]),this._v(" configured on mobile devices.\nMake sure these tracker ids are unique in group of trackers connected to a single openHAB instance.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"discovery"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#discovery","aria-hidden":"true"}},[this._v("#")]),this._v(" Discovery")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("If the things are not defined in "),t("strong",[this._v(".things")]),this._v(" files the first time the tracker sends a GPS log record the binding recognizes it as new tracker and inserts an entry into the Inbox as new tracker with name "),t("strong",[this._v("GPS Tracker ??")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"channels"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#channels","aria-hidden":"true"}},[this._v("#")]),this._v(" Channels")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",[r("li",[r("strong",[e._v("Location")]),e._v(" - Current location of the tracker")]),e._v(" "),r("li",[r("strong",[e._v("Accuracy")]),e._v(" - GPS accuracy")]),e._v(" "),r("li",[r("strong",[e._v("Last Report")]),e._v(" - Timestamp of the last location report")]),e._v(" "),r("li",[r("strong",[e._v("Battery Level")]),e._v(" - Battery level of the device running the tracker application")]),e._v(" "),r("li",[r("strong",[e._v("Region trigger channel")]),e._v(" - Used by regions defined in tracker application. Event is fired with payload of the region name when the binding receives a "),r("strong",[e._v("transition")]),e._v(" log record or a distance calculation for a "),r("strong",[e._v("location")]),e._v(" record indicates that the tracker is outside of the region circle. Payload is suffixed with "),r("code",[e._v("/enter")]),e._v(" for entering and with "),r("code",[e._v("/leave")]),e._v(" for leaving events.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"distance-calculation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#distance-calculation","aria-hidden":"true"}},[this._v("#")]),this._v(" Distance Calculation")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Tracker thing can be extended with "),t("strong",[this._v("Distance")]),this._v(" channels (channel type is "),t("code",[this._v("regionDistance")]),this._v(") if a distance calculation is needed for a region.\nThese dynamic channels require the following parameters:")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("table",[r("thead",[r("tr",[r("th",[e._v("Parameter")]),e._v(" "),r("th",[e._v("Type")]),e._v(" "),r("th",[e._v("Description")])])]),e._v(" "),r("tbody",[r("tr",[r("td",[e._v("Region Name")]),e._v(" "),r("td",[e._v("String")]),e._v(" "),r("td",[e._v("Region name. If the region is configured in the tracker app as well use the same name. Distance channels can also be defined as binding only regions (not configured in trackers)")])]),e._v(" "),r("tr",[r("td",[e._v("Region center")]),e._v(" "),r("td",[e._v("Location")]),e._v(" "),r("td",[e._v("Region center location")])]),e._v(" "),r("tr",[r("td",[e._v("Region Radius")]),e._v(" "),r("td",[e._v("Integer")]),e._v(" "),r("td",[e._v("Geofence radius")])]),e._v(" "),r("tr",[r("td",[e._v("Accuracy Threshold")]),e._v(" "),r("td",[e._v("Integer")]),e._v(" "),r("td",[e._v("Location accuracy threshold (0 to disable)")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("When the tracker is approaching (the new calculated distance is less then the previous one) the payload is <<region_name>>/enter.")]),this._v(" "),t("li",[this._v("If the tracker is distancing (the new calculated distance is greater then the previous one) payload is <<region_name>>/leave.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("If the tracker is moving inside/outside the region (both the previous and the current calculated distance value is less/greater than the radius) no events are fired.\nThis means that the region events are triggered "),t("strong",[this._v("ONLY IN CASE THE REGION BORDER IS CROSSED")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Note")]),this._v(": In case the location is set for openHAB installation (Configuration/System/Regional Settings) the binding automatically creates the System Distance channel (gpstracker:tracker:??:distanceSystem) with region name set to "),t("strong",[this._v("System")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"tracker-location-status"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tracker-location-status","aria-hidden":"true"}},[this._v("#")]),this._v(" Tracker Location Status")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("In case external regions are defined in mobile application the binding fires entering/leaving events on region trigger channel.\nThese events are fired in case of distance channels as well when the tracker crosses the geofence (the distance from the region center becomes less/greater than the radius).\nIn order to have this state available in stateful switch items (e.g. for rule logic) switch type items can be linked to "),t("strong",[this._v("regionTrigger")]),this._v(" channel.\nThere is a special profile (gpstracker:trigger-geofence) that transforms trigger enter/leave events to switch states:")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("strong",[this._v("<<region_name>>/enter")]),this._v(" will update the switch state to "),t("strong",[this._v("ON")])]),this._v(" "),t("li",[t("strong",[this._v("<<region_name>>/leave")]),this._v(" will update the switch state to "),t("strong",[this._v("OFF")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("table",[r("thead",[r("tr",[r("th",[e._v("Parameter")]),e._v(" "),r("th",[e._v("Type")]),e._v(" "),r("th",[e._v("Description")])])]),e._v(" "),r("tbody",[r("tr",[r("td",[e._v("Profile Name")]),e._v(" "),r("td",[e._v("Selection")]),e._v(" "),r("td",[e._v("Select the Geofence(gpstracker:trigger-geofence) from dropdown")])]),e._v(" "),r("tr",[r("td",[e._v("Region Name")]),e._v(" "),r("td",[e._v("String")]),e._v(" "),r("td",[e._v("Region name which should be the same as used in the tracker application or defined for distance channels")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"manual-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#manual-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Manual Configuration")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"things-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#things-2","aria-hidden":"true"}},[this._v("#")]),this._v(" Things")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-dsl"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//tracker definition")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Thing")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("gpstracker"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("tracker"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("1")]),e._v("   "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"XY tracker"')]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("trackerId"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"XY"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//tracker definition with extra distance channel")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Thing")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("gpstracker"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("tracker"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("EX")]),e._v("   "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"EX tracker"')]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("trackerId"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"EX"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Channels")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v("\n            "),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Type")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("regionDistance")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" homeDistance "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Distance from Home"')]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n                regionName"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Home"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n                regionCenterLocation"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"11.1111,22.2222"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n                regionRadius"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("100")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n                accuracyThreshold"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("30")]),e._v("\n            "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"items"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#items","aria-hidden":"true"}},[this._v("#")]),this._v(" Items")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-dsl"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//items for basic channels")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Location")]),e._v("\t"),r("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("locationEX")]),e._v("\t"),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Location"')]),e._v("\t\t"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("channel"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"gpstracker:tracker:1:lastLocation"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("DateTime")]),e._v("\t"),r("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("lastSeenEX")]),e._v("\t"),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Last seen"')]),e._v("\t\t"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("channel"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"gpstracker:tracker:1:lastReport"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Number")]),e._v("\t\t"),r("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("batteryEX")]),e._v("\t"),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Battery level"')]),e._v("\t\t"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("channel"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"gpstracker:tracker:1:batteryLevel"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Number")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Length")]),e._v("\t\t"),r("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("accuracyEX")]),e._v("\t"),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"GPS Accuracy [%d m]"')]),e._v("\t\t"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("channel"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"gpstracker:tracker:1:gpsAccuracy"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//linking switch item to regionTrigger channel. assuming the Home distance channel is defined in the binding config (see above)")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Switch")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("atHomeEX")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Home presence"')]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("channel"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"gpstracker:tracker:EX:regionTrigger"')]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("profile"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"gpstracker:trigger-geofence"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" regionName"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Home"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//another switch for work region. assuming the OTWork is defined in OwnTracks application (no distance channel is needed like for Home)")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Switch")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("atWorkEX")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Work presence"')]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("channel"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"gpstracker:tracker:EX:regionTrigger"')]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("profile"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"gpstracker:trigger-geofence"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" regionName"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"OTWork"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"sitemaps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sitemaps","aria-hidden":"true"}},[this._v("#")]),this._v(" Sitemaps")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-dsl"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("sitemap")]),e._v(" gpstracker "),r("span",{pre:!0,attrs:{class:"token constant"}},[e._v("label")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"GPSTracker Binding"')]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Text")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("item")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("distanceEX\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Text")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("item")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("atWorkEX\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Text")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("item")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("atHomeEX\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Text")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("item")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("lastSeenEX\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Text")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("item")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("batteryEX\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Text")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("item")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("accuracyEX\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Mapview")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[e._v("item")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("locationEX "),r("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("height")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("4")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"debug"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#debug","aria-hidden":"true"}},[this._v("#")]),this._v(" Debug")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"binding-start"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#binding-start","aria-hidden":"true"}},[this._v("#")]),this._v(" Binding Start")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("2018-10-03 18:12:38.950 [DEBUG] [org.openhab.binding.gpstracker      ] - ServiceEvent REGISTERED - {org.eclipse.smarthome.config.discovery.DiscoveryService, org.openhab.binding.gpstracker.internal.discovery.TrackerDiscoveryService}={service.id=425, service.bundleid=183, service.scope=bundle, component.name=org.openhab.binding.gpstracker.internal.discovery.TrackerDiscoveryService, component.id=268} - org.openhab.binding.gpstracker\n2018-10-03 18:12:38.965 [DEBUG] [org.openhab.binding.gpstracker      ] - ServiceEvent REGISTERED - {org.eclipse.smarthome.core.thing.binding.ThingHandlerFactory, org.eclipse.smarthome.config.core.ConfigOptionProvider}={location=47.536178,19.169812, service.id=426, service.bundleid=183, service.scope=bundle, radius=100, name=Home, component.name=org.openhab.binding.gpstracker.internal.GPSTrackerHandlerFactory, component.id=267, additionalRegionsJSON=[\n], triggerEvent=false, service.pid=binding.gpstracker} - org.openhab.binding.gpstracker\n2018-10-03 18:12:38.994 [DEBUG] [er.internal.GPSTrackerHandlerFactory] - Initializing callback servlets\n2018-10-03 18:12:39.013 [DEBUG] [org.openhab.binding.gpstracker      ] - ServiceEvent REGISTERED - {javax.servlet.ServletContext}={osgi.web.version=2.4.0.201809241418, osgi.web.contextpath=/, service.id=427, osgi.web.symbolicname=org.openhab.binding.gpstracker, service.bundleid=183, service.scope=singleton, osgi.web.contextname=default} - org.openhab.binding.gpstracker\n2018-10-03 18:12:39.047 [DEBUG] [er.internal.GPSTrackerHandlerFactory] - Started GPSTracker Callback servlet on /gpstracker/owntracks\n2018-10-03 18:12:39.058 [DEBUG] [er.internal.GPSTrackerHandlerFactory] - Started GPSTracker Callback servlet on /gpstracker/gpslogger\n2018-10-03 18:12:39.072 [DEBUG] [org.openhab.binding.gpstracker      ] - ServiceEvent REGISTERED - {org.eclipse.smarthome.core.thing.profiles.ProfileFactory, org.eclipse.smarthome.core.thing.profiles.ProfileAdvisor, org.eclipse.smarthome.core.thing.profiles.ProfileTypeProvider}={service.id=428, service.bundleid=183, service.scope=bundle, component.name=org.openhab.binding.gpstracker.internal.profile.GPSTrackerProfileFactory, component.id=269} - org.openhab.binding.gpstracker\n2018-10-03 18:12:39.092 [DEBUG] [org.openhab.binding.gpstracker      ] - BundleEvent STARTING - org.openhab.binding.gpstracker\n2018-10-03 18:12:39.098 [DEBUG] [org.openhab.binding.gpstracker      ] - BundleEvent STARTED - org.openhab.binding.gpstracker\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("Started GPSTracker Callback servlet on /gpstracker/owntracks\nStarted GPSTracker Callback servlet on /gpstracker/gpslogger\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"registration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#registration","aria-hidden":"true"}},[this._v("#")]),this._v(" Registration")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('2018-10-05 08:36:14.283 [DEBUG] [nal.provider.AbstractCallbackServlet] - Post message received from OwnTracks tracker: {"_type":"location","tid":"XX","acc":10.0,"lat":41.53,"lon":16.16,"tst":1527966973,"wtst":1524244195,"batt":96}\n2018-10-05 08:36:14.286 [DEBUG] [nal.provider.AbstractCallbackServlet] - There is no handler for tracker XX. Check the inbox for the new tracker.\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"location-update"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#location-update","aria-hidden":"true"}},[this._v("#")]),this._v(" Location Update")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('2018-10-05 08:38:33.916 [DEBUG] [nal.provider.AbstractCallbackServlet] - Post message received from OwnTracks tracker: {"_type":"location","tid":"XX","acc":10.0,"lat":41.53,"lon":16.16,"tst":1527966973,"wtst":1524244195,"batt":96}\n2018-10-05 08:38:33.917 [DEBUG] [cker.internal.handler.TrackerHandler] - Update base channels for tracker XX from message: org.openhab.binding.gpstracker.internal.message.LocationMessage@31dfed63\n2018-10-05 08:38:33.941 [TRACE] [cker.internal.handler.TrackerHandler] - batteryLevel -> 96\n2018-10-05 08:38:33.942 [TRACE] [cker.internal.handler.TrackerHandler] - lastLocation -> 41.53,16.16\n2018-10-05 08:38:33.943 [TRACE] [cker.internal.handler.TrackerHandler] - lastReport -> 2018-06-02T19:16:13.000+0000\n2018-10-05 08:38:33.943 [DEBUG] [cker.internal.handler.TrackerHandler] - Updating distance channels tracker XX\n2018-10-05 08:38:33.944 [TRACE] [cker.internal.handler.TrackerHandler] - Region center distance from tracker location 41.53,16.16 is 709835.1673811453m\n2018-10-05 08:38:33.944 [TRACE] [cker.internal.handler.TrackerHandler] - System uses SI measurement units. No conversion is needed.\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"distance-channel-and-presence-switch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#distance-channel-and-presence-switch","aria-hidden":"true"}},[this._v("#")]),this._v(" Distance Channel and Presence Switch")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",[r("li",[e._v("A Home distance channel is added to the tracker with parameters:\n"),r("ul",[r("li",[e._v("Channel ID: distanceHome")]),e._v(" "),r("li",[e._v("Region Name: Home")]),e._v(" "),r("li",[e._v("Region Radius: 100")]),e._v(" "),r("li",[e._v("Region Center: 42.53,16.16")])])]),e._v(" "),r("li",[e._v("Presence switch is linked to the regionTrigger channel with parameters:\n"),r("ul",[r("li",[e._v("Profile: Geofence(gpstracker:trigger-geofence)")]),e._v(" "),r("li",[e._v("Region Name: Home")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:r(277),alt:"Image"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('2018-10-05 09:27:58.768 [DEBUG] [nal.provider.AbstractCallbackServlet] - Post message received from OwnTracks tracker: {"_type":"location","tid":"XX","acc":10.0,"lat":42.53,"lon":17.16,"tst":1527966973,"wtst":1524244195,"batt":96}\n2018-10-05 09:27:58.769 [DEBUG] [cker.internal.handler.TrackerHandler] - Update base channels for tracker XX from message: org.openhab.binding.gpstracker.internal.message.LocationMessage@67e5d438\n2018-10-05 09:27:58.770 [TRACE] [cker.internal.handler.TrackerHandler] - batteryLevel -> 96\n2018-10-05 09:27:58.771 [TRACE] [cker.internal.handler.TrackerHandler] - lastLocation -> 42.53,17.16\n2018-10-05 09:27:58.772 [TRACE] [cker.internal.handler.TrackerHandler] - lastReport -> 2018-06-02T19:16:13.000+0000\n2018-10-05 09:27:58.773 [DEBUG] [cker.internal.handler.TrackerHandler] - Updating distance channels tracker XX\n2018-10-05 09:27:58.774 [TRACE] [cker.internal.handler.TrackerHandler] - Region Home center distance from tracker location 42.53,17.16 is 82033.47272145993m\n2018-10-05 09:27:58.775 [TRACE] [cker.internal.handler.TrackerHandler] - System uses SI measurement units. No conversion is needed.\n2018-10-05 09:27:58.779 [DEBUG] [ofile.GPSTrackerTriggerSwitchProfile] - Trigger switch profile created for region Home\n2018-10-05 09:27:58.779 [DEBUG] [ofile.GPSTrackerTriggerSwitchProfile] - Transition trigger Home/leave handled for region Home by profile: OFF\n2018-10-05 09:27:58.792 [TRACE] [cker.internal.handler.TrackerHandler] - Triggering Home for XX/Home/leave\n2018-10-05 09:27:58.793 [TRACE] [cker.internal.handler.TrackerHandler] - Region System center distance from tracker location 42.53,17.16 is 579224.192171576m\n2018-10-05 09:27:58.794 [TRACE] [cker.internal.handler.TrackerHandler] - System uses SI measurement units. No conversion is needed.\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Note")]),this._v(": If the binding was restarted or the distance channel is new (this is the first location message for the channel) only the second location update will trigger event as the binding has to know the previous state.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"external-region-and-presence-switch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#external-region-and-presence-switch","aria-hidden":"true"}},[this._v("#")]),this._v(" External Region and Presence Switch")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",[r("li",[e._v("A "),r("strong",[e._v("shared")]),e._v(" region is defined in OwnTracks application. Lets call it Work.")]),e._v(" "),r("li",[e._v("Presence switch is linked to the regionTrigger channel with parameters:\n"),r("ul",[r("li",[e._v("Profile: Geofence(gpstracker:trigger-geofence)")]),e._v(" "),r("li",[e._v("Region Name: Work")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('2018-10-05 09:35:27.203 [DEBUG] [nal.provider.AbstractCallbackServlet] - Post message received from OwnTracks tracker: {"_type":"transition","tid":"XX","acc":10.0,"desc":"Work","event":"enter","lat":42.53,"lon":18.22,"tst":1527966973,"wtst":1524244195,"t":"c"}\n2018-10-05 09:35:27.204 [DEBUG] [cker.internal.handler.TrackerHandler] - ConfigHelper transition event received: Work\n2018-10-05 09:35:27.204 [DEBUG] [cker.internal.handler.TrackerHandler] - Update base channels for tracker XX from message: org.openhab.binding.gpstracker.internal.message.TransitionMessage@5e5b0d59\n2018-10-05 09:35:27.204 [TRACE] [cker.internal.handler.TrackerHandler] - lastLocation -> 42.53,18.22\n2018-10-05 09:35:27.205 [TRACE] [cker.internal.handler.TrackerHandler] - lastReport -> 2018-06-02T19:16:13.000+0000\n2018-10-05 09:35:27.205 [DEBUG] [cker.internal.handler.TrackerHandler] - Updating distance channels tracker XX\n2018-10-05 09:35:27.206 [TRACE] [cker.internal.handler.TrackerHandler] - Region Home center distance from tracker location 42.53,18.22 is 168985.77453131412m\n2018-10-05 09:35:27.207 [TRACE] [cker.internal.handler.TrackerHandler] - Region System center distance from tracker location 42.53,18.22 is 562259.467093007m\n2018-10-05 09:35:27.208 [TRACE] [cker.internal.handler.TrackerHandler] - Triggering Work for XX/Work/enter\n2018-10-05 09:35:27.208 [DEBUG] [ofile.GPSTrackerTriggerSwitchProfile] - Trigger switch profile created for region Home\n2018-10-05 09:35:27.210 [DEBUG] [ofile.GPSTrackerTriggerSwitchProfile] - Trigger switch profile created for region Work\n2018-10-05 09:35:27.210 [DEBUG] [ofile.GPSTrackerTriggerSwitchProfile] - Transition trigger Work/enter handled for region Work by profile: ON\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Note")]),this._v(":")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("If the binding was restarted only the second transition update will trigger event as the binding has to know the previous state.")]),this._v(" "),t("li",[this._v("The distance is not calculated for Work as the binding doesn't know the Work region center.")])])}],a=r(0),s=Object(a.a)({},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[e._m(0),e._v(" "),r("AddonLogo"),e._v(" "),r("p",[e._v("This binding allows you to connect mobile GPS tracker applications to openHAB and process GPS location reports.")]),e._v(" "),r("p",[e._v("Currently two applications are supported:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://owntracks.org/booklet/",target:"_blank",rel:"noopener noreferrer"}},[e._v("OwnTracks"),r("OutboundLink")],1),e._v(" - iOS, Android")]),e._v(" "),r("li",[r("a",{attrs:{href:"https://gpslogger.app/",target:"_blank",rel:"noopener noreferrer"}},[e._v("GPSLogger"),r("OutboundLink")],1),e._v(" - Android")])]),e._v(" "),r("p",[e._v("GPS location reports are sent to openHAB using HTTP.\nPlease be aware that this communication uses the public network so make sure your openHAB installation is "),r("a",{attrs:{href:"https://www.openhab.org/docs/installation/security.html#encrypted-communication",target:"_blank",rel:"noopener noreferrer"}},[e._v("secured"),r("OutboundLink")],1),e._v(" (but accessible from public internet through "),r("a",{attrs:{href:"http://myopenhab.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("myopenhab.org"),r("OutboundLink")],1),e._v(" or using a reverse proxy) and you configured HTTP"),r("strong",[e._v("S")]),e._v(" access in tracking applications.\nThe easiest way to achieve this is to use the "),r("a",{attrs:{href:"https://www.openhab.org/addons/integrations/openhabcloud/",target:"_blank",rel:"noopener noreferrer"}},[e._v("openHAB Cloud Connector"),r("OutboundLink")],1),e._v(" in conjunction with "),r("a",{attrs:{href:"https://www.myopenhab.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("myopenHAB.org"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("p",[e._v("The binding can process two message types received from trackers:")]),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),r("p",[e._v("Install "),r("a",{attrs:{href:"https://play.google.com/store/apps/details?id=org.owntracks.android",target:"_blank",rel:"noopener noreferrer"}},[e._v("OwnTracks for Android"),r("OutboundLink")],1),e._v(" or "),r("a",{attrs:{href:"https://itunes.apple.com/us/app/owntracks/id692424691",target:"_blank",rel:"noopener noreferrer"}},[e._v("OwnTracks for iOS"),r("OutboundLink")],1),e._v(" on your device.")]),e._v(" "),r("p",[e._v("Go to Preferences/Connection and set:")]),e._v(" "),r("ul",[e._m(4),e._v(" "),r("li",[r("strong",[e._v("Host")]),e._v(" "),r("ul",[r("li",[e._v("https://<your.ip.address>/gpstracker/owntracks or")]),e._v(" "),r("li",[r("a",{attrs:{href:"https://home.myopenhab.org/gpstracker/owntracks",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://home.myopenhab.org/gpstracker/owntracks"),r("OutboundLink")],1)])])]),e._v(" "),r("li",[r("strong",[e._v("Identification")]),e._v(" "),r("ul",[r("li",[e._v("Turn Authentication ON")]),e._v(" "),r("li",[e._v("Set username and password to be able to reach your openHAB server ("),r("a",{attrs:{href:"http://myopenhab.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("myopenhab.org"),r("OutboundLink")],1),e._v(" credential, if choosen as host)")]),e._v(" "),r("li",[e._v("Device ID is not important. Set it to e.g. phone")]),e._v(" "),r("li",[e._v("Tracker ID - This id identifies the tracker as a thing. This must be unique for each tracker connected to the same openHAB instance (e.g. family members).")])])])]),e._v(" "),e._m(5),e._v(" "),r("p",[e._v("Install "),r("a",{attrs:{href:"https://play.google.com/store/apps/details?id=com.mendhak.gpslogger",target:"_blank",rel:"noopener noreferrer"}},[e._v("GPSLogger for Android"),r("OutboundLink")],1),e._v(" on your device.\nAfter the launch, go to General Options.\nEnable "),r("strong",[e._v("Start on boot-up")]),e._v(" and "),r("strong",[e._v("Start on app launch")]),e._v(".")]),e._v(" "),e._m(6),e._v(" "),r("ul",[r("li",[r("strong",[e._v("URL")]),e._v(" "),r("ul",[r("li",[e._v("https://<your.ip.address>/gpstracker/gpslogger or")]),e._v(" "),r("li",[r("a",{attrs:{href:"https://home.myopenhab.org/gpstracker/gpslogger",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://home.myopenhab.org/gpstracker/gpslogger"),r("OutboundLink")],1)])])]),e._v(" "),e._m(7),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),r("li",[r("strong",[e._v("Basic Authentication")]),e._v(" - Set username and password to be able to reach your openHAB server ("),r("a",{attrs:{href:"http://myopenhab.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("myopenhab.org"),r("OutboundLink")],1),e._v(" credential, if choosen as URL)")]),e._v(" "),e._m(10)]),e._v(" "),e._m(11),e._v(" "),e._m(12),e._v(" "),e._m(13),e._v(" "),e._m(14),e._v(" "),e._m(15),e._v(" "),r("p",[e._v("Basic channels provided by the tracker things:")]),e._v(" "),e._m(16),e._v(" "),e._m(17),e._v(" "),e._m(18),e._v(" "),e._m(19),e._v(" "),r("p",[e._v("Distance values will be updated each time a GPS location log record is received from the tracker if the accuracy is below the threshold or if the threshold is disabled.")]),e._v(" "),r("p",[e._v("When this calculated distance is less than the defined geofence radius the binding also fires event on Region Trigger channel.")]),e._v(" "),e._m(20),e._v(" "),e._m(21),e._v(" "),e._m(22),e._v(" "),e._m(23),e._v(" "),e._m(24),e._v(" "),e._m(25),e._v(" "),r("p",[e._v("To link a switch item to regionTrigger channel the following parameters are required by the item link:")]),e._v(" "),e._m(26),e._v(" "),e._m(27),e._v(" "),e._m(28),e._v(" "),e._m(29),e._m(30),e._v(" "),e._m(31),e._m(32),e._v(" "),e._m(33),e._m(34),e._v(" "),r("p",[e._v("As the setup is not that simple here are some hints for debugging.\nIn order to see detailed debug information "),r("a",{attrs:{href:"https://www.openhab.org/docs/administration/logging.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("set TRACE debug level"),r("OutboundLink")],1),e._v(" for "),r("code",[e._v("org.openhab.binding.gpstracker")]),e._v(" package.")]),e._v(" "),e._m(35),e._v(" "),e._m(36),r("p",[e._v("Please note the lines about started servlets:")]),e._v(" "),e._m(37),e._m(38),e._v(" "),r("p",[e._v("In case the discovery is used the first message from a tracker registers it in the inbox:")]),e._v(" "),e._m(39),e._m(40),e._v(" "),r("p",[e._v("The next location message already calculates the distance for System location:")]),e._v(" "),e._m(41),e._m(42),e._v(" "),r("p",[e._v("Assumptions:")]),e._v(" "),e._m(43),e._v(" "),e._m(44),e._v(" "),r("p",[e._v("After a location message received from the tracker the log should contain these lines:")]),e._v(" "),e._m(45),e._m(46),e._v(" "),e._m(47),e._v(" "),r("p",[e._v("Assumptions:")]),e._v(" "),e._m(48),e._v(" "),e._m(49),e._m(50),e._v(" "),e._m(51),e._v(" "),r("DocPreviousVersions"),e._v(" "),r("EditPageLink")],1)},n,!1,null,null,null);t.default=s.exports}}]);