(window.webpackJsonp=window.webpackJsonp||[]).push([[465],{780:function(e,t,s){"use strict";s.r(t);var i=s(0),r=Object(i.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"mapdb-persistence"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mapdb-persistence","aria-hidden":"true"}},[e._v("#")]),e._v(" mapdb Persistence "),s("Badge",{attrs:{type:"warn",text:"v1"}})],1),e._v(" "),s("p",[e._v("The "),s("a",{attrs:{href:"http://www.mapdb.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("mapdb"),s("OutboundLink")],1),e._v(" Persistence Service is based on simple key-value store that only saves the last value. The intention is to use this for "),s("code",[e._v("restoreOnStartup")]),e._v(" items because all other persistence options have their drawbacks if values are only needed for reload.  They:")]),e._v(" "),e._m(0),e._v(" "),s("p",[e._v("Querying the mapdb persistence service for historic values other than the last value make no sense since the persistence service can only store one value per item.")]),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),s("p",[e._v("To configure this service as the default persistence service for openHAB 2, add or change the line")]),e._v(" "),e._m(5),e._m(6),e._v(" "),e._m(7),e._v(" "),e._m(8),e._v(" "),s("DocPreviousVersions"),e._v(" "),s("EditPageLink")],1)},[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[e._v("grow in time")]),e._v(" "),s("li",[e._v("require complex installs ("),s("code",[e._v("mysql")]),e._v(", "),s("code",[e._v("influxdb")]),e._v(", ...)")]),e._v(" "),s("li",[s("code",[e._v("rrd4j")]),e._v(" can't store all item types (only numeric types)")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuration")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("This service can be configured in the file "),t("code",[this._v("services/mapdb.cfg")]),this._v(".")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("table",[s("thead",[s("tr",[s("th",[e._v("Property")]),e._v(" "),s("th",[e._v("Default")]),e._v(" "),s("th",{staticStyle:{"text-align":"center"}},[e._v("Required")]),e._v(" "),s("th",[e._v("Description")])])]),e._v(" "),s("tbody",[s("tr",[s("td",[e._v("commitinterval")]),e._v(" "),s("td",[e._v("5")]),e._v(" "),s("td",{staticStyle:{"text-align":"center"}},[e._v("No")]),e._v(" "),s("td",[e._v("commit interval in seconds")])]),e._v(" "),s("tr",[s("td",[e._v("commitsamestate")]),e._v(" "),s("td",[e._v("false")]),e._v(" "),s("td",{staticStyle:{"text-align":"center"}},[e._v("No")]),e._v(" "),s("td",[e._v("set to "),s("code",[e._v("true")]),e._v(" to issue a commit even if the state did not change")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("All item and event related configuration is done in the file "),t("code",[this._v("persistence/mapdb.persist")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("org.eclipse.smarthome.persistence:default=mapdb\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("in the file "),t("code",[this._v("services/runtime.cfg")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"troubleshooting"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting","aria-hidden":"true"}},[this._v("#")]),this._v(" Troubleshooting")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Restore of items after startup is taking some time. Rules are already started in parallel. Especially in rules that are started via "),t("code",[this._v("System started")]),this._v(" trigger, it may happen that the restore is not completed resulting in undefined items. In these cases the use of restored items has to be delayed by a couple of seconds. This delay has to be determined experimentally.")])}],!1,null,null,null);t.default=r.exports}}]);