(window.webpackJsonp=window.webpackJsonp||[]).push([[156],{664:function(t,e,i){"use strict";i.r(e);var r=i(0),n=Object(r.a)({},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content"},[i("h1",{attrs:{id:"digitalstrom-binding"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#digitalstrom-binding","aria-hidden":"true"}},[t._v("#")]),t._v(" digitalSTROM Binding "),i("Badge",{attrs:{type:"warn",text:"v1"}})],1),t._v(" "),i("div",{staticClass:"danger custom-block"},[i("p",{staticClass:"custom-block-title"},[t._v("OBSOLETE BINDING")]),t._v(" "),i("p",[t._v("This 1.x binding is obsolete; it has been replaced by the 2.x "),i("router-link",{attrs:{to:"./../digitalstrom/"}},[t._v("digitalstrom")]),t._v(" binding which you should use instead.")],1)]),t._v(" "),i("AddonLogo"),t._v(" "),i("p",[t._v("The openHAB digitalSTROM binding allows interaction with digitalSTROM devices.")]),t._v(" "),t._m(0),t._v(" "),i("p",[t._v("There is also a binding specifically for openHAB 2 "),i("a",{attrs:{href:"https://www.openhab.org/addons/bindings/digitalstrom/",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),i("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),i("ul",[i("li",[t._v("Unzip "),i("a",{attrs:{href:"https://github.com/openhab/openhab/raw/master/bundles/binding/org.openhab.binding.digitalstrom/DigitalSTROM_OPENHAB_ADD-ON.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("DigitalSTROM_OPENHAB_ADD-ON.zip"),i("OutboundLink")],1)]),t._v(" "),i("li",[t._v('copy "openhab/openhab.js" to your dss server "/usr/share/dss/add-ons/"')]),t._v(" "),i("li",[t._v('copy "openhab.xml" to your dss server "/usr/share/dss/data/subscriptions.d/"')])]),t._v(" "),t._m(3),t._v(" "),i("p",[t._v("The digitalSTROM JSON service interface is limited to the https protocol.\nFor security reasons, creating a self signed cetificate with correct given hostname is requird.\nFollow these steps:")]),t._v(" "),t._m(4),t._v(" "),i("p",[t._v("Copy the newly generated certificate onto your digitalSTROM server and\nimport it to java trusted store of your openHAB server by using java keytool.")]),t._v(" "),i("p",[t._v("Keytool usage:")]),t._v(" "),t._m(5),t._v(" "),i("p",[t._v("Keytool usage example (OS X):")]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),i("ul",[i("li",[t._v("To obtain a loginToken, point your browser to "),i("a",{attrs:{href:"https://dss.local:8080/json/system/requestApplicationToken?applicationName=openHAB",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://dss.local:8080/json/system/requestApplicationToken?applicationName=openHAB"),i("OutboundLink")],1)]),t._v(" "),i("li",[t._v("Store the result in openhab.cfg file")]),t._v(" "),i("li",[t._v("After receiving the application token you need to enable it in your digitalSTROM configurator under System -> Zugriffsberechtigung")])]),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),i("table",[t._m(10),t._v(" "),i("tbody",[i("tr",[i("td",[t._v("uri")]),t._v(" "),i("td"),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("Yes")]),t._v(" "),i("td",[t._v("The hostname and port of the digitalSTROM server (dSS); eg. "),i("a",{attrs:{href:"https://dss.local:8080",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://dss.local:8080"),i("OutboundLink")],1)])]),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16)])]),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),i("p",[t._v("Item bindings must conform to the following format:")]),t._v(" "),t._m(19),t._v(" "),i("p",[t._v("See examples below.")]),t._v(" "),i("p",[t._v("The following keys are supported:")]),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),i("p",[t._v("For up and down use:")]),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),i("p",[t._v("To call apartment or zone scenes use NumberItems or StringItems:")]),t._v(" "),t._m(37),t._v(" "),i("p",[t._v("And add mappings in the .sitemap file:")]),t._v(" "),t._m(38),t._v(" "),t._m(39),t._v(" "),i("p",[t._v("To poll and/or persist/visualize the curent power consumption (ACTIVE_POWER), use StringItems or NumberItems.")]),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),i("p",[t._v("Be aware that the system will work very slow on sensor reading.")]),t._v(" "),i("p",[t._v("The "),i("a",{attrs:{href:"http://developer.digitalstrom.org/Architecture/ds-basics.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("digitalSTROM Basic Concepts document"),i("OutboundLink")],1),t._v(" (p. 36) says:")]),t._v(" "),i("p",[t._v('Rule 8 \t"Application processes that do automatic cyclic reads or writes of\ndevice parameters are subject to a request limit: at maximum one request\nper minute and circuit is allowed."')]),t._v(" "),i("p",[t._v('Rule 9 \t"Application processes that do automatic cyclic reads of measured\nvalues are subject to a request limit: at maximum one request per minute\nand circuit is allowed."')]),t._v(" "),t._m(42),t._v(" "),t._m(43),t._v(" "),t._m(44),t._v(" "),t._m(45),t._v(" "),t._m(46),t._v(" "),t._m(47),t._v(" "),t._m(48),t._v(" "),i("p",[t._v("At first the system is slow while it learns how to react on specific scene calls (sensor reading). But after some time it will work fast!")]),t._v(" "),i("DocPreviousVersions"),t._v(" "),i("EditPageLink")],1)},[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[i("a",{attrs:{href:"#prerequisites"}},[t._v("Prerequisites")])]),t._v(" "),i("li",[i("a",{attrs:{href:"#binding-configuration"}},[t._v("Binding Configuration")])]),t._v(" "),i("li",[i("a",{attrs:{href:"#item-configuration"}},[t._v("Item Configuration")])]),t._v(" "),i("li",[i("a",{attrs:{href:"#examples"}},[t._v("Examples")])]),t._v(" "),i("li",[i("a",{attrs:{href:"#notes"}},[t._v("Notes")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"prerequisites"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites","aria-hidden":"true"}},[this._v("#")]),this._v(" Prerequisites")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"digitalstrom-server-add-on"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#digitalstrom-server-add-on","aria-hidden":"true"}},[this._v("#")]),this._v(" digitalSTROM server add-on")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"digitalstrom-server-certificate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#digitalstrom-server-certificate","aria-hidden":"true"}},[this._v("#")]),this._v(" digitalSTROM server certificate")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ol",[i("li",[i("p",[t._v("openssl genrsa -out privkey.pem 1024")])]),t._v(" "),i("li",[i("p",[t._v("chmod 400 privkey.pem")])]),t._v(" "),i("li",[i("p",[t._v("openssl req -new -key privkey.pem -out certreq.csr")]),t._v(" "),i("p",[t._v("Enter your details:")]),t._v(" "),i("p",[t._v("Country Name (2 letter code) [AU]: DE // not important")]),t._v(" "),i("p",[t._v("State or Province Name (full name) [Some-State]: NRW // not important")]),t._v(" "),i("p",[t._v("Locality Name (eg, city) []: Gummersbach // not important")]),t._v(" "),i("p",[t._v("Organization Name (eg, company) [Internet Widgits Pty Ltd]: dss.local // network name of your dss, important")]),t._v(" "),i("p",[t._v("Organizational Unit Name (eg, section) []: dss.local // network name of your dss, important")]),t._v(" "),i("p",[t._v("Common Name (eg, YOUR name) []: dss.local // network name of your dss, important")]),t._v(" "),i("p",[t._v("Email Address []: // not important")]),t._v(" "),i("p",[t._v("Please enter the following 'extra' attributes to be sent with your certificate request A challenge password []: // not important, press enter")]),t._v(" "),i("p",[t._v("An optional company name []: // not important, press enter")])]),t._v(" "),i("li",[i("p",[t._v("openssl x509 -req -days 9000 -in certreq.csr -signkey privkey.pem -out dsscert.pem")])]),t._v(" "),i("li",[i("p",[t._v("cat privkey.pem >> dsscert.pem")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("$JAVA_HOME/bin/keytool -importcert -alias <some descriptive name> -keystore <path to keystore> -file <certificate file>\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("sudo keytool -importcert -alias DSS -keystore /System/Library/Java/Support/CoreDeploy.bundle/Contents/Home/lib/security/cacerts -file dss.local.pem\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"logintoken"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#logintoken","aria-hidden":"true"}},[this._v("#")]),this._v(" loginToken")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"binding-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#binding-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Binding Configuration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The binding can be configured in the file "),e("code",[this._v("services/digitalstrom.cfg")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Property")]),this._v(" "),e("th",[this._v("Default")]),this._v(" "),e("th",{staticStyle:{"text-align":"center"}},[this._v("Required")]),this._v(" "),e("th",[this._v("Description")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",[this._v("connectTimeout")]),this._v(" "),e("td",[this._v("4000")]),this._v(" "),e("td",{staticStyle:{"text-align":"center"}},[this._v("No")]),this._v(" "),e("td",[this._v("The connect timeout (in milliseconds)")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("td",[t._v("loginToken")]),t._v(" "),i("td"),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("No")]),t._v(" "),i("td",[t._v("A token to allow login without a username and password; required if "),i("code",[t._v("user")]),t._v(" and "),i("code",[t._v("password")]),t._v(" settings are not specified")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("td",[t._v("password")]),t._v(" "),i("td",[t._v("dssadmin")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("No")]),t._v(" "),i("td",[t._v("The username to use for login; required if "),i("code",[t._v("loginToken")]),t._v(" setting is not specified")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",[this._v("readTimeout")]),this._v(" "),e("td",[this._v("10000")]),this._v(" "),e("td",{staticStyle:{"text-align":"center"}},[this._v("No")]),this._v(" "),e("td",[this._v("The read timeout (in milliseconds)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",[this._v("refreshinterval")]),this._v(" "),e("td",[this._v("1000")]),this._v(" "),e("td",{staticStyle:{"text-align":"center"}},[this._v("No")]),this._v(" "),e("td",[this._v("The refresh interval (in milliseconds)")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("td",[t._v("user")]),t._v(" "),i("td",[t._v("dssadmin")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("No")]),t._v(" "),i("td",[t._v("The password to use for login; required if "),i("code",[t._v("loginToken")]),t._v(" setting is not specified")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[t._v("Note: if the "),i("code",[t._v("loginToken")]),t._v(", "),i("code",[t._v("user")]),t._v(", and "),i("code",[t._v("password")]),t._v(" settings are all specified, the "),i("code",[t._v("loginToken")]),t._v(" will be used for login.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"item-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#item-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Item Configuration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v('digitalstrom="<key1>:<value1>[#<keyN>:<valueN>]"\n')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("    dsid            // digitalSTROM device id; the shorter dsid, known as S.N: xxxxxxxx (8 letters), is also supported\n    dsmid           // digitalSTROM meter id (dSM)\n    consumption     // optional for metering\n    timeinterval    // timeinterval to initiate a metering job\n    context         // in some cases use context:\n    zoneid          // only in combination with a NumberItem or StringItem for apartment or zone calls\n    groupid         // only in combination with a NumberItem or StringItem for apartment or zone calls\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The following are the supported values for the "),e("code",[this._v("consumption")]),this._v(" key:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("    ACTIVE_POWER    // in use with a device or meter -> current power consumption (w)\n    OUTPUT_CURRENT  // only in use with a device \t-> amperage (mA)\n    ELECTRIC_METER  // only in use with a meter (wh)\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The following are the supported values for the "),e("code",[this._v("context")]),this._v(" key:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("    slat            // important if it's a roller shutter: to have a item to control the slats\n    awning          // important for roller shutter: if it's a marquee/awning to show the right icon -> open-close\n    apartment       // in combination with a NumberItem or StringItem to make apartment calls\n    zone            // in combination with a NumberItem or StringItem to make zone calls\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"examples"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#examples","aria-hidden":"true"}},[this._v("#")]),this._v(" Examples")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"items"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#items","aria-hidden":"true"}},[this._v("#")]),this._v(" Items")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v('Switch Light_GF_Corridor_Ceiling    "Ceiling"       {digitalstrom="dsid:3504175fe000000000000001"}\nDimmer Light_GF_Living_Table        "Table"         {digitalstrom="dsid:3504175fe000000000000001"}\n')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"rollershutter"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rollershutter","aria-hidden":"true"}},[this._v("#")]),this._v(" Rollershutter")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v('Rollershutter Shutter_GF_Living     "Livingroom"    {digitalstrom="dsid:3504175fe000000000000001"}\n')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("In case of marquee/awning add the "),e("code",[this._v("context")]),this._v(" key with a value of "),e("code",[this._v("awning")]),this._v(":")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v('Rollershutter Shutter_GF_Living     "Livingroom"    {digitalstrom="dsid:3504175fe000000000000001#context:awning"}\n')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"jalousie"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jalousie","aria-hidden":"true"}},[this._v("#")]),this._v(" Jalousie")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v('Rollershutter Shutter_GF_Living_UP_DOWN     "Livingroom UP/DOWN"    {digitalstrom="dsid:3504175fe000000000000001"}\n')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Add the "),e("code",[this._v("context")]),this._v(" key with a value of "),e("code",[this._v("slat")]),this._v(" to adjust the slats:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v('Rollershutter Shutter_GF_Living_UP_DOWN     "Livingroom UP/DOWN"    {digitalstrom="dsid:3504175fe000000000000001#context:slat"}\n')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"scenes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scenes","aria-hidden":"true"}},[this._v("#")]),this._v(" Scenes")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v('Number|String Apartment_Scene       "Apartment Scene" {digitalstrom="context:apartment"}\nNumber|String All_Apartment_Lights  "All lights"      {digitalstrom="context:apartment#groupid:1"}          //optional add groupid\n\nNumber|String Zone_Scene            "Room Scene"      {digitalstrom="context:zone#zoneid:65535"}\nNumber|String All_Zone_Lights       "All room lights" {digitalstrom="context:zone#zoneid:65535#groupid:1"}  //optional add groupid\n')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v('Selection item=Apartment_Scene  label="Apartment Scene Selection"   mappings=[65=Panik, 72=Gehen]\t// here you have to use a valid sceneID\nSwitch item=Zone_Scene          label="Room Scene"                  mappings=[14=On, 13=Off]      // here you have to use a valid sceneID\n')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"consumption"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#consumption","aria-hidden":"true"}},[this._v("#")]),this._v(" Consumption")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"device-consumption"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#device-consumption","aria-hidden":"true"}},[this._v("#")]),this._v(" Device consumption")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v('Number Power_Consumption_TV\t"TV [%d W]" {digitalstrom="dsid:3504175fe000000000000001#consumption:ACTIVE_POWER#timeinterval:60000"}\t// read device power consumption every 60 seconds\n')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"circuit-consumption"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#circuit-consumption","aria-hidden":"true"}},[this._v("#")]),this._v(" Circuit consumption")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v('Number Consumption_dSM "dSM [%d W]"\t{digitalstrom="dsmid:3504175fe000001000000001#consumption:ACTIVE_POWER#timeinterval:3000"} // read power consumption every 3 seconds (it \'works\' because here we read cached values)\n')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"apartment-consumption"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#apartment-consumption","aria-hidden":"true"}},[this._v("#")]),this._v(" Apartment consumption")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v('Number Consumption_House "Total house consumption [%s W]"\t{digitalstrom="dsmid:ALL#consumption:ACTIVE_POWER#timeinterval:3000"}\n')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"general-metering-consumption-note"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#general-metering-consumption-note","aria-hidden":"true"}},[this._v("#")]),this._v(" General metering/consumption note")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("The timeinterval only initiates a metering job; there is no guarantee that the worker will start it in this time!")]),this._v(" "),e("li",[this._v("It is better to read the consumption of meters (dSMs) instead of devices.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"notes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#notes","aria-hidden":"true"}},[this._v("#")]),this._v(" Notes")])}],!1,null,null,null);e.default=n.exports}}]);