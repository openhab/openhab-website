(window.webpackJsonp=window.webpackJsonp||[]).push([[551],{518:function(e,t,s){"use strict";s.r(t);var n=s(0),a=Object(n.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[e._m(0),e._v(" "),s("p",[e._v('Now that we have the two items - "Presence_Mobile_John" aka "Johns mobile" and "Wallplug_FF_LR_TV" aka "TV wallplug LR" - we can create a simple rule.\nLet\'s assume we want to turn on the wallplug (and give some juice to the connected TV) as soon as John\'s mobile comes online, turn it off again when the mobile goes offline (this would be a very basic "presence" rule).')]),e._v(" "),e._m(1),e._v(" "),e._m(2),s("p",[e._v("You can create as many .rules files as you want - this eases the overview of different rules/situations. For example:")]),e._v(" "),e._m(3),e._v(" "),s("p",[e._v("For now, we edit the default.rules")]),e._v(" "),e._m(4),s("p",[e._v("The rule syntax in this example is very easy:")]),e._v(" "),e._m(5),s("p",[e._v("The trigger conditions can be one of the following:")]),e._v(" "),e._m(6),e._v(" "),s("p",[s("strong",[e._v("More information on rules can be found "),s("router-link",{attrs:{to:"/docs/configuration/rules-dsl.html"}},[e._v("in the rules section of the user manual!")])],1)]),e._v(" "),s("p",[e._v('The execution block in the example only consists of the "sendCommand" command, which sets the state of the named item.')]),e._v(" "),e._m(7),s("p",[e._v("Once the mobile comes online, the wallplug will turn on, As soon as it goes offline, it will turn off.\nJust as simple as that ðŸ˜ƒ")]),e._v(" "),s("hr"),e._v(" "),e._m(8),e._v(" "),s("hr"),e._v(" "),e._m(9),e._v(" "),e._m(10),e._v(" "),e._m(11),e._v(" "),e._m(12),e._v(" "),s("hr"),e._v(" "),s("DocPreviousVersions"),e._v(" "),s("EditPageLink")],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"working-with-rules-and-scripts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#working-with-rules-and-scripts","aria-hidden":"true"}},[this._v("#")]),this._v(" Working with rules and scripts")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Rules are defined in the "),t("code",[this._v("$OPENHAB_CONF/rules")]),this._v(" directory.\nSo we create the file default.rules there.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[this._v("$OPENHAB_CONF")]),this._v("/rules/default.rules\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("presence.rules for the presence detection")]),this._v(" "),t("li",[this._v("alarm.rules for your alarm actions")]),this._v(" "),t("li",[this._v("tv.rules for rules specific for your SmartTV")]),this._v(" "),t("li",[this._v("and so on")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("rule "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Wallplug_FF_LR_TV ON"')]),e._v("\nwhen\n  Item Presence_Mobile_John changed from OFF to ON\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("then")]),e._v("\n  Wallplug_FF_LR_TV.sendCommand"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("ON"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\nend\n\nrule "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Wallplug_FF_LR_TV OFF"')]),e._v("\nwhen\n  Item Presence_Mobile_John changed from ON to OFF\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("then")]),e._v("\n  Wallplug_FF_LR_TV.sendCommand"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("OFF"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\nend\n")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("rule "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"rule name (should be unique for logging purposes)"')]),e._v("\nwhen\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("TRIGGER CONDITION"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[e._v("1")]),e._v(">")]),e._v(" or\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("TRIGGER_CONDITION"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[e._v("2")]),e._v(">")]),e._v(" or\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("TRIGGER_CONDITION"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[e._v("3")]),e._v(">")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("then")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("EXECUTION_BLOCK"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\nend\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("Item triggers - just like in the example above. If the state of an item changes, do something")]),this._v(" "),t("li",[this._v("Time triggers - do something at a specified time")]),this._v(" "),t("li",[this._v("System triggers - do something after a system event happened, i.e. openHAB was started or is shut down")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("ItemName.sendCommand"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[this._v("(")]),this._v("STATE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[this._v(")")]),this._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("This part has to be completed!")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("em",[this._v("Guidelines")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("em",[this._v("I think this will become the longest section")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("em",[this._v("Don't forget to address JSR233 or other alternatives to the DSL that will be built into openHAB")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[s("p",[s("em",[e._v("Event driven development")])])]),e._v(" "),s("li",[s("p",[s("em",[e._v("Format and structure of rules")])])]),e._v(" "),s("li",[s("p",[s("em",[e._v("Difference between actions and posting sending things to items")])])]),e._v(" "),s("li",[s("p",[s("em",[e._v("Functions")])])]),e._v(" "),s("li",[s("p",[s("em",[e._v("Group.members manipulation and how it can help simplify your rules")])])]),e._v(" "),s("li",[s("p",[s("em",[e._v("How to figure out what to import")])])]),e._v(" "),s("li",[s("p",[s("em",[e._v("Working with Time")])])]),e._v(" "),s("li",[s("p",[s("em",[e._v("Working with Timers")])])]),e._v(" "),s("li",[s("p",[s("em",[e._v("Casting to appropriate types and when that is necessary")])])]),e._v(" "),s("li",[s("p",[s("em",[e._v("Working with Numbers")])])]),e._v(" "),s("li",[s("p",[s("em",[e._v("Working with States")])])]),e._v(" "),s("li",[s("p",[s("em",[e._v("Lambdas -> in advanced openHAB")])])]),e._v(" "),s("li",[s("p",[s("em",[e._v("...")])])])])}],!1,null,null,null);t.default=a.exports}}]);