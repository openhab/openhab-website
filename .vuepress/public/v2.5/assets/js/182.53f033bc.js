(window.webpackJsonp=window.webpackJsonp||[]).push([[182],{703:function(e,t,a){"use strict";a.r(t);var s=a(0),r=Object(s.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"fatek-plc-binding"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fatek-plc-binding","aria-hidden":"true"}},[e._v("#")]),e._v(" Fatek PLC Binding "),a("Badge",{attrs:{type:"warn",text:"v1"}})],1),e._v(" "),a("AddonLogo"),e._v(" "),a("p",[a("a",{attrs:{href:"http://fatek.com/en/prod.php?catId=1",target:"_blank",rel:"noopener noreferrer"}},[e._v("Fatek PLC"),a("OutboundLink")],1),e._v(" is one kind of programmable logic controller.  This binding support native Fatek protocol to communicate with PLC.  For communication to PLC is used "),a("a",{attrs:{href:"http://www.simplify4u.org/jfatek/",target:"_blank",rel:"noopener noreferrer"}},[e._v("JFatek library"),a("OutboundLink")],1),e._v(".")]),e._v(" "),e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._m(5),e._v(" "),e._m(6),e._v(" "),a("p",[e._v("There are not more parameters for this connection protocols.")]),e._v(" "),e._m(7),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),a("p",[e._v("Serial port name is given as address of connectionUri.\nYou can write begin name of port, first matched will be used.")]),e._v(" "),a("p",[e._v("Examples:")]),e._v(" "),e._m(10),e._v(" "),e._m(11),e._v(" "),e._m(12),e._v(" "),a("p",[e._v("openHAB items can be bound to Fatek PLC by example definition")]),e._v(" "),e._m(13),e._m(14),e._v(" "),e._m(15),e._v(" "),e._m(16),a("p",[e._v("This means that item will be updated every second poll cycle.")]),e._v(" "),a("p",[e._v("Only the item types documented below are supported.")]),e._v(" "),e._m(17),e._v(" "),e._m(18),a("p",[e._v("Last element indicates color mode used to write data to PLC, default value is HSB.")]),e._v(" "),e._m(19),e._v(" "),a("p",[e._v("REG4 is optional if you specified it, on/off command will use that register for corresponding on/off state.\nIf you not specified REG4 on/off command will write white or black value to color registers.")]),e._v(" "),e._m(20),e._v(" "),e._m(21),a("p",[e._v('We specified only one register.  If register name starts with "!" (exclamation mark) value read will be inverted.')]),e._v(" "),e._m(22),e._v(" "),e._m(23),e._m(24),e._v(" "),a("p",[e._v('If registers name starts with "!" (exclamation mark) value read and written will be inverted.')]),e._v(" "),e._m(25),e._v(" "),e._m(26),e._v(" "),e._m(27),a("p",[e._v("Where:")]),e._v(" "),e._m(28),e._v(" "),a("p",[e._v("All fields must be set, if you want to skip some of the item you can put number instead of register name.")]),e._v(" "),a("p",[e._v("Item accept only 16 bit data register.")]),e._v(" "),e._m(29),e._v(" "),a("p",[e._v("Eg. read current PLC time")]),e._v(" "),e._m(30),e._m(31),e._v(" "),e._m(32),a("p",[e._v("In REG we store seconds from begining of the UNIX epoch.")]),e._v(" "),a("p",[e._v("If we add R to the end of register name DateTime item will recognize as relative seconds to now.\nWe can read some counter which count seconds and we can display the time when counting was started.")]),e._v(" "),a("p",[e._v("We can also specific factor value, read seconds will be multiplied by this value.")]),e._v(" "),e._m(33),e._v(" "),e._m(34),a("p",[e._v("We use one data type register for value.")]),e._v(" "),a("p",[e._v("Step options can specified step value for INCREASE/DECREASE command.")]),e._v(" "),a("p",[e._v("We can also specific factor value, all read data will be multiplied by this value,\nbefore write value from OpenHab will be divided by factor.")]),e._v(" "),e._m(35),e._v(" "),e._m(36),a("p",[e._v("If we start register name with + (plus sign) values read from plc will be recognized as unsigned number.")]),e._v(" "),a("p",[e._v('If we end register name with "F" values read from plc will be recognized as float number.\nFor float number 32 bits data register must be used.')]),e._v(" "),a("p",[e._v("We can also specific factor value, all read data will be multiplied by this value,\nbefore write value from OpenHab will be divided by factor.")]),e._v(" "),a("p",[e._v("For Number item we can provide transformation function, eg: JS(file.js)")]),e._v(" "),e._m(37),e._v(" "),e._m(38),e._m(39),e._v(" "),a("p",[e._v("We can also specific factor value, all read data will be multiplied by this value.")]),e._v(" "),a("DocPreviousVersions"),e._v(" "),a("EditPageLink")],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"binding-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#binding-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Binding Configuration")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The binding can be configured in the file "),t("code",[this._v("services/fatekplc.cfg")]),this._v(".")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("table",[a("thead",[a("tr",[a("th",[e._v("Property")]),e._v(" "),a("th",[e._v("Default")]),e._v(" "),a("th",{staticStyle:{"text-align":"center"}},[e._v("Required")]),e._v(" "),a("th",[e._v("Description")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("refresh")]),e._v(" "),a("td",[e._v("60000")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("No")]),e._v(" "),a("td",[e._v("refresh interval in milliseconds which is used to poll values from the Fatek PLC server")])]),e._v(" "),a("tr",[a("td",[a("code",[e._v("<plcName>")]),e._v(".connectionUri")]),e._v(" "),a("td"),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("Yes")]),e._v(" "),a("td",[e._v("connection URI for the "),a("code",[e._v("<plcName>")]),e._v(" you provide, so multiple Fatek PLCs can be addressed. Supports either "),a("code",[e._v("tcp://")]),e._v(", "),a("code",[e._v("udp://")]),e._v(" or "),a("code",[e._v("serial://")]),e._v(" protocol.")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The common "),t("code",[this._v("connectionUri")]),this._v(" syntax is:")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("protocol://address:[port]?plcId=<plcId>param1=value1&paramN=ValueN\n")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("table",[a("thead",[a("tr",[a("th",[e._v("Name")]),e._v(" "),a("th",[e._v("Description")]),e._v(" "),a("th",[e._v("Default")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("plcId")]),e._v(" "),a("td",[e._v("PLC id, must be set")]),e._v(" "),a("td",[e._v("-")])]),e._v(" "),a("tr",[a("td",[e._v("timeout")]),e._v(" "),a("td",[e._v("connection/read timeout in milliseconds")]),e._v(" "),a("td",[e._v("5000")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"tcp-or-udp-parameters"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tcp-or-udp-parameters","aria-hidden":"true"}},[this._v("#")]),this._v(" "),t("code",[this._v("tcp")]),this._v(" or "),t("code",[this._v("udp")]),this._v(" parameters")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Example, "),t("code",[this._v("udp://192.168.1.100?plcId=1&timeout=1000")]),this._v("\nDefault "),t("code",[this._v("port")]),this._v(" is "),t("code",[this._v("500")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"serial-parameters"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#serial-parameters","aria-hidden":"true"}},[this._v("#")]),this._v(" serial parameters")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("table",[a("thead",[a("tr",[a("th",[e._v("Name")]),e._v(" "),a("th",[e._v("Description")]),e._v(" "),a("th",[e._v("Default")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("baudRate")]),e._v(" "),a("td",[e._v("serial connection speed  bit/s")]),e._v(" "),a("td",[e._v("9600")])]),e._v(" "),a("tr",[a("td",[e._v("dataBits")]),e._v(" "),a("td",[e._v("number of data bits in each character")]),e._v(" "),a("td",[e._v("7")])]),e._v(" "),a("tr",[a("td",[e._v("stopBits")]),e._v(" "),a("td",[e._v("number of bits sent at the end of each character, can be "),a("code",[e._v("1")]),e._v(", "),a("code",[e._v("2")]),e._v(" or "),a("code",[e._v("1.5")])]),e._v(" "),a("td",[e._v("1")])]),e._v(" "),a("tr",[a("td",[e._v("parity")]),e._v(" "),a("td",[e._v("control bit set, can be: "),a("code",[e._v("NONE")]),e._v(", "),a("code",[e._v("ODD")]),e._v(", "),a("code",[e._v("EVEN")]),e._v(", "),a("code",[e._v("MARK")]),e._v(" or "),a("code",[e._v("SPACE")])]),e._v(" "),a("td",[e._v("EVEN")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("serial:///dev/tty-usbserial?plcId=1&baudRate=19200")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("serial://COM1?plcId=1&baudRate=19200&timeout=1000")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"item-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#item-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Item Configuration")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dsl"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Item")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")])]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" fatekplc"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"fatek_binding"')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("fatek binding")]),this._v(" is described below for specific item type.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("For all items we can add options "),t("code",[this._v("refreshStep")]),this._v(", eg.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("plc1:R100:refreshStep=2\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"color-items"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#color-items","aria-hidden":"true"}},[this._v("#")]),this._v(" Color Items")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("plcName:REG1:REG2:REG3[:REG4][:RGB|HSB]\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("REG1, REG2 and RE3 must be data type register.")]),this._v(" "),t("li",[this._v("for HSB mode REG1 = H, REG2 = S, REG3 = B")]),this._v(" "),t("li",[this._v("for RGB mode REG1 = R, REG2 = G, REG3 = B")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"contact-items"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#contact-items","aria-hidden":"true"}},[this._v("#")]),this._v(" Contact Items")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("plcName:[!]REG\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"switch-items"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#switch-items","aria-hidden":"true"}},[this._v("#")]),this._v(" Switch Items")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("plcName:[!]REG1[:[!]REG2]\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("REG1 is used for read state of switch")]),this._v(" "),t("li",[this._v("REG2 is used for change state of switch, if is not specified - REG1 is used")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"datetime-item"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#datetime-item","aria-hidden":"true"}},[this._v("#")]),this._v(" DateTime Item")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"version-1"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#version-1","aria-hidden":"true"}},[this._v("#")]),this._v(" Version 1")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("plcName:Y:m:d:H:M:S\n")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[e._v("Y - year reg, if value in range 0 - 49 we add 2000, in range 50 - 99 we add 1900")]),e._v(" "),a("li",[e._v("m - month reg - range 1 - 12, (1 means January)")]),e._v(" "),a("li",[e._v("d - day of the month reg - The first day of the month has value 1")]),e._v(" "),a("li",[e._v("H - hour of the day reg - 24-hour clock")]),e._v(" "),a("li",[e._v("M - minute reg")]),e._v(" "),a("li",[e._v("S - second reg")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("You can end register name with "),t("code",[this._v("L")]),this._v(" - lowest 8 bits or "),t("code",[this._v("H")]),this._v(" - highest 8 bits.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("plcName:R4133:R4132:R4131:R4135H:R4135L:R4128\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"version-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#version-2","aria-hidden":"true"}},[this._v("#")]),this._v(" Version 2")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("plcName:REG[R][:factor=factorValue]\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"dimmer-items"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dimmer-items","aria-hidden":"true"}},[this._v("#")]),this._v(" Dimmer Items")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("plcName:REG:[step=value][:factor=factorValue]\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"number-items"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#number-items","aria-hidden":"true"}},[this._v("#")]),this._v(" Number Items")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("plcName:[+]REG[F][:transformationType(params)][:factor=factorValue]\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"rollershutter-items"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rollershutter-items","aria-hidden":"true"}},[this._v("#")]),this._v(" Rollershutter Items")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("plcName:REG1:REG2:REG3[:factor=factorValue]\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("REG1 is used for reading current positions in percent.")]),this._v(" "),t("li",[this._v("REG2 is set to true/1 for UP command")]),this._v(" "),t("li",[this._v("REG3 is set to true/1 for DOWN command")]),this._v(" "),t("li",[this._v("for STOP command REG2 and REG3 is set to false/0.")])])}],!1,null,null,null);t.default=r.exports}}]);