(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{297:function(e,t,a){e.exports=a.p+"assets/img/Philips_Hue_Bridge.878c36de.jpg"},822:function(e,t,a){"use strict";a.r(t);var s=[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"openhab-hue-emulation-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#openhab-hue-emulation-service","aria-hidden":"true"}},[this._v("#")]),this._v(" openHAB Hue Emulation Service")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[e._v("Lights: Maps to items")]),e._v(" "),a("li",[e._v("Groups: Maps to group items")]),e._v(" "),a("li",[e._v("Rooms: Maps to group items with a specific tag")]),e._v(" "),a("li",[e._v('Scenes: Maps to rules (new rule engine) that are tagged with "scene"')]),e._v(" "),a("li",[e._v('Rules: Maps to rules (new rule engine) that are tagged with "hueemulation_rule"')]),e._v(" "),a("li",[e._v('Schedule: Maps to rules (new rule engine) that are tagged with "hueemulation_schedule"')])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"discovery"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#discovery","aria-hidden":"true"}},[this._v("#")]),this._v(" Discovery:")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:a(297),alt:"Philips Hue Bridge"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"exposed-lights"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#exposed-lights","aria-hidden":"true"}},[this._v("#")]),this._v(" Exposed lights")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("It is important to note that you are exposing "),a("em",[e._v("Items")]),e._v(" not "),a("em",[e._v("Things")]),e._v(" or "),a("em",[e._v("Channels")]),e._v(".\nOnly Color, Dimmer, Rollershutter, Switch and Group type "),a("em",[e._v("Items")]),e._v(' are supported.\nGroup type items require the "Huelight" tag to be exposed as devices instead of Groups.')])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("An OSRAM SMART+ Plug,")]),this._v(" "),t("li",[this._v("a dimmable white color Philips A19 bulb and")]),this._v(" "),t("li",[this._v("an a Philips Gen 3 LCT010 extended color bulb.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v('If the item has the category "ColorLight": It will be exposed as a color bulb')]),this._v(" "),t("li",[this._v('If the item has the category "Light": It will be exposed as a switch.')])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v('"Switchable": Item will be exposed as an OSRAM SMART+ Plug')]),this._v(" "),t("li",[this._v('"Lighting": Item will be exposed as a dimmable white bulb')]),this._v(" "),t("li",[this._v('"ColorLighting": Item will be exposed as a color bulb')])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("It is the responsibility of binding developers to categories and default tag their available "),t("em",[this._v("Channels")]),this._v(", so that linked Items are automatically exposed with this service.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"exposed-names"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#exposed-names","aria-hidden":"true"}},[this._v("#")]),this._v(" Exposed names")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Your items labels are used for exposing!\nThe default naming schema for automatically linked items unfortunately names "),t("em",[this._v("Items")]),this._v(' like their Channel names,\nso usually "Brightness" or "Color". You want to rename those.')])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuration")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("org.openhab.hueemulation:pairingEnabled=false\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("You can define a pairing timeout in seconds.\nAfter that timeout, the "),t("code",[this._v("pairingEnabled")]),this._v(" is automatically set to "),t("code",[this._v("false")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("org.openhab.hueemulation:pairingTimeout=60\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("org.openhab.hueemulation:createNewUserOnEveryEndpoint=false\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("org.openhab.hueemulation:temporarilyEmulateV1bridge=false\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("org.openhab.hueemulation:permanentV1bridge=false\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("org.openhab.hueemulation:discoveryIps=192.168.1.100,::FFFF:A9DB:0D85\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("org.openhab.hueemulation:restrictToTagsSwitches=Switchable\norg.openhab.hueemulation:restrictToTagsWhiteLights=Lighting\norg.openhab.hueemulation:restrictToTagsColorLights=ColorLighting\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("org.openhab.hueemulation:restrictToTagsSwitches=NONE\norg.openhab.hueemulation:restrictToTagsWhiteLights=Lighting,Switchable\norg.openhab.hueemulation:restrictToTagsColorLights=ColorLighting\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("org.openhab.hueemulation:ignoreItemsWithTags=internal\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"troubleshooting"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting","aria-hidden":"true"}},[this._v("#")]),this._v(" Troubleshooting")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[e._v("port forward your openHAB installation to port 80,\n("),a("code",[e._v("iptables -t nat -A PREROUTING -p tcp -m tcp --dport 80 -j REDIRECT --to-ports 8080")]),e._v(")")]),e._v(" "),a("li",[e._v("install a reverse proxy on port 80, for example nginx with the following configuration:"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("server {\n  listen 80;\n  proxy_pass                              http://localhost:8080/;\n  proxy_set_header Host                   $http_host;\n  proxy_set_header X-Real-IP              $remote_addr;\n  proxy_set_header X-Forwarded-For        $proxy_add_x_forwarded_for;\n  proxy_set_header X-Forwarded-Proto      $scheme;\n}\n")])])])]),e._v(" "),a("li",[e._v("or let openHAB run on port 80 (the entire java process requires elevated privileges).")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v('Depending on the firmware version of your Amazon Echo, it may not support colored bulbs or switches.\nPlease assign "ColorLighting" and "Switchable" to the '),t("code",[this._v("WhiteLights")]),this._v(" type as explained above.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"text-configuration-example"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#text-configuration-example","aria-hidden":"true"}},[this._v("#")]),this._v(" Text configuration example")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dsl"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Switch")]),e._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("TestSwitch")]),e._v("      "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Kitchen Switch"')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Switchable"')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("channel"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Color")]),e._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("TestColorBulb")]),e._v("   "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Bathroom"')]),e._v("       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"ColorLighting"')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("channel"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("Dimmer")]),e._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("TestDimmer")]),e._v("      "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Hallway"')]),e._v("        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Lighting"')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("channel"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])}],n=a(0),i=Object(n.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[e._m(0),e._v(" "),a("p",[e._v("Hue Emulation exposes openHAB items as Hue lights to other Hue API compatible applications like Amazon Echos, Google Homes or any Hue compatible application.")]),e._v(" "),a("p",[e._v("Because Amazon Echo and Google Home control openHAB locally this way, it is a fast and reliable way to voice control your installation.\nSee the Troubleshoot section down below though.")]),e._v(" "),a("p",[e._v("This service is independent of the also available Hue binding!")]),e._v(" "),a("p",[e._v("Currently the following Hue functionality is supported:")]),e._v(" "),e._m(1),e._v(" "),a("p",[e._v("You can create / modify and remove groups, rooms, scenes, rules and schedules from within Hue compatible devices and apps.")]),e._v(" "),e._m(2),e._v(" "),a("p",[e._v("As soon as the service is enabled, it will announce the presence of an (emulated) HUE bridge of the second generation (square bridge).\nHue bridges are using the Universal Plug and Play (UPnP) protocol for discovery.")]),e._v(" "),e._m(3),e._v(" "),a("p",[e._v("Like the real HUE bridge the service must be put into pairing mode before other applications can access it.\nBy default the pairing mode disables itself after 1 minute (can be configured).")]),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),a("p",[e._v("This service can emulate 3 different devices:")]),e._v(" "),e._m(6),e._v(" "),a("p",[e._v("The exposed Hue-type depends on some criteria:")]),e._v(" "),e._m(7),e._v(" "),a("p",[e._v("This initial type determination is overridden if the item is tagged.")]),e._v(" "),a("p",[e._v("The following default tags are setup:")]),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),a("p",[e._v("You can tag items manually though as well.")]),e._v(" "),e._m(10),e._v(" "),e._m(11),e._v(" "),e._m(12),e._v(" "),a("p",[e._v("All options are available in the graphical interface and via textual configuration.\nThe following configurations can be adjusted.")]),e._v(" "),a("p",[e._v("Pairing can be turned on and off:")]),e._v(" "),e._m(13),e._m(14),e._v(" "),e._m(15),a("p",[e._v("Enable the following option in combination with pairing to create a new API key on the fly on every API endpoint, not only via the new-user-create API.")]),e._v(" "),a("p",[e._v("Necessary for Amazon Echos and other devices where the API key cannot be reset.\nAfter a new installation of openHAB or a configuration pruning the old API keys are gone but Amazon Echos will keep trying with their old, invalid keys.")]),e._v(" "),e._m(16),a("p",[e._v("Some Amazon Echo versions only allow V1 Hue bridges (the round ones, not the square ones) to be discovered.\nIf the following option is enabled in combination with the pairing mode, the service will pretend to be an old Hue bridge.")]),e._v(" "),a("p",[e._v("This option resets automatically after pairing mode has been switched off by the timeout.")]),e._v(" "),e._m(17),a("p",[e._v("Permanent V1 bridge emulation (no obvious reason to enable that):")]),e._v(" "),e._m(18),a("p",[e._v("The hue emulation service will announce its existence via UPnP on every\nof the openHAB configured primary addresses (IPv4 and IPv6).")]),e._v(" "),a("p",[e._v("Usually you do not want to set this option, but change the primary address configuration of openHAB.")]),e._v(" "),a("p",[e._v("This option allows you to override what addresses are used for the announcement.\nYou can have multiple comma separated entries.")]),e._v(" "),e._m(19),a("p",[e._v("The hue emulation service supports three types of emulated bulbs.\nYou need to tell the service which item tag corresponds to which emulated bulb type.\nOne of the comma separated tags must match for the item to be exposed.\nCan be empty to match an item based on other criteria.")]),e._v(" "),e._m(20),a("p",[e._v('The above default assignment means that every item that has the tag "Switchable" will be emulated as a Zigbee Switch.\nIf you want your switches to be exposed as lights instead (because your Amazon Echo does not support switches for example), you want to have:')]),e._v(" "),e._m(21),a("p",[e._v("The service tries to expose as much items as possible (greedy), based on some criteria as explained in the section above.\nIf you want to exclude items, you need to tag them. Define the tags with the following option:")]),e._v(" "),e._m(22),a("p",[e._v('The default is to not expose any items that have the "internal" tag assigned.\nYou want this tag for all items that are purely used for rules, as proxy items etc.')]),e._v(" "),e._m(23),e._v(" "),a("p",[e._v("Some devices like Amazon Echo, Google Home and all Philips devices (TVs, Apps) expect a Hue bridge to run on port 80.\nYou must either")]),e._v(" "),e._m(24),e._v(" "),a("p",[e._v("Please open port 80 tcp and port 1900 udp in your firewall installation.")]),e._v(" "),a("p",[e._v('You can test if the hue emulation does its job by enabling pairing mode including the option "Amazon Echo device discovery fix".')]),e._v(" "),a("ol",[a("li",[e._v('Navigate with your browser to "'),a("a",{attrs:{href:"http://your-openhab-ip/description.xml",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://your-openhab-ip/description.xml"),a("OutboundLink")],1),e._v('" to check the discovery response.\nCheck the IP address in there.')]),e._v(" "),a("li",[e._v('Navigate with your browser to "'),a("a",{attrs:{href:"http://your-openhab-ip/api/status",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://your-openhab-ip/api/status"),a("OutboundLink")],1),e._v('" to check the self test report.')])]),e._v(" "),a("p",[e._v("If you use the port forwarding way, the self-test page will not be able to correctly determine if your installation works on port 80.\nA reverse proxy is recommended.")]),e._v(" "),e._m(25),e._v(" "),a("p",[e._v("Also note that Amazon Echos are stubborn as.\nYou might need to remove all former recognized devices multiple times and perform the search via different Echos and also the web or mobile application.")]),e._v(" "),a("p",[e._v("It might help to (temporarly) lower the emulated bridge version in the configuration as described above,")]),e._v(" "),e._m(26),e._v(" "),a("p",[e._v("The item label will be used as the Hue device name. Please be aware that textual defined items are generally a bad idea.\nIn this case renaming items in Hue compatible Apps will fail.")]),e._v(" "),e._m(27),a("DocPreviousVersions"),e._v(" "),a("EditPageLink")],1)},s,!1,null,null,null);t.default=i.exports}}]);