(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{410:function(e,t,i){e.exports=i.p+"assets/img/layeringosgi.ff32734b.png"},411:function(e,t,i){e.exports=i.p+"assets/img/services.546f8ba3.png"},412:function(e,t,i){e.exports=i.p+"assets/img/states.90855c40.png"},502:function(e,t,i){"use strict";i.r(t);var r=[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"osgi-overview"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#osgi-overview","aria-hidden":"true"}},[this._v("#")]),this._v(" OSGi Overview")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table-of-contents"},[i("ul",[i("li",[i("a",{attrs:{href:"#concepts"}},[e._v("Concepts")])]),i("li",[i("a",{attrs:{href:"#layering"}},[e._v("Layering")])]),i("li",[i("a",{attrs:{href:"#bundles"}},[e._v("Bundles")])]),i("li",[i("a",{attrs:{href:"#lifecycle"}},[e._v("Lifecycle")])]),i("li",[i("a",{attrs:{href:"#services"}},[e._v("Services")]),i("ul",[i("li",[i("a",{attrs:{href:"#configuration-admin-service"}},[e._v("Configuration Admin Service")])]),i("li",[i("a",{attrs:{href:"#event-admin-service"}},[e._v("Event Admin Service")])])])]),i("li",[i("a",{attrs:{href:"#popular-osgi-containers"}},[e._v("Popular OSGi Containers")])]),i("li",[i("a",{attrs:{href:"#important-definitions"}},[e._v("Important Definitions")])]),i("li",[i("a",{attrs:{href:"#further-reading"}},[e._v("Further Reading")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"concepts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#concepts","aria-hidden":"true"}},[this._v("#")]),this._v(" Concepts")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",[i("li",[i("strong",[e._v("Modularity")]),e._v(" - it is realized with the "),i("a",{attrs:{href:"#important-definitions"}},[i("em",[e._v("bundle")])]),e._v(" concept;")]),e._v(" "),i("li",[i("strong",[e._v("Runtime Dynamics")]),e._v(" - software components can be managed at runtime;")]),e._v(" "),i("li",[i("strong",[e._v("Service Orientation")]),e._v(" - components communicate between each other through "),i("a",{attrs:{href:"#important-definitions"}},[i("em",[e._v("services")])]),e._v(".")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"layering"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#layering","aria-hidden":"true"}},[this._v("#")]),this._v(" Layering")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",[i("li",[i("strong",[e._v("Module Layer")]),e._v(" - it is responsible for managing dependencies between bundles and for class loading ("),i("a",{attrs:{href:"#bundles"}},[e._v("See Bundles Section")]),e._v(");")]),e._v(" "),i("li",[i("strong",[e._v("Life Cycle Layer")]),e._v(" - controls the lifecycle of the bundles ("),i("a",{attrs:{href:"#lifecycle"}},[e._v("See Lifecycle Section")]),e._v(");")]),e._v(" "),i("li",[i("strong",[e._v("Service Layer")]),e._v(" - defines a dynamic model (publish/find/bind) of communication between different modules ("),i("a",{attrs:{href:"#services"}},[e._v("See Services Section")]),e._v(");")]),e._v(" "),i("li",[i("strong",[e._v("Actual Services")]),e._v(" (Bundles on Fig.1) - this is the application layer, using all other layers;")]),e._v(" "),i("li",[i("strong",[e._v("Security Layer")]),e._v(" - optional layer, based on the Java 2 security architecture, that manages permissions for different modules.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"bundles"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bundles","aria-hidden":"true"}},[this._v("#")]),this._v(" Bundles")])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",{attrs:{href:"#important-definitions"}},[t("strong",[this._v("manifest")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Some of the most important information that the manifest contains are the bundle dependencies.\n"),t("strong",[this._v("A bundle can depend on another bundle or on a package")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The "),t("strong",[this._v("OSGi runtime uses the information about the dependencies to "),t("em",[this._v("wire")]),this._v(" the bundles and hides everything in this JAR unless it is explicitly exported")]),this._v(".\nThe dependencies to the Java standard libraries are managed by the "),t("em",[this._v("Bundle-RequiredExecutionEnvironment")]),this._v(" header, so it is not needed to import the Java core packages.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[this._v("Manifest-Version: 1.0\nBundle-ManifestVersion: 2\nBundle-Name: Example Plug-in\nBundle-SymbolicName: com.example.myosgi; singleton:=true\nBundle-Version: 1.0.0\nBundle-RequiredExecutionEnvironment: JavaSE-1.7\nImport-Package: org.example.required\nExport-Package: org.example.provided\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Bundles are used often to register and consume services.\nYou will find more information about that in the "),t("a",{attrs:{href:"#services"}},[this._v("Services")]),this._v(" section.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"lifecycle"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lifecycle","aria-hidden":"true"}},[this._v("#")]),this._v(" Lifecycle")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("OSGi is a dynamic platform.\nThat means that bundles may be "),t("em",[this._v("installed, uninstalled, started, stopped or updated")]),this._v(" at runtime (See Table 1).\nThe OSGi specification defines a mechanism how to manage the dependencies between the bundles and the functionality that they provide.\nThis is achieved with the help of the "),t("em",[this._v("lifecycle")]),this._v(" concept.")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("table",[i("thead",[i("tr",[i("th",[e._v("Status")]),e._v(" "),i("th",[e._v("Description")])])]),e._v(" "),i("tbody",[i("tr",[i("td",[e._v("INSTALLED")]),e._v(" "),i("td",[e._v("The bundle has been installed into the OSGi container, but some of it's dependencies are still not resolved. The bundle requires packages that have not been exported by any other bundle.")])]),e._v(" "),i("tr",[i("td",[e._v("RESOLVED")]),e._v(" "),i("td",[e._v("The bundle is installed and the all the dependencies at a class level are resolved and wired. The bundle can export the packages, that it provides.")])]),e._v(" "),i("tr",[i("td",[e._v("STARTING")]),e._v(" "),i("td",[e._v("A temporary state that the bundle goes through while the bundle is starting, after all dependencies have been resolved. The bundle is permitted to register services.")])]),e._v(" "),i("tr",[i("td",[e._v("ACTIVE")]),e._v(" "),i("td",[e._v("The bundle is running")])]),e._v(" "),i("tr",[i("td",[e._v("STOPPING")]),e._v(" "),i("td",[e._v("A temporary state that the bundle goes through while the bundle is stopping")])]),e._v(" "),i("tr",[i("td",[e._v("UNINSTALLED")]),e._v(" "),i("td",[e._v("The bundle has been removed from the OSGi container.")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:i(412),alt:"Bundle lifecycle"}}),t("br"),this._v("\nFig.2 Bundle State diagram")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"services"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#services","aria-hidden":"true"}},[this._v("#")]),this._v(" Services")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Another main concept, that allows the bundles to communicate between each other, is the "),t("em",[this._v("service")]),this._v(" model.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("In OSGi, a bundle can register a "),t("em",[this._v("service")]),this._v(" in a central "),t("a",{attrs:{href:"#important-definitions"}},[this._v("service registry")]),this._v(" under one ore more "),t("em",[this._v("service interface")])]),this._v(".\nIt is an important feature of OSGi, because it provides a central place to register and get services.\nA bundle is permitted to register service objects at any time during the STARTING, ACTIVE or STOPPING states.\nOther bundles can go the registry and list all objects, that are registered under a specific interface or class.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("A bundle can therefore register a service, it can get a service and it can track for appearing and disappearing of service.\n"),t("strong",[this._v("Any number of bundles can register the same service type and any number of bundles can get the same service.")]),this._v("\nA simple diagram of the service usage and tracking is shown on Fig. 3.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"configuration-admin-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuration-admin-service","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuration Admin Service")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[e._v("In OSGi, configurations are stored in a central database that is being managed by a special service - the "),i("em",[e._v("Configuration Admin Service")]),e._v("("),i("code",[e._v("org.osgi.service.cm.ConfigurationAdmin")]),e._v(").\nThis service monitors the service registry and "),i("strong",[e._v("provides a configuration to the services")]),e._v(" that are registered with a "),i("em",[e._v("service.pid")]),e._v(" property.\nConfiguration changes are first made persistent, and then are passed to the target service.\nIt is important to understand that "),i("strong",[e._v("the target bundle receives updates from the Configuration Admin service")]),e._v(". Implementations should be aware that the update reception could be delayed if the Configuration Admin service is missing.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"event-admin-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#event-admin-service","aria-hidden":"true"}},[this._v("#")]),this._v(" Event Admin Service")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[e._v("The "),i("em",[e._v("Event Admin Service")]),e._v(" ("),i("code",[e._v("org.osgi.service.event.EventAdmin")]),e._v(") takes a central place in the communication between "),i("em",[e._v("Event Publishers")]),e._v(" and subscribers ("),i("em",[e._v("Event Listeners")]),e._v(").\nIt is responsible for keeping track of the listeners, and sending events to them.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"popular-osgi-containers"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#popular-osgi-containers","aria-hidden":"true"}},[this._v("#")]),this._v(" Popular OSGi Containers")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"important-definitions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#important-definitions","aria-hidden":"true"}},[this._v("#")]),this._v(" Important Definitions")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("manifest")]),this._v(" - descriptive information about the bundle, contained in its JAR file")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Service Registry")]),this._v(" - enables a bundle to publish objects to a shared registry, advertised via a given set of Java interfaces.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"further-reading"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#further-reading","aria-hidden":"true"}},[this._v("#")]),this._v(" Further Reading")])}],n=i(0),a=Object(n.a)({},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[e._m(0),e._v(" "),r("p",[e._v("openHAB is being based on "),r("a",{attrs:{href:"https://www.osgi.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("OSGi"),r("OutboundLink")],1),e._v(" and understanding of OSGi modular architecture is very important.\nThis page is aimed to help developers, that are going to use OSGi for the first time and contains a basic overview of the OSGi technology.")]),e._v(" "),r("p"),e._m(1),r("p"),e._v(" "),e._m(2),e._v(" "),r("p",[e._v("As described in the "),r("a",{attrs:{href:"https://www.osgi.org/developer/architecture/",target:"_blank",rel:"noopener noreferrer"}},[e._v("OSGi architecture page"),r("OutboundLink")],1),e._v(", "),r("em",[e._v("OSGi is a set of "),r("a",{attrs:{href:"https://www.osgi.org/developer/specifications/",target:"_blank",rel:"noopener noreferrer"}},[e._v("specifications"),r("OutboundLink")],1),e._v(" that define a dynamic component system for Java. These specifications enable a development model, where applications are dynamically composed of many different reusable components.\nThe OSGi specifications enable components to hide their implementations from other components while communicating through services, which are objects that are specifically shared between components")]),e._v(".\nThis architecture significantly reduces the overall complexity of building, maintaining and deploying applications.")]),e._v(" "),r("p",[e._v("Key features of OSGi are:")]),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),r("p",[e._v("The OSGi framework consist of several layers build on top of each other (See Fig. 1):")]),e._v(" "),e._m(5),e._v(" "),r("p",[r("img",{attrs:{src:i(410),alt:"OSGi Layers"}}),r("br"),e._v("\nFig.1 OSGi Layering (Source:"),r("a",{attrs:{href:"https://www.osgi.org/wp-content/uploads/layering-osgi.png",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.osgi.org/wp-content/uploads/layering-osgi.png"),r("OutboundLink")],1),e._v(")")]),e._v(" "),r("p",[e._v("More details about the OSGi architecture can be found at "),r("a",{attrs:{href:"https://www.osgi.org/developer/architecture/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.osgi.org/developer/architecture/"),r("OutboundLink")],1)]),e._v(" "),e._m(6),e._v(" "),r("p",[e._v("Modules (called "),r("strong",[e._v("bundles")]),e._v(") are the smallest unit of modularization.\nTechnically a bundle is a JAR file with additional meta information.\nThis information is stored in file called "),e._m(7),e._v(" file.\nThe manifest file is part of the standard "),r("a",{attrs:{href:"http://docs.oracle.com/javase/7/docs/technotes/guides/jar/jar.html#",target:"_blank",rel:"noopener noreferrer"}},[e._v("Java specification"),r("OutboundLink")],1),e._v(", but OSGi adds additional metadata to it in form of specific headers.\nThe "),r("em",[e._v("Bundle-SymbolicName")]),e._v(" and the "),r("em",[e._v("Bundle-Version")]),e._v(" headers uniquely identify a bundle.\nIn OSGi is allowed to have "),r("strong",[e._v("bundles with same name, but different version running at the same time.")])]),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),r("p",[e._v("A simple manifest file can have the following content:")]),e._v(" "),e._m(10),r("p",[r("a",{attrs:{href:"https://osgi.org/download/r7/osgi.core-7.0.0.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("OSGi Core Release 7, Chapter 3: Module Layer"),r("OutboundLink")],1),e._v(" contains detailed information about the "),r("em",[e._v("Module Layer")]),e._v(" and description of the headers ("),r("em",[e._v("Manifest-Version")]),e._v(", "),r("em",[e._v("Bundle-ManifestVersion")]),e._v(", "),r("em",[e._v("Bundle-Name")]),e._v(") used in this example.")]),e._v(" "),e._m(11),e._v(" "),e._m(12),e._v(" "),e._m(13),e._v(" "),r("p",[e._v("The framework introduces a different states, transitions between these states and rules how this states are affecting the packages exported by the bundle and the services, that it provides.\nThe table below shows the possible states of an OSGi bundle with a short explanation:")]),e._v(" "),e._m(14),e._v(" "),r("p",[e._v("Table 1 Bundle states description")]),e._v(" "),r("p",[e._v("The possible status transitions are shown in the state diagram below:")]),e._v(" "),e._m(15),e._v(" "),e._m(16),e._v(" "),e._m(17),e._v(" "),e._m(18),e._v(" "),e._m(19),e._v(" "),r("p",[r("img",{attrs:{src:i(411),alt:"OSGi Services"}}),r("br"),e._v("\nFig.3 OSGi Services (Source: "),r("a",{attrs:{href:"https://www.osgi.org/wp-content/uploads/services.png",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.osgi.org/wp-content/uploads/services.png"),r("OutboundLink")],1),e._v(")")]),e._v(" "),r("p",[e._v("If you are keen to know how that works in code, read on in "),r("router-link",{attrs:{to:"./osgids.html"}},[e._v("OSGi Declarative Services")]),e._v(".")],1),e._v(" "),r("p",[e._v("Some important core services are presented below.")]),e._v(" "),e._m(20),e._v(" "),e._m(21),e._v(" "),r("ul",[r("li",[r("router-link",{attrs:{to:"./configadmin.html"}},[e._v("OSGi Configuration Admin")])],1)]),e._v(" "),e._m(22),e._v(" "),r("p",[e._v("In a dynamic environment like OSGi, communication with events has a wide variety of use cases.\nOSGi events are based on the publish-subscribe messaging pattern.")]),e._v(" "),e._m(23),e._v(" "),r("ul",[r("li",[r("router-link",{attrs:{to:"./eventadmin.html"}},[e._v("OSGi Event Admin")])],1)]),e._v(" "),e._m(24),e._v(" "),r("p",[e._v("We have talked so far about the OSGi specification. Here is the place to emphasize that the different containers might implement different parts of the OSGi specifications.")]),e._v(" "),r("p",[e._v("We will list the most popular OSGi containers with a short description of their goals. We can divide them into:")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("Open source:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.eclipse.org/equinox/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Equinox"),r("OutboundLink")],1),e._v(" - this is the reference implementation of OSGi and developed by the Eclipse Foundation.\nAs it is used in the openHAB project, we have "),r("router-link",{attrs:{to:"./equinox.html"}},[e._v("more detailed information")]),e._v(".")],1),e._v(" "),r("li",[r("a",{attrs:{href:"http://felix.apache.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Apache Felix"),r("OutboundLink")],1),e._v(" - developed by the Apache Software Foundation.\n"),r("a",{attrs:{href:"http://karaf.apache.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Apache Karaf"),r("OutboundLink")],1),e._v(" is a distribution based on Apache Felix that provides some additional features on top of it (e.g. folder based hot deployment, improved default console with remote SSH, maven plugins and others). The openHAB project is using karaf for runtime dependency installation.")]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.eclipse.org/concierge/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Concierge"),r("OutboundLink")],1),e._v(" - is aimed at mobile and embedded devices. With a size of around 250 kb it has the smallest footprint of the presented containers;")])])]),e._v(" "),r("li",[r("p",[e._v("Commercial:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.bosch-si.com/iot-platform/iot-platform/gateway/software.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Bosch IoT Gateway Software"),r("OutboundLink")],1),e._v(" - implements OSGi R6 Core and Compendium Specification. This implementation is low-footprint, optimized for embedded products, provides custom remote management agent and many more additional components.")])])])]),e._v(" "),e._m(25),e._v(" "),r("p",[r("strong",[e._v("bundle")]),e._v(" - a unit of modularization, defined by the OSGi framework. A bundle is comprised of Java classes and other resources, which together can provide functions to end users. For more detailed definition - "),r("a",{attrs:{href:"https://osgi.org/download/r7/osgi.core-7.0.0.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("OSGi Core Release 7, Chapter 3.2: Bundles"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("strong",[e._v("service")]),e._v(" - any object that is registered in the OSGi Service Registry and can be looked up using its interface name(s). Definition - "),r("a",{attrs:{href:"https://osgi.org/download/r7/osgi.core-7.0.0.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("OSGi Core Release 7, Chapter 5.2: Services"),r("OutboundLink")],1)]),e._v(" "),e._m(26),e._v(" "),e._m(27),e._v(" "),e._m(28),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://osgi.org/download/r7/osgi.core-7.0.0.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("OSGi Core Release 7"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://osgi.org/javadoc/osgi.core/7.0.0/",target:"_blank",rel:"noopener noreferrer"}},[e._v("OSGi API"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"http://www.vogella.com/tutorials/OSGi/article.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("OSGi Vogella guide"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://developer.atlassian.com/docs/atlassian-platform-common-components/plugin-framework/behind-the-scenes-in-the-plugin-framework/lifecycle-of-a-bundle",target:"_blank",rel:"noopener noreferrer"}},[e._v("Lifecycle of a bundle"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"http://enroute.osgi.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("OSGi enRoute"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.osgi.org/developer/where-to-start/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.osgi.org/developer/where-to-start/"),r("OutboundLink")],1)])]),e._v(" "),r("DocPreviousVersions"),e._v(" "),r("EditPageLink")],1)},r,!1,null,null,null);t.default=a.exports}}]);