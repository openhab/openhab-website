(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{413:function(t,e,n){t.exports=n.p+"assets/img/immediatecomponent.a85f255c.png"},414:function(t,e,n){t.exports=n.p+"assets/img/delayedcomponent.886839aa.png"},501:function(t,e,n){"use strict";n.r(e);var s=n(0),a=Object(s.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("p",[t._v("In the "),s("router-link",{attrs:{to:"./osgi.html"}},[t._v("OSGi Overview article")]),t._v(" we have mentioned that a bundle can register, unregister, get and unget services from a central point - the Service Registry.")],1),t._v(" "),s("p",[t._v("In order to simplify the usage of services the "),s("a",{attrs:{href:"https://www.osgi.org/about-us/",target:"_blank",rel:"noopener noreferrer"}},[t._v("OSGi Alliance"),s("OutboundLink")],1),t._v(" has developed a model of managing services dynamically called "),s("em",[t._v("Declarative Services")]),t._v(".")]),t._v(" "),s("p"),t._m(1),s("p"),t._v(" "),t._m(2),t._v(" "),s("p",[t._v("In order to understand this model, we will have to first explain a few terms, used below:")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),s("p",[t._v("In order to use the Declarative Services functionality you have to start a bundle with an implementation of the DS container.\nIn "),s("a",{attrs:{href:"http://www.eclipse.org/equinox/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Equinox"),s("OutboundLink")],1),t._v(" (the reference implementation of OSGi that is used in openHAB) this bundle is called "),s("code",[t._v("org.eclipse.equinox.ds")]),t._v(".")]),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),s("p",[t._v("A component requires the following artifacts in a bundle:")]),t._v(" "),t._m(8),t._v(" "),s("p",[t._v("Because we do not write the XML files or the manifest ourselves, we will concentrate on the Java annotations in the examples below.\nA component may use different strategies to access the bound services: "),s("em",[t._v("Constructor injection")]),t._v(", "),s("em",[t._v("Field injection")]),t._v(" or "),s("em",[t._v("Method injection")]),t._v(" (see "),s("a",{attrs:{href:"https://osgi.org/download/r7/osgi.cmpn-7.0.0.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("OSGi Compendium Release 7, Chapter 112.3: References to Services"),s("OutboundLink")],1),t._v(").")]),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),s("p",[t._v("Bound services and activation objects can be parameters to the constructor.")]),t._v(" "),t._m(12),t._m(13),t._v(" "),t._m(14),s("p",[t._v("Let's take a look at some configuration parameters, that we can apply:")]),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),s("p",[t._v("If you want to react when a service got resolved, you may use annotated methods instead of fields like in the example below.")]),t._v(" "),s("p",[t._v("The annotated "),s("code",[t._v("activate()")]),t._v(" and "),s("code",[t._v("deactivate()")]),t._v(" methods are called from DS, when the component configuration is activated and deactivated (more about "),s("router-link",{attrs:{to:"./osgids.html#activation"}},[t._v("activation")]),t._v("):")],1),t._v(" "),t._m(17),t._m(18),t._v(" "),s("p",[t._v("Very often you will have to register a service, that implements an interface defined in the framework (e.g "),s("a",{attrs:{href:"https://osgi.org/javadoc/osgi.cmpn/7.0.0/org/osgi/service/event/EventHandler.html",target:"_blank",rel:"noopener noreferrer"}},[s("em",[t._v("EventHandler")]),s("OutboundLink")],1),t._v(") or interface, that you have defined.\nAn interface allows you to change the implementation easily or register multiple implementations in the Service Registry.")]),t._v(" "),s("p",[t._v("We will use DS to register an implementation of the EventHandler service in the OSGi Service Registry.")]),t._v(" "),t._m(19),t._m(20),t._v(" "),t._m(21),t._v(" "),s("p",[t._v("A component lifecycle depends of the type of the component.\nThree type of components are defined:")]),t._v(" "),t._m(22),t._v(" "),s("p",[t._v("You can find more information in the "),s("a",{attrs:{href:"https://osgi.org/download/r7/osgi.cmpn-7.0.0.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("OSGi Compendium Release 7, Chapter 112.2: Components"),s("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(23),t._v(" "),s("p",[t._v("A component goes through several states in his lifecycle:")]),t._v(" "),t._m(24),t._v(" "),s("img",{attrs:{src:n(413),width:"320",height:"200"}}),t._v("  \nFig.1 Immediate component lifecycle\n"),s("img",{attrs:{src:n(414),width:"400",height:"200"}}),t._v("  \nFig.2 Delayed component lifecycle \n"),t._m(25),t._v(" "),s("p",[t._v("Like described above, the component lifecycle depends on the lifecycle of the bundle, that includes the component.\nComponent must be enabled before it can be used.")]),t._v(" "),t._m(26),t._v(" "),s("p",[t._v("After the Component is enabled, it is moved to the UNSATISFIED state.\nThe next step is to satisfy the component configuration.")]),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),s("p",[t._v("Activation consists of following steps:")]),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),s("p",[t._v("Deactivation consists of the following actions:")]),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),s("p",[t._v("Find a few tips down below if something has gone wrong.")]),t._v(" "),s("p",[t._v("Mind that most of the tips below are specific to Equinox as the OSGi Runtime.\nYou might review again the "),s("router-link",{attrs:{to:"./equinox.html#iv-commands"}},[t._v("Equinox commands")]),t._v(" before you continue.")],1),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://osgi.org/download/r7/osgi.cmpn-7.0.0.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("OSGi Compendium Release 7"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://www.vogella.com/tutorials/OSGiServices/article.html#declarativeservices",target:"_blank",rel:"noopener noreferrer"}},[t._v("Lars Vogel - Declarative services"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://www.eclipsezone.com/eclipse/forums/t97690.rhtml",target:"_blank",rel:"noopener noreferrer"}},[t._v("Getting Started with OSGi: Declarative Services"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://stackoverflow.com/questions/8886430/what-is-the-difference-between-osgi-components-and-services",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://stackoverflow.com/questions/8886430/what-is-the-difference-between-osgi-components-and-services"),s("OutboundLink")],1)])]),t._v(" "),s("DocPreviousVersions"),t._v(" "),s("EditPageLink")],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"declarative-services"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#declarative-services","aria-hidden":"true"}},[this._v("#")]),this._v(" Declarative Services")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#model-terms"}},[t._v("Model & Terms")])]),n("li",[n("a",{attrs:{href:"#ds-container"}},[t._v("DS Container")])]),n("li",[n("a",{attrs:{href:"#components"}},[t._v("Components")]),n("ul",[n("li",[n("a",{attrs:{href:"#example-reference-a-service"}},[t._v("Example - Reference a Service")])]),n("li",[n("a",{attrs:{href:"#constructor-injection"}},[t._v("Constructor Injection")])]),n("li",[n("a",{attrs:{href:"#field-injection"}},[t._v("Field Injection")])]),n("li",[n("a",{attrs:{href:"#method-injection"}},[t._v("Method Injection")])]),n("li",[n("a",{attrs:{href:"#example-provide-a-service"}},[t._v("Example - Provide a Service")])])])]),n("li",[n("a",{attrs:{href:"#component-types"}},[t._v("Component types")])]),n("li",[n("a",{attrs:{href:"#component-lifecycle"}},[t._v("Component Lifecycle")]),n("ul",[n("li",[n("a",{attrs:{href:"#states"}},[t._v("States")])]),n("li",[n("a",{attrs:{href:"#activation"}},[t._v("Activation")])]),n("li",[n("a",{attrs:{href:"#deactivation"}},[t._v("Deactivation")])])])]),n("li",[n("a",{attrs:{href:"#troubleshooting"}},[t._v("Troubleshooting")])]),n("li",[n("a",{attrs:{href:"#further-reading"}},[t._v("Further Reading")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"model-terms"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#model-terms","aria-hidden":"true"}},[this._v("#")]),this._v(" Model & Terms")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("strong",[t._v("Declarative Services Container")]),t._v(" (we will use the shorthand "),n("strong",[t._v("DS")]),t._v(") - a module that is managing the "),n("a",{attrs:{href:"#vii-component-lifecycle"}},[t._v("lifecycle")]),t._v(" of a "),n("em",[t._v("service component")]),t._v(" dynamically.\nIt activates and deactivates different components, basing its decisions on the information contained in the "),n("em",[t._v("component description")]),t._v(";")]),t._v(" "),n("li",[n("strong",[t._v("Service Component")]),t._v(" (or also "),n("strong",[t._v("component")]),t._v(") - an object whose lifecycle is managed,\nusually by a component framework such as Declarative Services (DS).\nA component may publish itself as an OSGi service or consume OSGi services.\nA component can refer to a number of services;")]),t._v(" "),n("li",[n("strong",[t._v("Component Description")]),t._v(" - The declaration of a component.\nIt is contained within an XML document in a bundle.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"ds-container"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ds-container","aria-hidden":"true"}},[this._v("#")]),this._v(" DS Container")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("When a bundle that contains a component is added to the framework, DS reads its component description (the XML file that is generated by the Java annotations).\nIf the conditions, described in this file are fulfilled (you will understand more about this in the next chapters), the DS activates the component (more on the that in the "),e("a",{attrs:{href:"#vii-component-lifecycle"}},[this._v("component lifecycle")]),this._v(" chapter).\nMore importantly, after some of the requirements are not met anymore, the DS container deactivates the component.\nThis ensures that service components are managed dynamically.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"components"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#components","aria-hidden":"true"}},[this._v("#")]),this._v(" Components")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("It is important to understand the difference between a "),e("em",[this._v("component")]),this._v(" and a "),e("em",[this._v("service")]),this._v(".\nA component is a normal Java class, that can reference services and provide services.\nWhat makes a component specific is that it is declared in a XML file and is managed completely by DS.\nThat means that DS instantiates the component, calls method on this component and manages the lifecycle of a component.")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("strong",[t._v("XML description")]),t._v(" of the component;")]),t._v(" "),n("li",[n("strong",[t._v("Service-Component manifest header")]),t._v(", which contains the location of the XML description;")]),t._v(" "),n("li",[t._v("An "),n("strong",[t._v("implementation class")]),t._v(" that is specified in the component description.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"example-reference-a-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#example-reference-a-service","aria-hidden":"true"}},[this._v("#")]),this._v(" Example - Reference a Service")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("In this example our component needs the openHAB "),e("code",[this._v("ItemRegistry")]),this._v(" ("),e("code",[this._v("org.openhab.core.items.ItemRegistry")]),this._v(").\nWe will use DS to inject an implementation of this service in our class.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"constructor-injection"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#constructor-injection","aria-hidden":"true"}},[this._v("#")]),this._v(" Constructor Injection")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("service "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyService")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" immediate "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@NonNullByDefault")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyService")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ItemRegistry")]),t._v(" itemRegistry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Activate")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyService")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Reference")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ItemRegistry")]),t._v(" itemRegistry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("itemRegistry "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" itemRegistry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Activate")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("activate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BundleContext")]),t._v(" context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bundle is activated!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Deactivate")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("deactivate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BundleContext")]),t._v(" context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bundle is deactivated!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"field-injection"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#field-injection","aria-hidden":"true"}},[this._v("#")]),this._v(" Field Injection")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("service "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyService")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" immediate "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@NonNullByDefault")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyService")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Reference")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// you can add some configuration parameters to this annotation")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@NonNullByDefault")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ItemRegistry")]),t._v(" itemRegistry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Activate")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("activate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BundleContext")]),t._v(" context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bundle is activated!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Deactivate")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("deactivate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BundleContext")]),t._v(" context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bundle is deactivated!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("strong",[t._v("immediate")]),t._v(":\n"),n("ul",[n("li",[n("em",[t._v("true")]),t._v(" - the component is activated as soon as all dependencies are satisfied. Adding this option will ensure that the component will be activated right after the bundle is activated and the component is satisfied;")]),t._v(" "),n("li",[n("em",[t._v("false")]),t._v(" - the component has lazy activation. The activation of the component is delayed(lazy activation) until the service is requested. This is the default value;")])])]),t._v(" "),n("li",[n("strong",[t._v("cardinality")]),t._v(":\n"),n("ul",[n("li",[n("em",[t._v("1..1")]),t._v(" - single service reference, that is mandatory. If your referenced service gets inactive, DS deactivates your service component as well (default value);")]),t._v(" "),n("li",[n("em",[t._v("0..1")]),t._v(" - single service reference(not mandatory). You have to be aware that you might not have your reference resolved, your component can live with the absence;")]),t._v(" "),n("li",[n("em",[t._v("0..n")]),t._v(" - multiple service references (not mandatory). The referenced service can be implemented multiple times, so they are added to a list in your component implementation;")]),t._v(" "),n("li",[n("em",[t._v("1..n")]),t._v(" = like the above, but mandatory;")])])]),t._v(" "),n("li",[n("strong",[t._v("policy")]),t._v(":\n"),n("ul",[n("li",[n("em",[t._v("static")]),t._v(" - the default policy. Component configuration are deactivated every time, when a reference with static policy becomes unavailable. This causes the activating and deactivating of the component. It can be very expensive, when we have multiple bound services, or when a service is often unregistered and re-registered;")]),t._v(" "),n("li",[n("em",[t._v("dynamic")]),t._v(" - with this policy the component is not deactivated, when a referenced service is changed. It is slightly more complex, as the component implementation has to properly handle changes in the set of bound services.")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"method-injection"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#method-injection","aria-hidden":"true"}},[this._v("#")]),this._v(" Method Injection")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("service "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyService")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" immediate "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@NonNullByDefault")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyService")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@NonNullByDefault")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ItemRegistry")]),t._v(" itemRegistry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Activate")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("activate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BundleContext")]),t._v(" context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bundle is activated!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Deactivate")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("deactivate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BundleContext")]),t._v(" context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bundle is deactivated!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Reference")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItemRegistry")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ItemRegistry")]),t._v(" itemRegistry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// We store a reference to the ItemRegistry !")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("itemRegistry "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" itemRegistry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Log service is available!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("unsetItemRegistry")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ItemRegistry")]),t._v(" itemRegistry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Log service is not available anymore!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// We have to clean up after ourselves, when the reference is not needed anymore !")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("itemRegistry "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"example-provide-a-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#example-provide-a-service","aria-hidden":"true"}},[this._v("#")]),this._v(" Example - Provide a Service")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("service "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyService")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EventHandler")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" immediate "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" property "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"event.topics=some/topic"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@NonNullByDefault")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyService")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EventHandler")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Activate")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("activate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BundleContext")]),t._v(" context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bundle is activated!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Deactivate")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("deactivate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BundleContext")]),t._v(" context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bundle is deactivated!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleEvent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Event")]),t._v(" event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" topic "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTopic")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Received event with topic: "')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" topic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("We are providing some service specific properties as well (the property with name "),e("code",[this._v("event.topics")]),this._v(").\nIn this case we tell tell Event Admin Service in which topics we are interested.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"component-types"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#component-types","aria-hidden":"true"}},[this._v("#")]),this._v(" Component types")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("strong",[t._v("immediate")]),t._v(" - with "),n("code",[t._v("immediate")]),t._v(" attribute set to "),n("code",[t._v("true")]),t._v(" - see the "),n("a",{attrs:{href:"#service-component-description"}},[t._v("example component description")]),t._v(";")]),t._v(" "),n("li",[n("strong",[t._v("delayed")]),t._v(" - with "),n("code",[t._v("immediate")]),t._v(" attribute set to "),n("code",[t._v("false")]),t._v(";")]),t._v(" "),n("li",[n("strong",[t._v("factory")]),t._v(" - we will not discuss the lifecycle of this type in this article.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"component-lifecycle"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#component-lifecycle","aria-hidden":"true"}},[this._v("#")]),this._v(" Component Lifecycle")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("strong",[t._v("UNSATISFIED")]),t._v(" - initial state of the Service Component, after the bundle is started;")]),t._v(" "),n("li",[n("strong",[t._v("REGISTERED")]),t._v(" - temporary state. Only "),n("em",[t._v("delayed")]),t._v(" components go through this state;")]),t._v(" "),n("li",[n("strong",[t._v("ACTIVE")]),t._v(" - the component is active and component instance is created.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"states"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#states","aria-hidden":"true"}},[this._v("#")]),this._v(" States")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("A component is "),n("strong",[t._v("enabled")]),t._v(", when the component's bundle is "),n("strong",[t._v("started")]),t._v(" and "),n("strong",[t._v("disabled")]),t._v(", when the bundle is "),n("strong",[t._v("stopped")]),t._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The component "),e("strong",[this._v("configuration is satisfied")]),this._v(" when:")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("component is "),n("strong",[t._v("enabled")]),t._v(";")]),t._v(" "),n("li",[t._v("all the "),n("strong",[t._v("component references are satisfied")]),t._v(".\nA reference is satisfied when the reference specifies optional cardinality or there is at least one target service for the reference.\nIf the component has lazy initialization (the component is "),n("em",[t._v("delayed")]),t._v("), it is moved to the REGISTERED state and it is waiting to be activated, when the service is requested (see Fig.2).\nOtherwise (the component is "),n("em",[t._v("immediate")]),t._v(") as soon as its dependencies are satisfied, the component is activated (see Fig.1).")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"activation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#activation","aria-hidden":"true"}},[this._v("#")]),this._v(" Activation")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("load the implementation class;")]),t._v(" "),n("li",[t._v("create component instance (constructor is run);")]),t._v(" "),n("li",[t._v("bind "),n("code",[t._v("@Reference")]),t._v("d services")]),t._v(" "),n("li",[t._v("The method that is annotated with "),n("code",[t._v("@Activate")]),t._v(" is called, if present")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("After the activation, the component is in ACTIVE state.\nFrom this state the component can go back to the "),e("em",[this._v("REGISTERED")]),this._v(" state (or to the "),e("em",[this._v("UNSATISFIED")]),this._v(" state), if the component configuration becomes unsatisfied.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"deactivation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deactivation","aria-hidden":"true"}},[this._v("#")]),this._v(" Deactivation")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("The method that is annotated with "),n("code",[t._v("@Deactivate")]),t._v(" is called, if present")]),t._v(" "),n("li",[t._v("All "),n("code",[t._v("@Reference")]),t._v("d services are unbound")]),t._v(" "),n("li",[t._v("Release all references to the component instance.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"troubleshooting"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting","aria-hidden":"true"}},[this._v("#")]),this._v(" Troubleshooting")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v('Start the runtime and check the log.\nDo you see any Errors like "MESSAGE [SCR] Error while trying to bind reference"? Read the error message and proceed accordingly.')]),t._v(" "),n("li",[t._v('Make sure that the bundle that is providing the service is in "ACTIVE" state.\nIf that is not the case, start it manually with the "start id" command, where id is the id of the bundle;')]),t._v(" "),n("li",[t._v('[Equinox only] While the runtime is running type the "services" command and search if your service is registered.\nIn case it is not registered, most probably you have missed some of the steps above 😃;')]),t._v(" "),n("li",[t._v('[Equinox only] While the runtime is running type "ls -c id", where id is the id of the bundle that is providing the service.\nThis will give detailed information about the services that are registered by this bundle, read the information if the component is satisfied carefully;')]),t._v(" "),n("li",[t._v('Is your service in use?\nIn case it is not and you are not seeing it registered, the component might have lazy activation policy\n(this is the default policy).\nAdd "immediate=true" in your Component Definition if you like to change the activation policy.')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"further-reading"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#further-reading","aria-hidden":"true"}},[this._v("#")]),this._v(" Further Reading")])}],!1,null,null,null);e.default=a.exports}}]);