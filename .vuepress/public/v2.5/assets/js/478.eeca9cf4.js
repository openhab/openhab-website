(window.webpackJsonp=window.webpackJsonp||[]).push([[478],{508:function(e,t,a){"use strict";a.r(t);var s=a(0),n=Object(s.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[e._m(0),e._v(" "),a("p",[e._v("The Scale Transformation Service is an easy to handle tool that can help you with the discretization of number inputs.\nIt transforms a given input by matching it to specified ranges.\nThe input string must be in numerical format.")]),e._v(" "),e._m(1),e._v(" "),a("p",[e._v("Range expressions always contain two parts.\nThe range to scale on, which is located left from the equality sign and the corresponding output string on the right of it.\nA range consists of two bounds. Both are optional, the range is then open. Both bounds can be inclusive or exclusive.")]),e._v(" "),e._m(2),e._v(" "),a("p",[e._v("These expressions are evaluated from top to bottom.\nThe first range that includes the value is selected.")]),e._v(" "),e._m(3),e._v(" "),a("p",[e._v("Some special entries can be used in the scale file.")]),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),a("p",[e._v("This entry will match all numeric values not met by a previous range. Obviously, this one should be put at the very end of the scale definition file.")]),e._v(" "),e._m(6),e._v(" "),a("p",[e._v("Scale transform is designed to work with numeric or quantity states. When the value presented to scale transform does not match this (most of the time with NULL or UNDEF states) it will not be handled and a warning is raised in the openhab.log . This case can be smoothly avoided with a")]),e._v(" "),e._m(7),e._v(" "),e._m(8),e._v(" "),a("p",[e._v("At last, Scale transform can take care of formatting an output with this entry :")]),e._v(" "),e._m(9),e._v(" "),a("p",[e._v("Where :")]),e._v(" "),e._m(10),e._v(" "),e._m(11),e._v(" "),a("p",[e._v("The following example shows how to break down numeric UV values into fixed UV index categories.\nWe have an example UV sensor that sends numeric values from "),a("code",[e._v("0")]),e._v(" to "),a("code",[e._v("100")]),e._v(", which we then want to scale into the "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Ultraviolet_index",target:"_blank",rel:"noopener noreferrer"}},[e._v("UV Index"),a("OutboundLink")],1),e._v(" range.")]),e._v(" "),a("p",[e._v("Example item:")]),e._v(" "),e._m(12),e._m(13),e._v(" "),e._m(14),e._m(15),e._v(" "),e._m(16),e._v(" "),e._m(17),e._v(" "),e._m(18),e._v(" "),e._m(19),e._m(20),e._v(" "),a("p",[e._v("Please note: This profile is a one-way transformation, i.e. only values from a device towards the item are changed, the other direction is left untouched.")]),e._v(" "),a("DocPreviousVersions"),e._v(" "),a("EditPageLink")],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"scale-transformation-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#scale-transformation-service","aria-hidden":"true"}},[this._v("#")]),this._v(" Scale Transformation Service")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The file is expected to exist in the "),t("code",[this._v("transform")]),this._v(" configuration directory and its ending has to be "),t("code",[this._v(".scale")]),this._v(".\nIt should follow the format given in the table below.")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("table",[a("thead",[a("tr",[a("th",[e._v("Scale Expression")]),e._v(" "),a("th",[e._v("Returns XYZ when the given value is")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[a("code",[e._v("[12..23]=XYZ")])]),e._v(" "),a("td",[a("code",[e._v("between (or equal to) 12 and 23")])])]),e._v(" "),a("tr",[a("td",[a("code",[e._v("]12..23[=XYZ")])]),e._v(" "),a("td",[a("code",[e._v("between 12 and 23 (12 and 23 are excluded in this case.)")])])]),e._v(" "),a("tr",[a("td",[a("code",[e._v("[..23]=XYZ")])]),e._v(" "),a("td",[a("code",[e._v("lower than or equal to 23")])])]),e._v(" "),a("tr",[a("td",[a("code",[e._v("]12..]=XYZ")])]),e._v(" "),a("td",[a("code",[e._v("greater than 12")])])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"special-entries"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#special-entries","aria-hidden":"true"}},[this._v("#")]),this._v(" Special entries")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"catchall-entry"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#catchall-entry","aria-hidden":"true"}},[this._v("#")]),this._v(" Catchall Entry")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("[..]=Catchall")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"not-a-number"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#not-a-number","aria-hidden":"true"}},[this._v("#")]),this._v(" Not A Number")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("NaN=Non Numeric State presented")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"formatting-output"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#formatting-output","aria-hidden":"true"}},[this._v("#")]),this._v(" Formatting output")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("format=%label% (%value%) !")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("code",[this._v("%label%")]),this._v(" will be replaced by transformed value and")]),this._v(" "),t("li",[t("code",[this._v("%value%")]),this._v(" is the numeric value presen")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"example"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#example","aria-hidden":"true"}},[this._v("#")]),this._v(" Example")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-dsl"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[this._v("Number")]),this._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[this._v("Uv_Sensor_Level")]),this._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[this._v('"UV Level [SCALE(uvindex.scale):%s]"')]),this._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Referenced scale file "),t("code",[this._v("uvindex.scale")]),this._v(" in the "),t("code",[this._v("transform")]),this._v(" folder:")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v(".3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v(".6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v(".8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("3")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v(".10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("4")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v(".100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("5")]),e._v("\n")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("Each value the item receives, will be categorized to one of the five given ranges.\nValues "),a("strong",[e._v("lower than or equal to 3")]),e._v(" are matched with "),a("code",[e._v("[..3]=1")]),e._v(".\nGreater values are catched in ranges with 2 values as criteria.\nThe only condition here is that the received value has to be lower or equal than "),a("code",[e._v("100")]),e._v(" in our example, since we haven't defined other cases yet.\nIf "),a("strong",[e._v("none")]),e._v(" of the configured conditions matches the given value, the response will be empty.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Please note that all ranges for values above "),t("strong",[this._v("3")]),this._v(" are opened with a "),t("code",[this._v("]")]),this._v(".\nSo the border values (3, 6, 8 and 10) are always transformed to the lower range, since the "),t("code",[this._v("]")]),this._v(" excludes the given critera.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"usage-as-a-profile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usage-as-a-profile","aria-hidden":"true"}},[this._v("#")]),this._v(" Usage as a Profile")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("The functionality of this "),a("code",[e._v("TransformationService")]),e._v(" can be used in a "),a("code",[e._v("Profile")]),e._v(" on an "),a("code",[e._v("ItemChannelLink")]),e._v(" too.\nTo do so, it can be configured in the "),a("code",[e._v(".items")]),e._v(" file as follows:")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("String")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("itemName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" channel"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"<channelUID>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("profile"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"transform:SCALE"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" function"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"<filename>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" sourceFormat"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"<valueFormat>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("The filename (within the "),a("code",[e._v("transform")]),e._v(" folder) of the scale file has to be set in the "),a("code",[e._v("function")]),e._v(" parameter.\nThe parameter "),a("code",[e._v("sourceFormat")]),e._v(" is optional and can be used to format the input value "),a("strong",[e._v("before")]),e._v(" the transformation, i.e. "),a("code",[e._v("%.3f")]),e._v(".\nIf omitted the default is "),a("code",[e._v("%s")]),e._v(", so the input value will be put into the transformation without any format changes.")])}],!1,null,null,null);t.default=n.exports}}]);