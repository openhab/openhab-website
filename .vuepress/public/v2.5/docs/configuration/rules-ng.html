<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Next-Gen Rules | openHAB</title>
    <meta name="description" content="openHAB - a vendor and technology agnostic open source automation software for your home">
    <link rel="stylesheet" href="/v2.5/fonts/fonts.css">
  <link rel="icon" href="/v2.5/favicon.ico">
  <link rel="shortcut icon" href="/v2.5/favicon.ico">
  <link rel="apple-touch-icon" href="/v2.5/apple-icon.png">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://www.openhab.org/og-image.png">
    <meta property="og:title" content="Next-Gen Rules"><meta property="og:description" content="a vendor and technology agnostic open source automation software for your home">
    <link rel="preload" href="/v2.5/assets/css/0.styles.17119d73.css" as="style"><link rel="preload" href="/v2.5/assets/js/app.6e1f6232.js" as="script"><link rel="preload" href="/v2.5/assets/js/42.b739592f.js" as="script"><link rel="preload" href="/v2.5/assets/js/32.7c8f01a5.js" as="script"><link rel="preload" href="/v2.5/assets/js/33.df59480d.js" as="script">
    <link rel="stylesheet" href="/v2.5/assets/css/0.styles.17119d73.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/v2.5/" class="home-link router-link-active"><img src="/v2.5/openhab-logo.png" alt="openHAB" class="logo"> <span class="site-name can-hide">openHAB</span></a> <div class="links" style="max-width:nullpx;"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/v2.5/blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/v2.5/download/" class="nav-link">Download</a></div><div class="nav-item"><a href="/v2.5/docs/" class="nav-link router-link-active">Documentation</a></div><div class="nav-item"><a href="/v2.5/addons/" class="nav-link">Add-ons</a></div><div class="nav-item"><a href="/v2.5/community/" class="nav-link">Community</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">About</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Get Involved</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.5/about/who-we-are.html" class="nav-link">Who We Are</a></li><li class="dropdown-subitem"><a href="/v2.5/about/contributing.html" class="nav-link">Contribute</a></li><li class="dropdown-subitem"><a href="/v2.5/about/events.html" class="nav-link">Events</a></li></ul></li><li class="dropdown-item"><h4>Support openHAB</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://openhabfoundation.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Foundation
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="/v2.5/about/donate.html" class="nav-link">Donate</a></li></ul></li><li class="dropdown-item"><h4>Resources</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.5/about/showcase.html" class="nav-link">Showcase/How-tos</a></li><li class="dropdown-subitem"><a href="/v2.5/privacy.html" class="nav-link">Privacy Policy</a></li><li class="dropdown-subitem"><a href="https://www.myopenhab.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  myopenHAB
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/openhab" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/v2.5/blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/v2.5/download/" class="nav-link">Download</a></div><div class="nav-item"><a href="/v2.5/docs/" class="nav-link router-link-active">Documentation</a></div><div class="nav-item"><a href="/v2.5/addons/" class="nav-link">Add-ons</a></div><div class="nav-item"><a href="/v2.5/community/" class="nav-link">Community</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">About</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Get Involved</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.5/about/who-we-are.html" class="nav-link">Who We Are</a></li><li class="dropdown-subitem"><a href="/v2.5/about/contributing.html" class="nav-link">Contribute</a></li><li class="dropdown-subitem"><a href="/v2.5/about/events.html" class="nav-link">Events</a></li></ul></li><li class="dropdown-item"><h4>Support openHAB</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://openhabfoundation.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Foundation
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="/v2.5/about/donate.html" class="nav-link">Donate</a></li></ul></li><li class="dropdown-item"><h4>Resources</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.5/about/showcase.html" class="nav-link">Showcase/How-tos</a></li><li class="dropdown-subitem"><a href="/v2.5/privacy.html" class="nav-link">Privacy Policy</a></li><li class="dropdown-subitem"><a href="https://www.myopenhab.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  myopenHAB
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/openhab" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Welcome to openHAB</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.5/docs/" class="sidebar-link">Introduction</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Concepts</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.5/docs/concepts/" class="sidebar-link">Concepts Overview</a></li><li><a href="/v2.5/docs/concepts/things.html" class="sidebar-link">Things</a></li><li><a href="/v2.5/docs/concepts/items.html" class="sidebar-link">Items</a></li><li><a href="/v2.5/docs/concepts/discovery.html" class="sidebar-link">Thing Discovery</a></li><li><a href="/v2.5/docs/concepts/audio.html" class="sidebar-link">Audio &amp; Voice</a></li><li><a href="/v2.5/docs/concepts/units-of-measurement.html" class="sidebar-link">Units Of Measurement</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Installation Guide</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.5/docs/installation/" class="sidebar-link">Installation Overview</a></li><li><a href="/v2.5/docs/installation/linux.html" class="sidebar-link">Linux</a></li><li><a href="/v2.5/docs/installation/windows.html" class="sidebar-link">Windows</a></li><li><a href="/v2.5/docs/installation/macos.html" class="sidebar-link">macOS</a></li><li><a href="/v2.5/docs/installation/openhabian.html" class="sidebar-link">openHABian</a></li><li><a href="/v2.5/docs/installation/rasppi.html" class="sidebar-link">Raspberry Pi</a></li><li><a href="/v2.5/docs/installation/pine.html" class="sidebar-link">PINE A64</a></li><li><a href="/v2.5/docs/installation/docker.html" class="sidebar-link">Docker</a></li><li><a href="/v2.5/docs/installation/synology.html" class="sidebar-link">Synology DiskStation</a></li><li><a href="/v2.5/docs/installation/qnap.html" class="sidebar-link">QNAP NAS</a></li><li><a href="/v2.5/docs/installation/security.html" class="sidebar-link">Security</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>New User Tutorial</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.5/docs/tutorial/" class="sidebar-link">Tutorial Overview</a></li><li><a href="/v2.5/docs/tutorial/1sttimesetup.html" class="sidebar-link">First-time setup of openHAB</a></li><li><a href="/v2.5/docs/tutorial/uis.html" class="sidebar-link">openHAB UIs</a></li><li><a href="/v2.5/docs/tutorial/configuration.html" class="sidebar-link">Configuration of openHAB</a></li><li><a href="/v2.5/docs/tutorial/sitemap.html" class="sidebar-link">Creating a sitemap</a></li><li><a href="/v2.5/docs/tutorial/rules.html" class="sidebar-link">Working with rules and scripts</a></li><li><a href="/v2.5/docs/tutorial/logs.html" class="sidebar-link">Looking to the logs</a></li><li><a href="/v2.5/docs/tutorial/persistence.html" class="sidebar-link">Persistence</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Configuration Guide</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.5/docs/configuration/" class="sidebar-link">Configuration Overview</a></li><li><a href="/v2.5/docs/configuration/addons.html" class="sidebar-link">Installation of Add-ons</a></li><li><a href="/v2.5/docs/configuration/things.html" class="sidebar-link">Things</a></li><li><a href="/v2.5/docs/configuration/items.html" class="sidebar-link">Items</a></li><li><a href="/v2.5/docs/configuration/sitemaps.html" class="sidebar-link">Sitemaps</a></li><li><a href="/v2.5/docs/configuration/persistence.html" class="sidebar-link">Persistence</a></li><li><a href="/v2.5/docs/configuration/rules-dsl.html" class="sidebar-link">Rules</a></li><li><a href="/v2.5/docs/configuration/transformations.html" class="sidebar-link">Transformation Services</a></li><li><a href="/v2.5/docs/configuration/actions.html" class="sidebar-link">Actions</a></li><li><a href="/v2.5/docs/configuration/iconsets/classic/" class="sidebar-link">Icons</a></li><li><a href="/v2.5/docs/configuration/jsr223.html" class="sidebar-link">JSR223 Scripting</a></li><li><a href="/v2.5/docs/configuration/services.html" class="sidebar-link">Services</a></li><li><a href="/v2.5/docs/configuration/multimedia.html" class="sidebar-link">Multimedia</a></li><li><a href="/v2.5/docs/configuration/migration/" class="sidebar-link">Migration from 1.x</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Interfaces and Ecosystem</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.5/docs/configuration/packages.html" class="sidebar-link">Initial Setup - Package Selection</a></li><li><a href="/v2.5/docs/configuration/editors.html" class="sidebar-link">Editors</a></li><li><a href="/v2.5/docs/configuration/homebuilder.html" class="sidebar-link">Home Builder</a></li><li><a href="/v2.5/docs/configuration/paperui.html" class="sidebar-link">Paper UI</a></li><li><a href="/v2.5/docs/configuration/ui/habmin/" class="sidebar-link">HABmin</a></li><li><a href="/v2.5/docs/configuration/ui/habot/" class="sidebar-link">HABot</a></li><li><a href="/v2.5/docs/configuration/habpanel.html" class="sidebar-link">HABPanel</a></li><li><a href="/v2.5/docs/configuration/ui/basic/" class="sidebar-link">Basic UI</a></li><li><a href="/v2.5/docs/configuration/ui/classic/" class="sidebar-link">Classic UI</a></li><li><a href="/v2.5/docs/configuration/rules-ng.html" class="active sidebar-link">Next-Gen Rules</a></li><li><a href="/v2.5/docs/configuration/eclipseiotmarket.html" class="sidebar-link">Eclipse IoT Marketplace</a></li><li><a href="/v2.5/docs/configuration/restdocs.html" class="sidebar-link">REST API</a></li><li><a href="/v2.5/docs/apps/android.html" class="sidebar-link">Android App</a></li><li><a href="/v2.5/docs/apps/ios.html" class="sidebar-link">iOS App</a></li><li><a href="/v2.5/docs/apps/windows.html" class="sidebar-link">Windows 10 App</a></li><li><a href="/v2.5/docs/ecosystem/alexa/" class="sidebar-link">Amazon Alexa</a></li><li><a href="/v2.5/docs/ecosystem/google-assistant/" class="sidebar-link">Google Assistant</a></li><li><a href="/v2.5/addons/integrations/homekit/" class="sidebar-link">Apple HomeKit</a></li><li><a href="/v2.5/docs/ecosystem/ifttt/" class="sidebar-link">IFTTT</a></li><li><a href="/v2.5/docs/ecosystem/mycroft/" class="sidebar-link">Mycroft.AI</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Administration Guide</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.5/docs/administration/" class="sidebar-link">Advanced Functionality and Administrative Tasks</a></li><li><a href="/v2.5/docs/administration/console.html" class="sidebar-link">The Console</a></li><li><a href="/v2.5/docs/administration/runtime.html" class="sidebar-link">Runtime Commands</a></li><li><a href="/v2.5/docs/administration/bundles.html" class="sidebar-link">Bundle Management</a></li><li><a href="/v2.5/docs/administration/logging.html" class="sidebar-link">Logging</a></li><li><a href="/v2.5/docs/administration/jsondb.html" class="sidebar-link">JsonDB Storage</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Developer Guide</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.5/docs/developer/" class="sidebar-link">Overview &amp; Introduction </a></li><li><a href="/v2.5/docs/developer/guidelines.html" class="sidebar-link">Coding Guidelines</a></li><li><a href="/v2.5/docs/developer/bindings/" class="sidebar-link">Bindings</a></li><li><a href="/v2.5/docs/developer/module-types/" class="sidebar-link">Automation Modules</a></li><li><a href="/v2.5/docs/developer/transformations/" class="sidebar-link">Transformations / Profiles</a></li><li><a href="/v2.5/docs/developer/ioservices/" class="sidebar-link">IO Services</a></li><li><a href="/v2.5/docs/developer/persistence/" class="sidebar-link">Persistence Service</a></li><li><a href="/v2.5/docs/developer/audio/" class="sidebar-link">Audio &amp; Voice</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Developer Appendix</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/v2.5/docs/developer/buildsystem.html" class="sidebar-link">Build System</a></li><li><a href="/v2.5/docs/developer/osgi/osgi.html" class="sidebar-link">OSGi</a></li><li><a href="/v2.5/docs/developer/utils/tools.html" class="sidebar-link">Framework Tools</a></li><li><a href="/v2.5/docs/developer/utils/i18n.html" class="sidebar-link">Internationalization</a></li><li><a href="/v2.5/docs/developer/utils/events.html" class="sidebar-link">Event Bus</a></li><li><a href="/v2.5/docs/developer/tests.html" class="sidebar-link">Writing tests</a></li><li><a href="/v2.5/docs/developer/contributing.html" class="sidebar-link">Contribution</a></li><li><a href="/v2.5/docs/developer/governance.html" class="sidebar-link">Governance</a></li><li><a href="/v2.5/docs/developer/legacy/compatibilitylayer.html" class="sidebar-link">Compatibility Layer</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="next-generation-rule-engine"><a href="#next-generation-rule-engine" aria-hidden="true" class="header-anchor">#</a> Next-Generation Rule Engine</h1> <p><a href="https://github.com/badges/stability-badges" target="_blank" rel="noopener noreferrer"><img src="https://badges.github.io/stability-badges/dist/experimental.svg" alt="experimental"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Since openHAB 2.4 another Rule Engine has been added. It works fundamentally different than what you find with our current <a href="https://www.openhab.org/docs/configuration/rules-dsl.html" target="_blank" rel="noopener noreferrer">Rules<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. It allows Rules to be edited in a graphical fashion and to interact with <a href="https://www.openhab.org/docs/configuration/jsr223.html" target="_blank" rel="noopener noreferrer">JSR223 Scripts (Javascript, Jypthon, etc)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="installation"><a href="#installation" aria-hidden="true" class="header-anchor">#</a> Installation</h2> <p>Install the rule engine from Add-ons → Misc → Rule Engine (Experimental).</p> <p><img src="/v2.5/assets/img/rules_ng_addons.52eac477.png" alt="rule engine addon"></p> <p>When you now refresh your browser, you will see a <code>Rules</code> menu appearing in the main menu of Paper UI.</p> <p><img src="/v2.5/assets/img/rules_ng_new_rule.a335563b.png" alt="new rule"></p> <h2 id="concept"><a href="#concept" aria-hidden="true" class="header-anchor">#</a> Concept</h2> <p>In general this rule engine aims to support rules defined with syntax similar to:</p> <div class="language-text extra-class"><pre class="language-text"><code>ON item_id state changed IF item_id.state == desired_value THEN item_id2.state = desired_value2 
</code></pre></div><p>A rule consists of basic information like name, tags and a description. The main building blocks of rules are modules however, and each rule consists of one or more instances of each of the following modules:</p> <ul><li><strong>'trigger'</strong> modules specify the events that trigger a rule execution.</li> <li><strong>'condition'</strong> modules act as a filter for rule execution.
Actions of the rule will be executed only if event data satisfies all conditions.
In case there are multiple conditions in the 'if' section then all of them must be satisfied.</li> <li><strong>'action'</strong> modules perform actual operations in openHAB.
If more than one action is specified in a rule they will be executed sequentially.
The output of the previous action can be used as an input for the next action.
An imaginary action can therefore also just be a conversion to make one action output compatible to another actions input.</li></ul> <p>Each module is created from a template called <strong>Module type</strong>.
A module type specifies parameters for the template, like e.g. &quot;eventTopic&quot; for the &quot;GenericEventTrigger&quot; or &quot;operator&quot; for the &quot;GenericCompareCondition&quot;.</p> <p>The automation engine provides some generic module types.
Those can be extended by so called <strong>composite module types</strong>.
Those use predefined configurations and/or modified module input/output objects.</p> <blockquote><p>An example is the module type &quot;ItemStateChangeTrigger&quot; which is based on the GenericEventTrigger but specifies in its configuration that it is triggered only by item's state change events.</p></blockquote> <h3 id="module-types"><a href="#module-types" aria-hidden="true" class="header-anchor">#</a> Module Types</h3> <p>A given <strong>Module type</strong> has the following elements:</p> <pre><code>uid - unique id
label - localizable text
description - localizable text
configDescriptions - list of meta data for the configuration properties
input variables - list of meta data for the supported input objects
output variables - list of meta data for the supported output objects
</code></pre> <p><strong>configDescriptions</strong> has the following metadata defined for each property:</p> <pre><code>name
type - one of the following &quot;text&quot;, &quot;integer&quot;, &quot;decimal&quot;, &quot;boolean&quot;
label - localizable text
description - localizable text
required - boolean flag indicating if this configuration property can be optional and thus it can be ommited in the rule, by default required is false
defaultValue - default value for the configuration property when not specified in the rule
</code></pre> <p><strong>Input property</strong> has the following metadata:</p> <pre><code>name
type - fully qualified name of Java class (&quot;java.lang.Integer&quot;)
label - localizable text
description - localizable text
defaultValue - default value for the configuration property when not specified in the rule
tags - shows how to be considered a given value. For example, as a Temperature
</code></pre> <p><strong>Output property</strong> has the following metadata:</p> <pre><code>name
type - fully qualified name of Java class (&quot;java.lang.Integer&quot;)
label - localizable text
description - localizable text
defaultValue - default value for the configuration property when not specified in the rule
reference - which means the property value can be specified as a reference to configuration parameter or input parameter
tags - shows how a given value should be considered (e.g. as a Temperature)
</code></pre> <p><strong>Supported Types</strong></p> <p>The types supported in the <strong>input/output</strong> objects can be any string and the following validation is performed:</p> <ul><li>if the input type and the output type are equal as string the connection is valid</li> <li>if the input type is &quot;*&quot; and the output type is any the connection is valid</li> <li>if the input type and the output type are strings representing full qualified names which can be loaded and the input type is assignable from output type the connection is valid</li></ul> <p>The types in the <strong>Configuration</strong> object are restricted to the following:</p> <ul><li>TEXT - The data type for a UTF8 text value</li> <li>INTEGER - The data type for a signed integer value in the range of Integer#MIN_VALUE, Integer#MAX_VALUE</li> <li>DECIMAL - The data type for a signed floating point value (IEEE 754) in the range of Float#MIN_VALUE, Float#MAX_VALUE</li> <li>BOOLEAN - The data type for a boolean: true or false</li></ul> <h2 id="defining-rules-via-json"><a href="#defining-rules-via-json" aria-hidden="true" class="header-anchor">#</a> Defining Rules via JSON</h2> <p><strong>JSON schemas for:</strong></p> <ul><li><a href="../../schemas/ModuleTypes_schema.json">module types</a></li> <li><a href="../../schemas/Templates_schema.json">rule templates</a></li> <li><a href="../../schemas/Rules_schema.json">rule instances</a></li></ul> <h3 id="sample-rules"><a href="#sample-rules" aria-hidden="true" class="header-anchor">#</a> Sample Rules</h3> <ul><li><strong>Sample rule instance referencing module types:</strong></li></ul> <div class="language- extra-class"><pre class="language-text"><code>{
        &quot;uid&quot;:&quot;sample.rule1&quot;,
        &quot;name&quot;:&quot;SampleRule&quot;,
        &quot;tags&quot;:[
            &quot;sample&quot;,
            &quot;rule&quot;
        ],
        &quot;description&quot;:&quot;Sample Rule definition.&quot;,
        &quot;triggers&quot;:[
            {
                &quot;id&quot;:&quot;SampleTriggerID&quot;,
                &quot;type&quot;:&quot;SampleTrigger&quot;
            }
        ],
        &quot;conditions&quot;:[
            {
                &quot;id&quot;:&quot;SampleConditionID&quot;,
                &quot;type&quot;:&quot;SampleCondition&quot;,
                &quot;configuration&quot;:{
                    &quot;operator&quot;:&quot;=&quot;,
                    &quot;constraint&quot;:&quot;dtag&quot;
                },
                &quot;inputs&quot;:{
                    &quot;conditionInput&quot;:&quot;SampleTriggerID.triggerOutput&quot;
                }
            }
        ],
        &quot;actions&quot;:[
            {
                &quot;id&quot;:&quot;SampleActionID&quot;,
                &quot;type&quot;:&quot;SampleAction&quot;,
                &quot;configuration&quot;:{
                    &quot;message&quot;:&quot;&gt;&gt;&gt; Hello World!!!&quot;
                }
            }
        ]
}
</code></pre></div><ul><li><strong>Sample module types:</strong></li></ul> <div class="language- extra-class"><pre class="language-dsl"><code><span class="token string">&quot;triggers&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
      <span class="token punctuation">{</span>  
         <span class="token string">&quot;uid&quot;</span><span class="token operator">:</span><span class="token string">&quot;SampleTrigger&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;SampleTrigger label&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;Sample Trigger description.&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;outputs&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
            <span class="token punctuation">{</span>  
               <span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;triggerOutput&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;java.lang.String&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;TriggerOutput label&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;Text from user input or default message.&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;reference&quot;</span><span class="token operator">:</span><span class="token string">&quot;consoleInput&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;defaultValue&quot;</span><span class="token operator">:</span><span class="token string">&quot;dtag&quot;</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>  
         <span class="token string">&quot;uid&quot;</span><span class="token operator">:</span><span class="token string">&quot;CompositeSampleTrigger&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;CompositeTrigger label&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;Composite Trigger description.&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;outputs&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
            <span class="token punctuation">{</span>  
               <span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;compositeTriggerOutput&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;java.lang.String&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;compositeTriggerOutput label&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;Text from user input or default message.&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;reference&quot;</span><span class="token operator">:</span><span class="token string">&quot;compositeChildTrigger1.triggerOutput&quot;</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">]</span><span class="token punctuation">,</span>
         <span class="token string">&quot;children&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
            <span class="token punctuation">{</span>  
               <span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;compositeChildTrigger1&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;SampleTrigger&quot;</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><div class="language- extra-class"><pre class="language-dsl"><code>   <span class="token string">&quot;conditions&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
      <span class="token punctuation">{</span>  
         <span class="token string">&quot;uid&quot;</span><span class="token operator">:</span><span class="token string">&quot;SampleCondition&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;SampleCondition label&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;Sample Condition description&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;configDescriptions&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
            <span class="token punctuation">{</span>  
               <span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;operator&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;TEXT&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;Valid operators are =,&gt;,&lt;,!=&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;required&quot;</span><span class="token operator">:</span><span class="token boolean">true</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>  
               <span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;constraint&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;TEXT&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;Right operand which is compared with the input.&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;required&quot;</span><span class="token operator">:</span><span class="token boolean">true</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">]</span><span class="token punctuation">,</span>
         <span class="token string">&quot;inputs&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
            <span class="token punctuation">{</span>  
               <span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;conditionInput&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;java.lang.String&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;ConditionInput label&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;Left operand which will be evaluated.&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;required&quot;</span><span class="token operator">:</span><span class="token boolean">true</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
</code></pre></div><div class="language- extra-class"><pre class="language-dsl"><code><span class="token string">&quot;actions&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
      <span class="token punctuation">{</span>  
         <span class="token string">&quot;uid&quot;</span><span class="token operator">:</span><span class="token string">&quot;SampleAction&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;SampleAction label&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;Sample Action description.&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;configDescriptions&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
            <span class="token punctuation">{</span>  
               <span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;TEXT&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;message label&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;Defines the message description.&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;defaultValue&quot;</span><span class="token operator">:</span><span class="token string">&quot;Default message&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;required&quot;</span><span class="token operator">:</span><span class="token boolean">false</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>  
         <span class="token string">&quot;uid&quot;</span><span class="token operator">:</span><span class="token string">&quot;CompositeSampleAction&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;CompositeAction label&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;Composite Action description.&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;configDescriptions&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
            <span class="token punctuation">{</span>  
               <span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;compositeMessage&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;TEXT&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;custom message label&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;Defines the custom message description.&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;defaultValue&quot;</span><span class="token operator">:</span><span class="token string">&quot;&gt;&gt;&gt; Default Custom Message&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;required&quot;</span><span class="token operator">:</span><span class="token boolean">false</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">]</span><span class="token punctuation">,</span>
         <span class="token string">&quot;inputs&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
            <span class="token punctuation">{</span>  
               <span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;compositeActionInput&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;java.lang.String&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;ActionInput label&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;Text that will be printed.&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;required&quot;</span><span class="token operator">:</span><span class="token boolean">true</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">]</span><span class="token punctuation">,</span>
         <span class="token string">&quot;children&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>  
            <span class="token punctuation">{</span>  
               <span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;SampleAction1&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;SampleAction&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;configuration&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>  
                  <span class="token string">&quot;message&quot;</span><span class="token operator">:</span><span class="token string">&quot;$compositeMessage&quot;</span>
               <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>  
               <span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;SampleAction2&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;SampleAction&quot;</span><span class="token punctuation">,</span>
               <span class="token string">&quot;configuration&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>  
                  <span class="token string">&quot;message&quot;</span><span class="token operator">:</span><span class="token string">&quot;$compositeActionInput&quot;</span>
               <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="working-with-rules"><a href="#working-with-rules" aria-hidden="true" class="header-anchor">#</a> Working with Rules</h2> <p>There are several ways to add new rules:</p> <ul><li>using <strong>JAVA API</strong> from package: <strong>org.openhab.automation.api</strong>;</li> <li>using <strong>text console commands: smarthome automation</strong>;</li> <li>using <strong>resource bundles</strong> that provide moduletypes, rules and rule templates stored in <strong>.json</strong> files;</li> <li>using <strong>REST API</strong> - see the next chapter bellow.</li></ul> <h2 id="rest-api"><a href="#rest-api" aria-hidden="true" class="header-anchor">#</a> REST API</h2> <ul><li>http://<a href="host:port">host:port</a>/rest/module-types - lists module types.</li> <li>http://<a href="host:port">host:port</a>/rest/templates&quot; - lists rule templates.</li> <li>http://<a href="host:port">host:port</a>/rest/rules - lists rule instances.</li></ul> <h4 id="rest-templates"><a href="#rest-templates" aria-hidden="true" class="header-anchor">#</a> /rest/templates</h4> <ul><li>GET /rest/templates - returns all registered rule templates.</li> <li>GET /rest/templates/{templateUID} - returned response includes only the content of the specified template.</li></ul> <h4 id="rest-module-types"><a href="#rest-module-types" aria-hidden="true" class="header-anchor">#</a> /rest/module-types</h4> <ul><li>GET /rest/module-types - returns all registered module types.</li> <li>optional parameter 'type' with possible values: 'trigger', 'condition' or 'action' - filters the response to include only module definitions of specified type.</li> <li>optional parameter 'tags' - filters the response to include only module types which have specified tags.</li> <li>GET /rest/module-types/{moduleTypeUID} - returned response includes only the content of the specified module type.</li></ul> <h4 id="rest-rules"><a href="#rest-rules" aria-hidden="true" class="header-anchor">#</a> /rest/rules</h4> <ul><li>GET /rest/rules - returns all registered rule instances.</li> <li>POST /rest/rules - adds new rule instance to the rule registry.</li> <li>DELETE /rest/rules/{ruleUID} - deletes the specified rule instance.</li> <li>PUT /rest/rules/{ruleUID} - updates the specified rule instance.</li> <li>PUT /rest/rules/{ruleUID}/enable - enable/disable specified rule instance.</li> <li>PUT /rest/rules/{ruleUID}/runnow - executes actions of specified rule instance.</li> <li>GET /rest/rules/{ruleUID}/config - returns the configuration of the specified rule instance.</li> <li>PUT /rest/rules/{ruleUID}/config - updates the configuration of the specified rule instance.</li> <li>GET /rest/rules/{ruleUID}/triggers - returns the triggers defined for the specified rule instance.</li> <li>GET /rest/rules/{ruleUID}/conditions - returns the conditions defined for the specified rule instance.</li> <li>GET /rest/rules/{ruleUID}/actions - returns the actions defined for the specified rule instance.</li> <li>GET /rest/rules/{ruleUID}/{moduleCategory}/{id} - returns module instance with specified id and category {triggers/conditions/actions} of the specified rule.</li> <li>GET /rest/rules/{ruleUID}/{moduleCategory}/{id}/config - returns the configuration of the specified module instance.</li> <li>GET /rest/rules/{ruleUID}/{moduleCategory}/{id}/config/{param} - returns the value of specified module configuration parameter (media type is text/plain).</li> <li>PUT /rest/rules/{ruleUID}/{moduleCategory}/{id}/config/{param} - updates the value of specified module configuration parameter (media type is text/plain).</li></ul> <h2 id="java-api"><a href="#java-api" aria-hidden="true" class="header-anchor">#</a> JAVA API</h2> <p><code>org.openhab.automation.RuleRegistry</code> - provides main functionality to manage rules in the Rule Engine.
It can add rules, get existing ones and remove them from the Rule Engine.</p> <p><code>org.openhab.automation.type.ModuleTypeRegistry</code> - provides functionality to get module types from the Rule Engine.</p> <p><code>org.openhab.automation.template.TemplateRegistry</code> - provides functionality to get templates from the Rule Engine.</p> <h2 id="text-console-commands"><a href="#text-console-commands" aria-hidden="true" class="header-anchor">#</a> Text console commands</h2> <p><code>automation listModuleTypes [-st] &lt;filter&gt;</code> - lists all Module Types. If filter is present, lists only matching Module Types.</p> <p><code>automation listTemplates [-st] &lt;filter&gt;</code> - lists all Templates. If filter is present, lists only matching Templates.</p> <p><code>automation listRules [-st] &lt;filter&gt;</code>- lists all Rules. If filter is present, lists only matching Rules.</p> <p><code>automation removeModuleTypes [-st] &lt;url&gt;</code> - Removes the Module Types, loaded from the given url.</p> <p><code>automation removeTemplates [-st] &lt;url</code> - Removes the Templates, loaded from the given url.</p> <p><code>automation removeRule [-st] &lt;uid&gt;</code> - Removes the rule, specified by given UID.</p> <p><code>automation removeRules [-st] &lt;filter&gt;</code>- Removes the rules. If filter is present, removes only matching Rules.</p> <p><code>automation importModuleTypes [-p] &lt;parserType&gt; [-st] &lt;url&gt;</code> - Imports Module Types from given url. If parser type missing, &quot;json&quot; parser will be set as default.</p> <p><code>automation importTemplates [-p] &lt;parserType&gt; [-st] &lt;url&gt;</code> - Imports Templates from given url. If parser type missing, &quot;json&quot; parser will be set as default.</p> <p><code>automation importRules [-p] &lt;parserType&gt; [-st] &lt;url&gt;</code> - Imports Rules from given url. If parser type missing, &quot;json&quot; parser will be set as default.</p> <p><code>automation exportModuleTypes [-p] &lt;parserType&gt; [-st] &lt;file&gt;</code> - Exports Module Types in a file. If parser type missing, &quot;json&quot; parser will be set as default.</p> <p><code>automation exportTemplates [-p] &lt;parserType&gt; [-st] &lt;file&gt;</code> - Exports Templates in a file. If parser type missing, &quot;json&quot; parser will be set as default.</p> <p><code>automation exportRules [-p] &lt;parserType&gt; [-st] &lt;file&gt;</code> - Exports Rules in a file. If parser type missing, &quot;json&quot; parser will be set as default.</p> <p><code>automation enableRule [-st] &lt;uid&gt; &lt;enable&gt;</code> - Enables the Rule, specified by given UID.
The use of the 'enable' argument is optional, and will accept a boolean value.
If used, the command will enable (true) or disable (false) the Rule.
If it is not used, the command will return the current status of the Rule.</p> <h2 id="resource-bundles"><a href="#resource-bundles" aria-hidden="true" class="header-anchor">#</a> Resource bundles</h2> <p>Bundles that provide rules in json format should have the following folder structure:</p> <p><code>ESH-INF\automation\moduletypes</code> - folder for .json files with module types;</p> <p><code>ESH-INF\automation\rules</code> - folder for .json files with rule instances;</p> <p><code>ESH-INF\automation\templates</code> - folder for .json files with rule templates.</p> <h2 id="rule-templates"><a href="#rule-templates" aria-hidden="true" class="header-anchor">#</a> Rule Templates</h2> <p>Rule templates can simplify the definition of rules with similar behavior by providing additional configuration properties. Then rule instance definition only refers the rule template and provides the values of the configuration properties.
The rule template is used only once when the rule is imported in the Rule Engine.
After that the reference from the rule instance to the rule template is removed and a given rule may exist even if the rule template is removed or modified.
This will not have any impact on the already imported rules.</p> <ul><li><strong>Sample rule instance referencing rule template:</strong></li></ul> <div class="language- extra-class"><pre class="language-text"><code>  {  
    &quot;uid&quot;: &quot;sample.rulebytemplate&quot;,
    &quot;name&quot;: &quot;RuleByTemplate&quot;,
    &quot;templateUID&quot;: &quot;SampleRuleTemplate&quot;,
    &quot;tags&quot;: [  
      &quot;rule&quot;,
      &quot;template&quot;
    ],
    &quot;configuration&quot;: {  
      &quot;condition_operator&quot;: &quot;!=&quot;,
      &quot;condition_constraint&quot;: &quot;template&quot;
    }
  }
</code></pre></div><ul><li><strong>Sample rule template:</strong></li></ul> <div class="language- extra-class"><pre class="language-text"><code>  {  
    &quot;uid&quot;:&quot;SampleRuleTemplate&quot;,
    &quot;description&quot;:&quot;Sample Rule Template&quot;,
    &quot;tags&quot;:[  
      &quot;sample&quot;,
      &quot;rule&quot;,
      &quot;template&quot;
    ],
    &quot;configDescriptions&quot;:[  
         {
          &quot;name&quot;:&quot;condition_operator&quot;,              
          &quot;type&quot;: &quot;TEXT&quot;,
          &quot;description&quot;: &quot;Valid operators are =,&gt;,&lt;,!=&quot;,
          &quot;required&quot;: true
        },
         {
          &quot;name&quot;:&quot;condition_constraint&quot;,              
          &quot;type&quot;: &quot;TEXT&quot;,
          &quot;description&quot;: &quot;Right operand which is compared with the input.&quot;,
          &quot;required&quot;: true
        }
    ],
    &quot;triggers&quot;: [  
      {  
        &quot;id&quot;: &quot;CompositeSampleTriggerTemplateID&quot;,
        &quot;type&quot;: &quot;CompositeSampleTrigger&quot;,
        &quot;label&quot;: &quot;Sample Trigger&quot;,
        &quot;description&quot;: &quot;This is a sample composite trigger&quot;
      }
    ],
    &quot;conditions&quot;: [
      {
        &quot;id&quot;: &quot;SampleConditionTemplateID&quot;,
        &quot;type&quot;: &quot;SampleCondition&quot;,
        &quot;label&quot;: &quot;Sample Condition&quot;,
        &quot;description&quot;: &quot;This is a sample condition&quot;,
        &quot;configuration&quot;: {
          &quot;operator&quot;: &quot;$condition_operator&quot;,
          &quot;constraint&quot;: &quot;$condition_constraint&quot;
        },
        &quot;inputs&quot;: {
          &quot;conditionInput&quot;: &quot;CompositeSampleTriggerTemplateID.compositeTriggerOutput&quot;
        }
      }
    ],
    &quot;actions&quot;: [
      {  
        &quot;id&quot;: &quot;CompositeActionTemplateID&quot;,
        &quot;type&quot;: &quot;CompositeSampleAction&quot;,
        &quot;label&quot;: &quot;Sample Action&quot;,
        &quot;description&quot;: &quot;This is a sample action&quot;,
        &quot;configuration&quot;: {
          &quot;compositeMessage&quot;: &quot;Hello World!!!&quot;
        },
        &quot;inputs&quot;: {  
          &quot;compositeActionInput&quot;: &quot;CompositeSampleTriggerTemplateID.compositeTriggerOutput&quot;
        }
      }
    ]
  }
</code></pre></div><p>The above example uses two rule configuration properties:
&quot;condition_operator&quot; and &quot;condition_constraint&quot; that update the configuration of the &quot;SampleCondition&quot;.</p> <h2 id="system-module-types"><a href="#system-module-types" aria-hidden="true" class="header-anchor">#</a> System Module Types</h2> <h3 id="genericeventtrigger"><a href="#genericeventtrigger" aria-hidden="true" class="header-anchor">#</a> GenericEventTrigger</h3> <p>GenericEventTrigger has 3 configuration paramters: <code>eventTopic</code>,<code>eventSource</code> and <code>eventTypes</code> and one output: 'event'.</p> <pre><code>  {  
     &quot;uid&quot;:&quot;GenericEventTrigger&quot;,
     &quot;label&quot;:&quot;Basic Event Trigger&quot;,
     &quot;description&quot;:&quot;Triggers Rules on Events&quot;,
     &quot;configDescriptions&quot;:[  
        {  
           &quot;name&quot;:&quot;eventTopic&quot;,
           &quot;type&quot;:&quot;TEXT&quot;,
           &quot;label&quot;:&quot;Topic&quot;,
           &quot;description&quot;:&quot;This is the topic, the trigger will listen to: &gt;&gt;smarthome/*&lt;&lt;&quot;,
           &quot;required&quot;:true,
           &quot;defaultValue&quot;:&quot;smarthome/*&quot;
        },
        {  
           &quot;name&quot;:&quot;eventSource&quot;,
           &quot;type&quot;:&quot;TEXT&quot;,
           &quot;label&quot;:&quot;Source&quot;,
           &quot;description&quot;:&quot;This is the source of the event (eg. item name)&quot;,
           &quot;required&quot;:true,
           &quot;defaultValue&quot;:&quot;&quot;
        },
        {  
           &quot;name&quot;:&quot;eventTypes&quot;,
           &quot;type&quot;:&quot;TEXT&quot;,
           &quot;label&quot;:&quot;Event Type&quot;,
           &quot;description&quot;:&quot;the event type, the trigger should listen to. Multiple types can be specified comma-separated&quot;,
           &quot;required&quot;:true,
           &quot;defaultValue&quot;:&quot;&quot;
        }
     ],
     &quot;outputs&quot;:[  
        {  
           &quot;name&quot;:&quot;event&quot;,
           &quot;type&quot;:&quot;org.openhab.core.events.Event&quot;,
           &quot;label&quot;:&quot;Event&quot;,
           &quot;description&quot;:&quot;The events which was sent.&quot;,
           &quot;reference&quot;:&quot;event&quot;
        }
     ]
  }
</code></pre> <h3 id="genericcomparecondition"><a href="#genericcomparecondition" aria-hidden="true" class="header-anchor">#</a> GenericCompareCondition</h3> <p>This module type is used to compare a value against a configuration property using an operator like <code>&lt;, &gt;, =</code>.
The value to be compared can be specified either as an input or as a configuration property.</p> <pre><code>{
  &quot;uid&quot;:&quot;GenericCompareCondition&quot;,
  &quot;label&quot;:&quot;CompareCondition&quot;,
  &quot;description&quot;:&quot;configurable compare condition&quot;,
  &quot;configDescriptions&quot;:[
    {
      &quot;name&quot;:&quot;inputproperty&quot;,
      &quot;label&quot;:&quot;Input property&quot;,
      &quot;type&quot;:&quot;TEXT&quot;,
      &quot;description&quot;:&quot;property of the input to be compared&quot;,
      &quot;required&quot;:false
    },
    {
      &quot;name&quot;:&quot;right&quot;,
      &quot;type&quot;:&quot;TEXT&quot;,
      &quot;label&quot;:&quot;compare with&quot;,
      &quot;description&quot;:&quot;the value to be compared with the input&quot;,
      &quot;required&quot;:true
    },
    {
      &quot;name&quot;:&quot;operator&quot;,
      &quot;type&quot;:&quot;TEXT&quot;,
      &quot;description&quot;:&quot;the compare operator, allowed are &lt;, &gt;, =&quot;,
      &quot;required&quot;:true,
      &quot;defaultValue&quot;:&quot;=&quot;
    }
  ],
    &quot;inputs&quot;: [
        {
          &quot;name&quot;:&quot;input&quot;,
          &quot;type&quot;: &quot;java.lang.Object&quot;,
          &quot;label&quot;: &quot;input&quot;,
          &quot;description&quot;: &quot;The input which will be compared.&quot;,
          &quot;required&quot;:true
        }
]
}
</code></pre> <h2 id="providing-new-module-types"><a href="#providing-new-module-types" aria-hidden="true" class="header-anchor">#</a> Providing new Module Types</h2> <p>The rule engine is pluggable - any OSGi bundle can provide implementation for triggers, actions and condition module types and their corresponding metatype definition in JSON format.</p> <p>The extension bundle should register the service ModuleHandlerFactory (<code>org.openhab.automation.handler.ModuleHandlerFactory</code>)
and implement the necessary methods for creation of instances of the supported module handlers:</p> <ul><li><code>org.openhab.automation.handler.TriggerHandler</code></li> <li><code>org.openhab.automation.handler.ConditionHandler</code></li> <li><code>org.openhab.automation.handler.ActionHandler</code></li></ul> <h2 id="composite-module-types"><a href="#composite-module-types" aria-hidden="true" class="header-anchor">#</a> Composite module types</h2> <p>Another way to extend the supported module types is by defining composite module types as an extension of the system module types.
The composite module type wraps one or more instances of a system module type and defines new configuration parameters, inputs and outputs.</p> <pre><code>  {  
     &quot;uid&quot;:&quot;ItemStateChangeTrigger&quot;,
     &quot;label&quot;:&quot;Item State Trigger&quot;,
     &quot;description&quot;:&quot;This triggers a rule if an items state changed&quot;,
     &quot;configDescriptions&quot;:[  
        {  
           &quot;name&quot;:&quot;itemName&quot;,
           &quot;type&quot;:&quot;TEXT&quot;,
           &quot;context&quot;:&quot;item&quot;,
           &quot;label&quot;:&quot;item name&quot;,
           &quot;description&quot;:&quot;the name of the item which's state change should be observed&quot;,
           &quot;required&quot;:true
        }
     ],
     &quot;children&quot;:[  
        {  
           &quot;id&quot;:&quot;itemStateChangeTriggerID&quot;,
           &quot;type&quot;:&quot;GenericEventTrigger&quot;,
           &quot;configuration&quot;:{  
              &quot;eventSource&quot;:&quot;$itemName&quot;,
              &quot;eventTopic&quot;:&quot;smarthome/items/*&quot;,
              &quot;eventTypes&quot;:&quot;ItemStateEvent&quot;
           }
        }
     ],
     &quot;outputs&quot;:[  
        {  
           &quot;name&quot;:&quot;event&quot;,
           &quot;type&quot;:&quot;org.openhab.core.events.Event&quot;,
           &quot;description&quot;:&quot;the event of the item state change&quot;,
           &quot;label&quot;:&quot;event&quot;,
           &quot;reference&quot;:&quot;itemStateChangeTriggerID.event&quot;
        }
     ]
  }
</code></pre> <p>This example demonstrates a new module type <em>ItemStateChangeTrigger</em> which wraps the system module type <em>GenericEventTrigger</em>.
It defines the new configuration property <code>itemName</code> which is used as the <code>eventSource</code> property of the <em>GenericEventTrigger</em>.
The other config parameters <code>eventTopic</code> and <code>eventTypes</code> are staticly defined.
The composite module type can also have inputs and outputs and can use a reference to map them to inputs and outputs of the nested system module type(s).</p> <div class="page-versions"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Version: 2.5</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><a href="https://www.openhab.org/docs/configuration/rules-ng.html">latest</a></li><li class="dropdown-item"><a class="current">2.5</a></li></ul></div></div> <div class="editLink"><em>Caught a mistake or want to contribute to the documentation? <a target="_blank" href="https://github.com/openhab/openhab-docs/edit/master/configuration/rules-ng.md">Edit this page on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></em> <!----></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/v2.5/docs/configuration/ui/classic/" class="prev">
          Classic UI
        </a></span> <span class="next"><a href="/v2.5/docs/configuration/eclipseiotmarket.html">
          Eclipse IoT Marketplace
        </a>
        →
      </span></p></div> <footer><div class="social-icons"><a href="https://twitter.com/openhab" target="_blank"><svg class="social-icon twitter"><path d="M32 7.075c-1.175 0.525-2.444 0.875-3.769 1.031 1.356-0.813 2.394-2.1 2.887-3.631-1.269 0.75-2.675 1.3-4.169 1.594-1.2-1.275-2.906-2.069-4.794-2.069-3.625 0-6.563 2.938-6.563 6.563 0 0.512 0.056 1.012 0.169 1.494-5.456-0.275-10.294-2.888-13.531-6.862-0.563 0.969-0.887 2.1-0.887 3.3 0 2.275 1.156 4.287 2.919 5.463-1.075-0.031-2.087-0.331-2.975-0.819 0 0.025 0 0.056 0 0.081 0 3.181 2.263 5.838 5.269 6.437-0.55 0.15-1.131 0.231-1.731 0.231-0.425 0-0.831-0.044-1.237-0.119 0.838 2.606 3.263 4.506 6.131 4.563-2.25 1.762-5.075 2.813-8.156 2.813-0.531 0-1.050-0.031-1.569-0.094 2.913 1.869 6.362 2.95 10.069 2.95 12.075 0 18.681-10.006 18.681-18.681 0-0.287-0.006-0.569-0.019-0.85 1.281-0.919 2.394-2.075 3.275-3.394z"></path></svg></a> <a href="https://github.com/openhab" target="_blank"><svg class="social-icon github"><path d="M10.369 24.837c0 0.125-0.144 0.225-0.325 0.225-0.206 0.019-0.35-0.081-0.35-0.225 0-0.125 0.144-0.225 0.325-0.225 0.188-0.019 0.35 0.081 0.35 0.225zM8.425 24.556c-0.044 0.125 0.081 0.269 0.269 0.306 0.162 0.063 0.35 0 0.387-0.125s-0.081-0.269-0.269-0.325c-0.162-0.044-0.344 0.019-0.387 0.144zM11.188 24.45c-0.181 0.044-0.306 0.163-0.287 0.306 0.019 0.125 0.181 0.206 0.369 0.163 0.181-0.044 0.306-0.163 0.287-0.288-0.019-0.119-0.188-0.2-0.369-0.181zM15.3 0.5c-8.669 0-15.3 6.581-15.3 15.25 0 6.931 4.362 12.863 10.594 14.95 0.8 0.144 1.081-0.35 1.081-0.756 0-0.387-0.019-2.525-0.019-3.837 0 0-4.375 0.938-5.294-1.863 0 0-0.713-1.819-1.737-2.288 0 0-1.431-0.981 0.1-0.962 0 0 1.556 0.125 2.412 1.613 1.369 2.413 3.662 1.719 4.556 1.306 0.144-1 0.55-1.694 1-2.106-3.494-0.387-7.019-0.894-7.019-6.906 0-1.719 0.475-2.581 1.475-3.681-0.162-0.406-0.694-2.081 0.162-4.244 1.306-0.406 4.313 1.688 4.313 1.688 1.25-0.35 2.594-0.531 3.925-0.531s2.675 0.181 3.925 0.531c0 0 3.006-2.1 4.313-1.688 0.856 2.169 0.325 3.838 0.163 4.244 1 1.106 1.613 1.969 1.613 3.681 0 6.031-3.681 6.512-7.175 6.906 0.575 0.494 1.063 1.431 1.063 2.9 0 2.106-0.019 4.712-0.019 5.225 0 0.406 0.288 0.9 1.081 0.756 6.25-2.075 10.488-8.006 10.488-14.938 0-8.669-7.031-15.25-15.7-15.25zM6.075 22.056c-0.081 0.063-0.063 0.206 0.044 0.325 0.1 0.1 0.244 0.144 0.325 0.063 0.081-0.063 0.063-0.206-0.044-0.325-0.1-0.1-0.244-0.144-0.325-0.063zM5.4 21.55c-0.044 0.081 0.019 0.181 0.144 0.244 0.1 0.063 0.225 0.044 0.269-0.044 0.044-0.081-0.019-0.181-0.144-0.244-0.125-0.038-0.225-0.019-0.269 0.044zM7.425 23.775c-0.1 0.081-0.063 0.269 0.081 0.387 0.144 0.144 0.325 0.163 0.406 0.063 0.081-0.081 0.044-0.269-0.081-0.387-0.138-0.144-0.325-0.163-0.406-0.063zM6.713 22.856c-0.1 0.063-0.1 0.225 0 0.369s0.269 0.206 0.35 0.144c0.1-0.081 0.1-0.244 0-0.387-0.088-0.144-0.25-0.206-0.35-0.125z"></path></svg></a> <a href="https://www.youtube.com/channel/UC7OK88DW0La_BJlcXZg8ydQ" target="_blank"><svg class="social-icon youtube"><path d="M31.681 9.6c0 0-0.313-2.206-1.275-3.175-1.219-1.275-2.581-1.281-3.206-1.356-4.475-0.325-11.194-0.325-11.194-0.325h-0.012c0 0-6.719 0-11.194 0.325-0.625 0.075-1.987 0.081-3.206 1.356-0.963 0.969-1.269 3.175-1.269 3.175s-0.319 2.588-0.319 5.181v2.425c0 2.587 0.319 5.181 0.319 5.181s0.313 2.206 1.269 3.175c1.219 1.275 2.819 1.231 3.531 1.369 2.563 0.244 10.881 0.319 10.881 0.319s6.725-0.012 11.2-0.331c0.625-0.075 1.988-0.081 3.206-1.356 0.962-0.969 1.275-3.175 1.275-3.175s0.319-2.587 0.319-5.181v-2.425c-0.006-2.588-0.325-5.181-0.325-5.181zM12.694 20.15v-8.994l8.644 4.513-8.644 4.481z"></path></svg></a></div> <div class="legal"><span class="copyright">Copyright © 2019 by the openHAB Community and the openHAB Foundation e.V.</span> <br> <span class="legal-links"><a href="/v2.5/privacy.html">Privacy policy</a> |
    <a href="/v2.5/imprint.html">Imprint</a></span></div> <img src="/openhab-logo-square.png" class="footer-logo"></footer></div> <!----></div></div>
    <script src="/v2.5/assets/js/app.6e1f6232.js" defer></script><script src="/v2.5/assets/js/42.b739592f.js" defer></script><script src="/v2.5/assets/js/32.7c8f01a5.js" defer></script><script src="/v2.5/assets/js/33.df59480d.js" defer></script>
  </body>
</html>
