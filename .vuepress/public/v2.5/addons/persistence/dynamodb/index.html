<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Amazon DynamoDB - Persistence Services | openHAB</title>
    <meta name="description" content="This service allows you to persist state updates using the [Amazon DynamoDB](https://aws.amazon.com/dynamodb/) database. Query functionality is also fully supported.">
    <link rel="stylesheet" href="/v2.5/fonts/fonts.css">
  <link rel="icon" href="/v2.5/favicon.ico">
  <link rel="shortcut icon" href="/v2.5/favicon.ico">
  <link rel="apple-touch-icon" href="/v2.5/apple-icon.png">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://www.openhab.org/og-image.png">
    <meta property="og:title" content="Amazon DynamoDB - Persistence Services"><meta property="og:description" content="This service allows you to persist state updates using the Amazon DynamoDB database. Query functionality is also fully supported.">
    <link rel="preload" href="/v2.5/assets/css/0.styles.17119d73.css" as="style"><link rel="preload" href="/v2.5/assets/js/app.6e1f6232.js" as="script"><link rel="preload" href="/v2.5/assets/js/459.b8e37805.js" as="script"><link rel="preload" href="/v2.5/assets/js/35.2b2f6c8f.js" as="script"><link rel="preload" href="/v2.5/assets/js/32.7c8f01a5.js" as="script"><link rel="preload" href="/v2.5/assets/js/33.df59480d.js" as="script">
    <link rel="stylesheet" href="/v2.5/assets/css/0.styles.17119d73.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/v2.5/" class="home-link router-link-active"><img src="/v2.5/openhab-logo.png" alt="openHAB" class="logo"> <span class="site-name can-hide">openHAB</span></a> <div class="links" style="max-width:nullpx;"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/v2.5/blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/v2.5/download/" class="nav-link">Download</a></div><div class="nav-item"><a href="/v2.5/docs/" class="nav-link">Documentation</a></div><div class="nav-item"><a href="/v2.5/addons/" class="nav-link router-link-active">Add-ons</a></div><div class="nav-item"><a href="/v2.5/community/" class="nav-link">Community</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">About</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Get Involved</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.5/about/who-we-are.html" class="nav-link">Who We Are</a></li><li class="dropdown-subitem"><a href="/v2.5/about/contributing.html" class="nav-link">Contribute</a></li><li class="dropdown-subitem"><a href="/v2.5/about/events.html" class="nav-link">Events</a></li></ul></li><li class="dropdown-item"><h4>Support openHAB</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://openhabfoundation.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Foundation
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="/v2.5/about/donate.html" class="nav-link">Donate</a></li></ul></li><li class="dropdown-item"><h4>Resources</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.5/about/showcase.html" class="nav-link">Showcase/How-tos</a></li><li class="dropdown-subitem"><a href="/v2.5/privacy.html" class="nav-link">Privacy Policy</a></li><li class="dropdown-subitem"><a href="https://www.myopenhab.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  myopenHAB
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/openhab" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/v2.5/blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/v2.5/download/" class="nav-link">Download</a></div><div class="nav-item"><a href="/v2.5/docs/" class="nav-link">Documentation</a></div><div class="nav-item"><a href="/v2.5/addons/" class="nav-link router-link-active">Add-ons</a></div><div class="nav-item"><a href="/v2.5/community/" class="nav-link">Community</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">About</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Get Involved</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.5/about/who-we-are.html" class="nav-link">Who We Are</a></li><li class="dropdown-subitem"><a href="/v2.5/about/contributing.html" class="nav-link">Contribute</a></li><li class="dropdown-subitem"><a href="/v2.5/about/events.html" class="nav-link">Events</a></li></ul></li><li class="dropdown-item"><h4>Support openHAB</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://openhabfoundation.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Foundation
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="/v2.5/about/donate.html" class="nav-link">Donate</a></li></ul></li><li class="dropdown-item"><h4>Resources</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.5/about/showcase.html" class="nav-link">Showcase/How-tos</a></li><li class="dropdown-subitem"><a href="/v2.5/privacy.html" class="nav-link">Privacy Policy</a></li><li class="dropdown-subitem"><a href="https://www.myopenhab.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  myopenHAB
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/openhab" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Bindings</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>System Integrations</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Actions</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Data Persistence</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/v2.5/addons/persistence/dynamodb/" class="active sidebar-link">Amazon DynamoDB</a></li><li><a href="/v2.5/addons/persistence/caldav/" class="sidebar-link">CalDAV</a></li><li><a href="/v2.5/addons/persistence/db4o/" class="sidebar-link">db4o</a></li><li><a href="/v2.5/addons/persistence/exec/" class="sidebar-link">Exec</a></li><li><a href="/v2.5/addons/persistence/influxdb/" class="sidebar-link">InfluxDB (0.9 and newer)</a></li><li><a href="/v2.5/addons/persistence/influxdb08/" class="sidebar-link">InfluxDB (up to 0.8.x)</a></li><li><a href="/v2.5/addons/persistence/jpa/" class="sidebar-link">Java Persistence API (JPA)</a></li><li><a href="/v2.5/addons/persistence/jdbc/" class="sidebar-link">JDBC</a></li><li><a href="/v2.5/addons/persistence/mapdb/" class="sidebar-link">mapdb</a></li><li><a href="/v2.5/addons/persistence/mongodb/" class="sidebar-link">MongoDB</a></li><li><a href="/v2.5/addons/persistence/mqtt/" class="sidebar-link">MQTT</a></li><li><a href="/v2.5/addons/persistence/mysql/" class="sidebar-link">MySQL</a></li><li><a href="/v2.5/addons/persistence/rrd4j/" class="sidebar-link">rrd4j</a></li><li><a href="/v2.5/addons/persistence/sitewhere/" class="sidebar-link">SiteWhere</a></li><li><a href="/v2.5/addons/persistence/cosm/" class="sidebar-link">Xively (formerly Cosm)</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Data Transformation</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Voice</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="amazon-dynamodb-persistence"><a href="#amazon-dynamodb-persistence" aria-hidden="true" class="header-anchor">#</a> Amazon DynamoDB Persistence <span class="badge warn top" data-v-099ab69c>v1</span></h1> <p>This service allows you to persist state updates using the <a href="https://aws.amazon.com/dynamodb/" target="_blank" rel="noopener noreferrer">Amazon DynamoDB<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> database. Query functionality is also fully supported.</p> <p>Features:</p> <ul><li>Writing/reading information to relational database systems</li> <li>Configurable database table names</li> <li>Automatic table creation</li></ul> <h2 id="disclaimer"><a href="#disclaimer" aria-hidden="true" class="header-anchor">#</a> Disclaimer</h2> <p>This service is provided &quot;AS IS&quot;, and the user takes full responsibility of any charges or damage to Amazon data.</p> <h2 id="table-of-contents"><a href="#table-of-contents" aria-hidden="true" class="header-anchor">#</a> Table of Contents</h2> <ul><li><a href="#prerequisites">Prerequisites</a> <ul><li><a href="#setting-up-an-amazon-account">Setting Up an Amazon Account</a></li></ul></li> <li><a href="#configuration">Configuration</a> <ul><li><a href="#basic-configuration">Basic configuration</a></li> <li><a href="#configuration-using-credentials-file">Configuration Using Credentials File</a></li> <li><a href="#advanced-configuration">Advanced Configuration</a></li></ul></li> <li><a href="#details">Details</a> <ul><li><a href="#tables-creation">Tables Creation</a></li> <li><a href="#caveats">Caveats</a></li></ul></li> <li><a href="#developer-notes">Developer Notes</a> <ul><li><a href="#updating-amazon-sdk">Updating Amazon SDK</a></li></ul></li></ul> <h2 id="prerequisites"><a href="#prerequisites" aria-hidden="true" class="header-anchor">#</a> Prerequisites</h2> <p>You must first set up an Amazon account as described below.</p> <p>Users are recommended to familiarize themselves with AWS pricing before using this service.  Please note that there might be charges from Amazon when using this service to query/store data to DynamoDB. See <a href="https://aws.amazon.com/dynamodb/pricing/" target="_blank" rel="noopener noreferrer">Amazon DynamoDB pricing pages<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for more details. Please also note possible <a href="https://aws.amazon.com/free/" target="_blank" rel="noopener noreferrer">Free Tier<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> benefits.</p> <h3 id="setting-up-an-amazon-account"><a href="#setting-up-an-amazon-account" aria-hidden="true" class="header-anchor">#</a> Setting Up an Amazon Account</h3> <ul><li><a href="https://aws.amazon.com/" target="_blank" rel="noopener noreferrer">Sign up<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for Amazon AWS.</li> <li>Select the AWS region in the <a href="https://console.aws.amazon.com/" target="_blank" rel="noopener noreferrer">AWS console<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> using <a href="https://docs.aws.amazon.com/awsconsolehelpdocs/latest/gsg/getting-started.html#select-region" target="_blank" rel="noopener noreferrer">these instructions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Note the region identifier in the URL (e.g. <code>https://eu-west-1.console.aws.amazon.com/console/home?region=eu-west-1</code> means that region id is <code>eu-west-1</code>).</li> <li><strong>Create user for openHAB with IAM</strong> <ul><li>Open Services -&gt; IAM -&gt; Users -&gt; Create new Users. Enter <code>openhab</code> to <em>User names</em>, keep <em>Generate an access key for each user</em> checked, and finally click <em>Create</em>.</li> <li><em>Show User Security Credentials</em> and record the keys displayed</li></ul></li> <li><strong>Configure user policy to have access for dynamodb</strong> <ul><li>Open Services -&gt; IAM -&gt; Policies</li> <li>Check <em>AmazonDynamoDBFullAccess</em> and click <em>Policy actions</em> -&gt; <em>Attach</em></li> <li>Check the user created in step 2 and click <em>Attach policy</em></li></ul></li></ul> <h2 id="configuration"><a href="#configuration" aria-hidden="true" class="header-anchor">#</a> Configuration</h2> <p>This service can be configured in the file <code>services/dynamodb.cfg</code>.</p> <h3 id="basic-configuration"><a href="#basic-configuration" aria-hidden="true" class="header-anchor">#</a> Basic configuration</h3> <table><thead><tr><th>Property</th> <th>Default</th> <th style="text-align:center">Required</th> <th>Description</th></tr></thead> <tbody><tr><td>accessKey</td> <td></td> <td style="text-align:center">Yes</td> <td>access key as shown in <a href="#setting-up-amazon-account">Setting up Amazon account</a>.</td></tr> <tr><td>secretKey</td> <td></td> <td style="text-align:center">Yes</td> <td>secret key as shown in <a href="#setting-up-amazon-account">Setting up Amazon account</a>.</td></tr> <tr><td>region</td> <td></td> <td style="text-align:center">Yes</td> <td>AWS region ID as described in <a href="#setting-up-amazon-account">Setting up Amazon account</a>. The region needs to match the region that was used to create the user.</td></tr></tbody></table> <h3 id="configuration-using-credentials-file"><a href="#configuration-using-credentials-file" aria-hidden="true" class="header-anchor">#</a> Configuration Using Credentials File</h3> <p>Alternatively, instead of specifying <code>accessKey</code> and <code>secretKey</code>, one can configure a configuration profile file.</p> <table><thead><tr><th>Property</th> <th>Default</th> <th style="text-align:center">Required</th> <th>Description</th></tr></thead> <tbody><tr><td>profilesConfigFile</td> <td></td> <td style="text-align:center">Yes</td> <td>path to the credentials file.  For example, <code>/etc/openhab2/aws_creds</code>. Please note that the user that runs openHAB must have approriate read rights to the credential file. For more details on the Amazon credential file format, see <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html" target="_blank" rel="noopener noreferrer">Amazon documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</td></tr> <tr><td>profile</td> <td></td> <td style="text-align:center">Yes</td> <td>name of the profile to use</td></tr> <tr><td>region</td> <td></td> <td style="text-align:center">Yes</td> <td>AWS region ID as described in Step 2 in <a href="#setting-up-amazon-account">Setting up Amazon account</a>. The region needs to match the region that was used to create the user.</td></tr></tbody></table> <p>Example of service configuration file (<code>services/dynamodb.cfg</code>):</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token constant">profilesConfigFile</span><span class="token attr-value"><span class="token punctuation">=</span>/etc/openhab2/aws_creds</span>
<span class="token constant">profile</span><span class="token attr-value"><span class="token punctuation">=</span>fooprofile</span>
<span class="token constant">region</span><span class="token attr-value"><span class="token punctuation">=</span>eu-west-1</span>
</code></pre></div><p>Example of credentials file (<code>/etc/openhab2/aws_creds</code>):</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token selector">[fooprofile]</span>
<span class="token constant">aws_access_key_id</span><span class="token attr-value"><span class="token punctuation">=</span>testAccessKey</span>
<span class="token constant">aws_secret_access_key</span><span class="token attr-value"><span class="token punctuation">=</span>testSecretKey</span>
</code></pre></div><h3 id="advanced-configuration"><a href="#advanced-configuration" aria-hidden="true" class="header-anchor">#</a> Advanced Configuration</h3> <p>In addition to the configuration properties above, the following are also available:</p> <table><thead><tr><th>Property</th> <th>Default</th> <th style="text-align:center">Required</th> <th>Description</th></tr></thead> <tbody><tr><td>readCapacityUnits</td> <td>1</td> <td style="text-align:center">No</td> <td>read capacity for the created tables</td></tr> <tr><td>writeCapacityUnits</td> <td>1</td> <td style="text-align:center">No</td> <td>write capacity for the created tables</td></tr> <tr><td>tablePrefix</td> <td><code>openhab-</code></td> <td style="text-align:center">No</td> <td>table prefix used in the name of created tables</td></tr> <tr><td>bufferCommitIntervalMillis</td> <td>1000</td> <td style="text-align:center">No</td> <td>Interval to commit (write) buffered data. In milliseconds.</td></tr> <tr><td>bufferSize</td> <td>1000</td> <td style="text-align:center">No</td> <td>Internal buffer size which is used to batch writes to DynamoDB every <code>bufferCommitIntervalMillis</code>.</td></tr></tbody></table> <p>Typically you should not need to modify parameters related to buffering.</p> <p>Refer to Amazon documentation on <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.ProvisionedThroughput.html" target="_blank" rel="noopener noreferrer">provisioned throughput<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for details on read/write capacity.</p> <p>All item- and event-related configuration is done in the file <code>persistence/dynamodb.persist</code>.</p> <h2 id="details"><a href="#details" aria-hidden="true" class="header-anchor">#</a> Details</h2> <h3 id="tables-creation"><a href="#tables-creation" aria-hidden="true" class="header-anchor">#</a> Tables Creation</h3> <p>When an item is persisted via this service, a table is created (if necessary). Currently, the service will create at most two tables for different item types. The tables will be named <code>&lt;tablePrefix&gt;&lt;item-type&gt;</code>, where the <code>&lt;item-type&gt;</code> is either <code>bigdecimal</code> (numeric items) or <code>string</code> (string and complex items).</p> <p>Each table will have three columns: <code>itemname</code> (item name), <code>timeutc</code> (in ISO 8601 format with millisecond accuracy), and <code>itemstate</code> (either a number or string representing item state).</p> <h2 id="buffering"><a href="#buffering" aria-hidden="true" class="header-anchor">#</a> Buffering</h2> <p>By default, the service is asynchronous which means that data is not written immediately to DynamoDB but instead buffered in-memory.
The size of the buffer, in terms of datapoints, can be configured with <code>bufferSize</code>.
Every <code>bufferCommitIntervalMillis</code> the whole buffer of data is flushed to DynamoDB.</p> <p>It is recommended to have the buffering enabled since the synchronous behaviour (writing data immediately) might have adverse impact to the whole system when there is many items persisted at the same time. The buffering can be disabled by setting <code>bufferSize</code> to zero.</p> <p>The defaults should be suitable in many use cases.</p> <h3 id="caveats"><a href="#caveats" aria-hidden="true" class="header-anchor">#</a> Caveats</h3> <p>When the tables are created, the read/write capacity is configured according to configuration. However, the service does not modify the capacity of existing tables. As a workaround, you can modify the read/write capacity of existing tables using the <a href="https://aws.amazon.com/console/" target="_blank" rel="noopener noreferrer">Amazon console<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="developer-notes"><a href="#developer-notes" aria-hidden="true" class="header-anchor">#</a> Developer Notes</h2> <h3 id="updating-amazon-sdk"><a href="#updating-amazon-sdk" aria-hidden="true" class="header-anchor">#</a> Updating Amazon SDK</h3> <ol><li>Clean <code>lib/*</code></li> <li>Update SDK version in <code>scripts/fetch_sdk_pom.xml</code>. You can use the <a href="https://mvnrepository.com/artifact/com.amazonaws/aws-java-sdk-dynamodb" target="_blank" rel="noopener noreferrer">maven online repository browser<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to find the latest version available online.</li> <li><code>scripts/fetch_sdk.sh</code></li> <li>Copy <code>scripts/target/site/dependencies.html</code> and <code>scripts/target/dependency/*.jar</code> to <code>lib/</code></li> <li>Generate <code>build.properties</code> entries
<code>ls lib/*.jar | python -c &quot;import sys; print(' ' + ',\\\\\\n '.join(map(str.strip, sys.stdin.readlines())))&quot;</code></li> <li>Generate <code>META-INF/MANIFEST.MF</code> <code>Bundle-ClassPath</code> entries
<code>ls lib/*.jar | python -c &quot;import sys; print(' ' + ',\\n '.join(map(str.strip, sys.stdin.readlines())))&quot;</code></li> <li>Generate <code>.classpath</code> entries
<code>ls lib/*.jar | python -c &quot;import sys;pre='&lt;classpathentry exported=\&quot;true\&quot; kind=\&quot;lib\&quot; path=\&quot;';post='\&quot;/&gt;'; print('\\t' + pre + (post + '\\n\\t' + pre).join(map(str.strip, sys.stdin.readlines())) + post)&quot;</code></li></ol> <p>After these changes, it's good practice to run integration tests (against live AWS DynamoDB) in <code>org.openhab.persistence.dynamodb.test</code> bundle. See <a href="http://README.md" target="_blank" rel="noopener noreferrer">README.md<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> in the test bundle for more information how to execute the tests.</p> <div class="page-versions"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Version: 2.5</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><a href="https://www.openhab.org/addons/persistence/dynamodb/">latest</a></li><li class="dropdown-item"><a class="current">2.5</a></li></ul></div></div> <div class="editLink"><em>Caught a mistake or want to contribute to the documentation? <a target="_blank" href="https://github.com/openhab/openhab1-addons/edit/master/bundles/persistence/org.openhab.persistence.dynamodb/README.md">Edit this page on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></em> <!----></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/v2.5/addons/actions/xpl/" class="prev">
          xPL
        </a></span> <span class="next"><a href="/v2.5/addons/persistence/caldav/">
          CalDAV
        </a>
        →
      </span></p></div> <footer><div class="social-icons"><a href="https://twitter.com/openhab" target="_blank"><svg class="social-icon twitter"><path d="M32 7.075c-1.175 0.525-2.444 0.875-3.769 1.031 1.356-0.813 2.394-2.1 2.887-3.631-1.269 0.75-2.675 1.3-4.169 1.594-1.2-1.275-2.906-2.069-4.794-2.069-3.625 0-6.563 2.938-6.563 6.563 0 0.512 0.056 1.012 0.169 1.494-5.456-0.275-10.294-2.888-13.531-6.862-0.563 0.969-0.887 2.1-0.887 3.3 0 2.275 1.156 4.287 2.919 5.463-1.075-0.031-2.087-0.331-2.975-0.819 0 0.025 0 0.056 0 0.081 0 3.181 2.263 5.838 5.269 6.437-0.55 0.15-1.131 0.231-1.731 0.231-0.425 0-0.831-0.044-1.237-0.119 0.838 2.606 3.263 4.506 6.131 4.563-2.25 1.762-5.075 2.813-8.156 2.813-0.531 0-1.050-0.031-1.569-0.094 2.913 1.869 6.362 2.95 10.069 2.95 12.075 0 18.681-10.006 18.681-18.681 0-0.287-0.006-0.569-0.019-0.85 1.281-0.919 2.394-2.075 3.275-3.394z"></path></svg></a> <a href="https://github.com/openhab" target="_blank"><svg class="social-icon github"><path d="M10.369 24.837c0 0.125-0.144 0.225-0.325 0.225-0.206 0.019-0.35-0.081-0.35-0.225 0-0.125 0.144-0.225 0.325-0.225 0.188-0.019 0.35 0.081 0.35 0.225zM8.425 24.556c-0.044 0.125 0.081 0.269 0.269 0.306 0.162 0.063 0.35 0 0.387-0.125s-0.081-0.269-0.269-0.325c-0.162-0.044-0.344 0.019-0.387 0.144zM11.188 24.45c-0.181 0.044-0.306 0.163-0.287 0.306 0.019 0.125 0.181 0.206 0.369 0.163 0.181-0.044 0.306-0.163 0.287-0.288-0.019-0.119-0.188-0.2-0.369-0.181zM15.3 0.5c-8.669 0-15.3 6.581-15.3 15.25 0 6.931 4.362 12.863 10.594 14.95 0.8 0.144 1.081-0.35 1.081-0.756 0-0.387-0.019-2.525-0.019-3.837 0 0-4.375 0.938-5.294-1.863 0 0-0.713-1.819-1.737-2.288 0 0-1.431-0.981 0.1-0.962 0 0 1.556 0.125 2.412 1.613 1.369 2.413 3.662 1.719 4.556 1.306 0.144-1 0.55-1.694 1-2.106-3.494-0.387-7.019-0.894-7.019-6.906 0-1.719 0.475-2.581 1.475-3.681-0.162-0.406-0.694-2.081 0.162-4.244 1.306-0.406 4.313 1.688 4.313 1.688 1.25-0.35 2.594-0.531 3.925-0.531s2.675 0.181 3.925 0.531c0 0 3.006-2.1 4.313-1.688 0.856 2.169 0.325 3.838 0.163 4.244 1 1.106 1.613 1.969 1.613 3.681 0 6.031-3.681 6.512-7.175 6.906 0.575 0.494 1.063 1.431 1.063 2.9 0 2.106-0.019 4.712-0.019 5.225 0 0.406 0.288 0.9 1.081 0.756 6.25-2.075 10.488-8.006 10.488-14.938 0-8.669-7.031-15.25-15.7-15.25zM6.075 22.056c-0.081 0.063-0.063 0.206 0.044 0.325 0.1 0.1 0.244 0.144 0.325 0.063 0.081-0.063 0.063-0.206-0.044-0.325-0.1-0.1-0.244-0.144-0.325-0.063zM5.4 21.55c-0.044 0.081 0.019 0.181 0.144 0.244 0.1 0.063 0.225 0.044 0.269-0.044 0.044-0.081-0.019-0.181-0.144-0.244-0.125-0.038-0.225-0.019-0.269 0.044zM7.425 23.775c-0.1 0.081-0.063 0.269 0.081 0.387 0.144 0.144 0.325 0.163 0.406 0.063 0.081-0.081 0.044-0.269-0.081-0.387-0.138-0.144-0.325-0.163-0.406-0.063zM6.713 22.856c-0.1 0.063-0.1 0.225 0 0.369s0.269 0.206 0.35 0.144c0.1-0.081 0.1-0.244 0-0.387-0.088-0.144-0.25-0.206-0.35-0.125z"></path></svg></a> <a href="https://www.youtube.com/channel/UC7OK88DW0La_BJlcXZg8ydQ" target="_blank"><svg class="social-icon youtube"><path d="M31.681 9.6c0 0-0.313-2.206-1.275-3.175-1.219-1.275-2.581-1.281-3.206-1.356-4.475-0.325-11.194-0.325-11.194-0.325h-0.012c0 0-6.719 0-11.194 0.325-0.625 0.075-1.987 0.081-3.206 1.356-0.963 0.969-1.269 3.175-1.269 3.175s-0.319 2.588-0.319 5.181v2.425c0 2.587 0.319 5.181 0.319 5.181s0.313 2.206 1.269 3.175c1.219 1.275 2.819 1.231 3.531 1.369 2.563 0.244 10.881 0.319 10.881 0.319s6.725-0.012 11.2-0.331c0.625-0.075 1.988-0.081 3.206-1.356 0.962-0.969 1.275-3.175 1.275-3.175s0.319-2.587 0.319-5.181v-2.425c-0.006-2.588-0.325-5.181-0.325-5.181zM12.694 20.15v-8.994l8.644 4.513-8.644 4.481z"></path></svg></a></div> <div class="legal"><span class="copyright">Copyright © 2019 by the openHAB Community and the openHAB Foundation e.V.</span> <br> <span class="legal-links"><a href="/v2.5/privacy.html">Privacy policy</a> |
    <a href="/v2.5/imprint.html">Imprint</a></span></div> <img src="/openhab-logo-square.png" class="footer-logo"></footer></div> <!----></div></div>
    <script src="/v2.5/assets/js/app.6e1f6232.js" defer></script><script src="/v2.5/assets/js/459.b8e37805.js" defer></script><script src="/v2.5/assets/js/35.2b2f6c8f.js" defer></script><script src="/v2.5/assets/js/32.7c8f01a5.js" defer></script><script src="/v2.5/assets/js/33.df59480d.js" defer></script>
  </body>
</html>
