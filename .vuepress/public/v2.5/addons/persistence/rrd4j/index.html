<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>rrd4j - Persistence Services | openHAB</title>
    <meta name="description" content="The [rrd4j](https://github.com/rrd4j/rrd4j) Persistence service is based on a round-robin database.">
    <link rel="stylesheet" href="/v2.5/fonts/fonts.css">
  <link rel="icon" href="/v2.5/favicon.ico">
  <link rel="shortcut icon" href="/v2.5/favicon.ico">
  <link rel="apple-touch-icon" href="/v2.5/apple-icon.png">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://www.openhab.org/og-image.png">
    <meta property="og:title" content="rrd4j - Persistence Services"><meta property="og:description" content="The rrd4j Persistence service is based on a round-robin database.">
    <link rel="preload" href="/v2.5/assets/css/0.styles.17119d73.css" as="style"><link rel="preload" href="/v2.5/assets/js/app.6e1f6232.js" as="script"><link rel="preload" href="/v2.5/assets/js/469.7077b813.js" as="script"><link rel="preload" href="/v2.5/assets/js/35.2b2f6c8f.js" as="script"><link rel="preload" href="/v2.5/assets/js/32.7c8f01a5.js" as="script"><link rel="preload" href="/v2.5/assets/js/33.df59480d.js" as="script">
    <link rel="stylesheet" href="/v2.5/assets/css/0.styles.17119d73.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/v2.5/" class="home-link router-link-active"><img src="/v2.5/openhab-logo.png" alt="openHAB" class="logo"> <span class="site-name can-hide">openHAB</span></a> <div class="links" style="max-width:nullpx;"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/v2.5/blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/v2.5/download/" class="nav-link">Download</a></div><div class="nav-item"><a href="/v2.5/docs/" class="nav-link">Documentation</a></div><div class="nav-item"><a href="/v2.5/addons/" class="nav-link router-link-active">Add-ons</a></div><div class="nav-item"><a href="/v2.5/community/" class="nav-link">Community</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">About</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Get Involved</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.5/about/who-we-are.html" class="nav-link">Who We Are</a></li><li class="dropdown-subitem"><a href="/v2.5/about/contributing.html" class="nav-link">Contribute</a></li><li class="dropdown-subitem"><a href="/v2.5/about/events.html" class="nav-link">Events</a></li></ul></li><li class="dropdown-item"><h4>Support openHAB</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://openhabfoundation.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Foundation
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="/v2.5/about/donate.html" class="nav-link">Donate</a></li></ul></li><li class="dropdown-item"><h4>Resources</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.5/about/showcase.html" class="nav-link">Showcase/How-tos</a></li><li class="dropdown-subitem"><a href="/v2.5/privacy.html" class="nav-link">Privacy Policy</a></li><li class="dropdown-subitem"><a href="https://www.myopenhab.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  myopenHAB
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/openhab" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/v2.5/blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/v2.5/download/" class="nav-link">Download</a></div><div class="nav-item"><a href="/v2.5/docs/" class="nav-link">Documentation</a></div><div class="nav-item"><a href="/v2.5/addons/" class="nav-link router-link-active">Add-ons</a></div><div class="nav-item"><a href="/v2.5/community/" class="nav-link">Community</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">About</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Get Involved</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.5/about/who-we-are.html" class="nav-link">Who We Are</a></li><li class="dropdown-subitem"><a href="/v2.5/about/contributing.html" class="nav-link">Contribute</a></li><li class="dropdown-subitem"><a href="/v2.5/about/events.html" class="nav-link">Events</a></li></ul></li><li class="dropdown-item"><h4>Support openHAB</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://openhabfoundation.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Foundation
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="/v2.5/about/donate.html" class="nav-link">Donate</a></li></ul></li><li class="dropdown-item"><h4>Resources</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/v2.5/about/showcase.html" class="nav-link">Showcase/How-tos</a></li><li class="dropdown-subitem"><a href="/v2.5/privacy.html" class="nav-link">Privacy Policy</a></li><li class="dropdown-subitem"><a href="https://www.myopenhab.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  myopenHAB
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/openhab" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Bindings</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>System Integrations</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Actions</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Data Persistence</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/v2.5/addons/persistence/dynamodb/" class="sidebar-link">Amazon DynamoDB</a></li><li><a href="/v2.5/addons/persistence/caldav/" class="sidebar-link">CalDAV</a></li><li><a href="/v2.5/addons/persistence/db4o/" class="sidebar-link">db4o</a></li><li><a href="/v2.5/addons/persistence/exec/" class="sidebar-link">Exec</a></li><li><a href="/v2.5/addons/persistence/influxdb/" class="sidebar-link">InfluxDB (0.9 and newer)</a></li><li><a href="/v2.5/addons/persistence/influxdb08/" class="sidebar-link">InfluxDB (up to 0.8.x)</a></li><li><a href="/v2.5/addons/persistence/jpa/" class="sidebar-link">Java Persistence API (JPA)</a></li><li><a href="/v2.5/addons/persistence/jdbc/" class="sidebar-link">JDBC</a></li><li><a href="/v2.5/addons/persistence/mapdb/" class="sidebar-link">mapdb</a></li><li><a href="/v2.5/addons/persistence/mongodb/" class="sidebar-link">MongoDB</a></li><li><a href="/v2.5/addons/persistence/mqtt/" class="sidebar-link">MQTT</a></li><li><a href="/v2.5/addons/persistence/mysql/" class="sidebar-link">MySQL</a></li><li><a href="/v2.5/addons/persistence/rrd4j/" class="active sidebar-link">rrd4j</a></li><li><a href="/v2.5/addons/persistence/sitewhere/" class="sidebar-link">SiteWhere</a></li><li><a href="/v2.5/addons/persistence/cosm/" class="sidebar-link">Xively (formerly Cosm)</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Data Transformation</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Voice</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="rrd4j-persistence"><a href="#rrd4j-persistence" aria-hidden="true" class="header-anchor">#</a> rrd4j Persistence <span class="badge warn top" data-v-099ab69c>v1</span></h1> <p>The <a href="https://github.com/rrd4j/rrd4j" target="_blank" rel="noopener noreferrer">rrd4j<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Persistence service is based on a round-robin database.</p> <p>In contrast to a &quot;normal&quot; database such as db4o, a round-robin database does not grow in size - it has a fixed allocated size, which is used.
This is accomplished by saving a fixed amount of datapoints and by doing data compression, which means that the older the data is, the less values are available.
The data is kept in several &quot;archives&quot;, each holding the data for its set timeframe in the set granularity.
The start point for all archives is the actually saved datapoint.
So while you might have a value every minute for the last 8 hours, you might only have one every day for the last year.</p> <p>This service cannot be directly queried, because of the data compression. You could not provide precise answers for all questions.</p> <p>NOTE: rrd4j is for storing numerical data only.
Attempting to use rrd4j to store complex datatypes (e.g. for restore-on-startup) will not work.</p> <ul><li><a href="#configuration">Configuration</a> <ul><li><a href="#datasource-types">Datasource types</a></li> <li><a href="#heartbeat-min-max">Heartbeat, MIN, MAX</a></li> <li><a href="#steps">Step(s)</a></li> <li><a href="#example">Example</a></li></ul></li> <li><a href="#troubleshooting">Troubleshooting</a></li></ul> <h2 id="configuration"><a href="#configuration" aria-hidden="true" class="header-anchor">#</a> Configuration</h2> <p>This service can be configured in the file <code>services/rrd4j.cfg</code>.</p> <table><thead><tr><th>Property</th> <th>Default</th> <th style="text-align:center">Required</th> <th>Description</th></tr></thead> <tbody><tr><td><code>&lt;dsname&gt;</code>.def</td> <td></td> <td style="text-align:center"></td> <td><code>&lt;dstype&gt;,&lt;heartbeat&gt;,[&lt;min&gt;\|U],[&lt;max&gt;\|U],&lt;step&gt;</code>. For example, <code>COUNTER,900,0,U,300</code></td></tr> <tr><td><code>&lt;dsname&gt;</code>.archives</td> <td></td> <td style="text-align:center"></td> <td><code>&lt;consolidationfunction&gt;,&lt;xff&gt;,&lt;steps&gt;,&lt;rows&gt;</code>. For example, <code>AVERAGE,0.5,1,365:AVERAGE,0.5,7,300</code></td></tr> <tr><td><code>&lt;dsname&gt;</code>.items</td> <td></td> <td style="text-align:center"></td> <td><code>&lt;list of items for this dsname&gt;</code>. For example, <code>Item1,Item2</code></td></tr></tbody></table> <p>where:</p> <ul><li>Sections in <code>[square brackets]</code> are optional.</li> <li><code>&lt;dsname&gt;</code> is a name you choose for the datasource.</li> <li>See <a href="#datasource-types">Datasource types</a> for an explanation of <code>&lt;dstype&gt;</code>.</li> <li>See <a href="#heartbeat-min-max">Heartbeat, MIN, MAX</a> for an explanation of <code>&lt;heartbeat&gt;</code>, <code>&lt;min&gt;</code>, <code>&lt;max&gt;</code> and <code>U</code>.</li> <li>See <a href="#steps">Step(s)</a> for an explanation of <code>&lt;step&gt;</code>, <code>&lt;consolidationfunction&gt;</code>, <code>&lt;xff&gt;</code>, <code>&lt;steps&gt;</code>, and <code>&lt;rows&gt;</code>.</li> <li><code>&lt;list of items for this dsname&gt;</code> is explained in</li></ul> <p>Round-robin databases (RRDs) have fixed-length so-called &quot;archives&quot; for storing values.
One RRD can have (in general) several datasources and each datasource can have several archives.
openHAB only supports one datasource per RRD (i.e. per stored item), which is named DATASOURCE_STATE.
Multiple configurations (with differing .items settings) can be used (see example below).</p> <h3 id="datasource-types"><a href="#datasource-types" aria-hidden="true" class="header-anchor">#</a> Datasource types</h3> <p>Depending on the data to be stored, several types for datasources exist:</p> <ul><li><strong>COUNTER</strong> represents a ever-incrementing value (historically this was used for packet counters or traffic counters on network interfaces, a typical home-automation application would be your electricity meter). If you store the values of this counter in a simple database and make a chart of that, you'll most likely see a nearly flat line, because the increments per time are small compared to the absolute value (e.g. your electricity meter reads 60567 kWh, and you add 0.5 kWh per hour, than your chart over the whole day will show 60567 at the start and 60579 at the end of your chart. That is nearly invisible. RRD4J helps you out and will display the difference from one stored value to the other (depending on the selected size). Please note that the persistence extensions will return difference instead of the actual values if you use this type; this especially leads to wrong values if you try to restoreOnStartup!</li> <li><strong>GAUGE</strong> represents the reading of e.g. a temperature sensor. You'll see only small deviation over the day and your values will be within a small range, clearly visible within a chart.</li> <li><strong>ABSOLUTE</strong> is like a counter, but RRD4J assumes that the counter is reset when the value is read. So these are basically the delta values between the reads.</li> <li><strong>DERIVE</strong> is like a counter, but it can also decrease and therefore have a negative delta.</li></ul> <h3 id="heartbeat-min-max"><a href="#heartbeat-min-max" aria-hidden="true" class="header-anchor">#</a> Heartbeat, MIN, MAX</h3> <p>Each datasource also has a value for heartbeat, minimum and maximum. This heartbeat setting helps the database to detect &quot;missing&quot; values, i.e. if no new value is stored after &quot;heartbeat&quot; seconds, the value is considered missing when charting. Minimum and maximum define the range of acceptable values for that datasource.</p> <h3 id="step-s"><a href="#step-s" aria-hidden="true" class="header-anchor">#</a> Step(s)</h3> <p>Step (set in <code>.def=&lt;dstype&gt;,&lt;heartbeat&gt;,[&lt;min&gt;|U],[&lt;max&gt;|U],&lt;step&gt;</code> with step in seconds)</p> <p>Sets the time interval (seconds) between consecutive readings.</p> <ul><li>Steps or Granularity (set in <code>.archives=&lt;consolidationfunction&gt;,&lt;xff&gt;,&lt;steps&gt;,&lt;rows&gt;</code></li></ul> <p>Steps are the number of consecutive readings that are used the create a single entry into the database for this time interval.
The time interval covered is calculated by (step x steps) seconds.</p> <p>Now for the archives: As already said, each datasource can have several archives.
Think of an archive as a drawer with a fixed number of boxes in it.
Each (step x steps) seconds (the step is globally defined for the RRD, 60s in our example) the leftmost box is emptied, the content of all boxes is moved one box to the left and new content is added to the rightmost box.
The &quot;steps&quot; value is defined per archive it is the third parameter in the archive definition.
The number of boxes is defined as the fourth parameter.</p> <p>The purpose to have several archives is raised if a different granularity is needed while displaying data for different timespans.
In the example below data for each minute are saved for the last 8 hours (granularity 1), looking at the last 24 hours a granularity of 10 (i.e. 10 readings are consolidated to one reading) is used and so forth.
For the first archive (and maybe the only one) a steps-size of one should be used.
This way a sample is taken after each step.</p> <h3 id="example"><a href="#example" aria-hidden="true" class="header-anchor">#</a> Example</h3> <p>So in the example shown below, we have 480 boxes, which each represent the value of one minute (Step is set to 60s, Granularity = 1).
If more than one value is added to the database within (step x steps) seconds (and thus more than one value would be stored in one box), the &quot;consolidation function&quot; is used.
openHAB uses AVERAGE as default for numeric values, so if you add 20 and 21 within one minute, 20.5 would be stored.
480 minutes is 8 hours, so we have a 8h with the granularity of one minute.</p> <p>The next archive has 144 boxes, which each represent the value of ten minutes (Step is set to 60s, Granularity = 10).
1440 minutes is 24 hours, so we have a full day with the granularity of 10 minutes.</p> <p>The same goes for following archives, for larger time spans, the stored values are less &quot;exact&quot;.
However, usually you are not interested in the exact values for a selected minute some time ago.</p> <p>services/rrd4j.cfg:</p> <div class="language- extra-class"><pre class="language-text"><code>ctr24h.def=COUNTER,900,0,U,60
ctr24h.archives=AVERAGE,0.5,1,480:AVERAGE,0.5,10,144
ctr24h.items=Item1,Item2
ctr7d.def=COUNTER,900,0,U,60
ctr7d.archives=AVERAGE,0.5,1,480:AVERAGE,0.5,10,144:AVERAGE,0.5,60,672
ctr7d.items=Item3,Item4
</code></pre></div><p>In case no rrd4j.cfg is created the following default configuration will be used for all items persisted (i.e. all items with an allocated strategy in the rrd4j.persist file).</p> <p>Default rrd4j.cfg</p> <div class="language- extra-class"><pre class="language-text"><code>defaultNumeric.def=GAUGE,60,U,U,60
defaultNumeric.archives=AVERAGE,0.5,1,480:AVERAGE,0.5,4,360:AVERAGE,0.5,14,644:AVERAGE,0.5,60,720:AVERAGE,0.5,720,730:AVERAGE,0.5,10080,520
</code></pre></div><p>The Datasource type is GAUGE, the heartbeat is 60s, MIN and MAX are unlimited and the step size is 60s.
The archives are:</p> <table><thead><tr><th style="text-align:center">Archive</th> <th style="text-align:center">Boxes</th> <th style="text-align:center">Granularity [min]</th> <th style="text-align:center">Period covered</th></tr></thead> <tbody><tr><td style="text-align:center">1</td> <td style="text-align:center">480</td> <td style="text-align:center">1</td> <td style="text-align:center">8 hrs</td></tr> <tr><td style="text-align:center">2</td> <td style="text-align:center">360</td> <td style="text-align:center">4</td> <td style="text-align:center">24 hrs</td></tr> <tr><td style="text-align:center">3</td> <td style="text-align:center">644</td> <td style="text-align:center">14</td> <td style="text-align:center">6.26 days</td></tr> <tr><td style="text-align:center">4</td> <td style="text-align:center">720</td> <td style="text-align:center">60</td> <td style="text-align:center">30 days</td></tr> <tr><td style="text-align:center">5</td> <td style="text-align:center">730</td> <td style="text-align:center">720</td> <td style="text-align:center">365 days</td></tr> <tr><td style="text-align:center">6</td> <td style="text-align:center">520</td> <td style="text-align:center">10080</td> <td style="text-align:center">10 years</td></tr></tbody></table> <p>All item- and event-related configuration is done in the file <code>persistence/rrd4j.persist</code>, i.e. openHAB will persist items that are setup in this file with a strategy.</p> <p><strong>IMPORTANT</strong></p> <p>The strategy <code>everyMinute</code> (60 seconds) <strong>MUST</strong> be used, otherwise no data will be persisted (stored).
Other strategies can be used too.</p> <p>rrd4j.persist:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Strategies</span> <span class="token punctuation">{</span>
    <span class="token comment">// for rrd charts, we need a cron strategy</span>
    everyMinute <span class="token operator">:</span> <span class="token string">&quot;0 * * * * ?&quot;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Items</span> <span class="token punctuation">{</span>
    <span class="token comment">// persist items on every change and every minute</span>
    <span class="token operator">*</span> <span class="token operator">:</span> strategy <span class="token operator">=</span> everyChange<span class="token punctuation">,</span> everyMinute
<span class="token punctuation">}</span>
</code></pre></div><h2 id="troubleshooting"><a href="#troubleshooting" aria-hidden="true" class="header-anchor">#</a> Troubleshooting</h2> <p>From time to time, you may find that if you change the item type of a persisted data, you may experience charting or other problems. To resolve this issue, remove the old <code>&lt;item_name&gt;</code>.rrd file in the <code>${openhab_home}/etc/rrd4j</code> folder or <code>/var/lib/openhab/persistence/rrd4j</code> folder for apt-get installed openHABs.</p> <p>Restore of items after startup is taking some time. Rules are already started in parallel. Especially in rules that are started via &quot;System started&quot; trigger, it may happen that the restore is not completed resulting in defined items. In these cases the use of restored items has to be delayed by a couple of seconds. This delay has to be determined experimentally.</p> <div class="page-versions"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Version: 2.5</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><a href="https://www.openhab.org/addons/persistence/rrd4j/">latest</a></li><li class="dropdown-item"><a class="current">2.5</a></li></ul></div></div> <div class="editLink"><em>Caught a mistake or want to contribute to the documentation? <a target="_blank" href="https://github.com/openhab/openhab1-addons/edit/master/bundles/persistence/org.openhab.persistence.rrd4j/README.md">Edit this page on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></em> <!----></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/v2.5/addons/persistence/mysql/" class="prev">
          MySQL
        </a></span> <span class="next"><a href="/v2.5/addons/persistence/sitewhere/">
          SiteWhere
        </a>
        →
      </span></p></div> <footer><div class="social-icons"><a href="https://twitter.com/openhab" target="_blank"><svg class="social-icon twitter"><path d="M32 7.075c-1.175 0.525-2.444 0.875-3.769 1.031 1.356-0.813 2.394-2.1 2.887-3.631-1.269 0.75-2.675 1.3-4.169 1.594-1.2-1.275-2.906-2.069-4.794-2.069-3.625 0-6.563 2.938-6.563 6.563 0 0.512 0.056 1.012 0.169 1.494-5.456-0.275-10.294-2.888-13.531-6.862-0.563 0.969-0.887 2.1-0.887 3.3 0 2.275 1.156 4.287 2.919 5.463-1.075-0.031-2.087-0.331-2.975-0.819 0 0.025 0 0.056 0 0.081 0 3.181 2.263 5.838 5.269 6.437-0.55 0.15-1.131 0.231-1.731 0.231-0.425 0-0.831-0.044-1.237-0.119 0.838 2.606 3.263 4.506 6.131 4.563-2.25 1.762-5.075 2.813-8.156 2.813-0.531 0-1.050-0.031-1.569-0.094 2.913 1.869 6.362 2.95 10.069 2.95 12.075 0 18.681-10.006 18.681-18.681 0-0.287-0.006-0.569-0.019-0.85 1.281-0.919 2.394-2.075 3.275-3.394z"></path></svg></a> <a href="https://github.com/openhab" target="_blank"><svg class="social-icon github"><path d="M10.369 24.837c0 0.125-0.144 0.225-0.325 0.225-0.206 0.019-0.35-0.081-0.35-0.225 0-0.125 0.144-0.225 0.325-0.225 0.188-0.019 0.35 0.081 0.35 0.225zM8.425 24.556c-0.044 0.125 0.081 0.269 0.269 0.306 0.162 0.063 0.35 0 0.387-0.125s-0.081-0.269-0.269-0.325c-0.162-0.044-0.344 0.019-0.387 0.144zM11.188 24.45c-0.181 0.044-0.306 0.163-0.287 0.306 0.019 0.125 0.181 0.206 0.369 0.163 0.181-0.044 0.306-0.163 0.287-0.288-0.019-0.119-0.188-0.2-0.369-0.181zM15.3 0.5c-8.669 0-15.3 6.581-15.3 15.25 0 6.931 4.362 12.863 10.594 14.95 0.8 0.144 1.081-0.35 1.081-0.756 0-0.387-0.019-2.525-0.019-3.837 0 0-4.375 0.938-5.294-1.863 0 0-0.713-1.819-1.737-2.288 0 0-1.431-0.981 0.1-0.962 0 0 1.556 0.125 2.412 1.613 1.369 2.413 3.662 1.719 4.556 1.306 0.144-1 0.55-1.694 1-2.106-3.494-0.387-7.019-0.894-7.019-6.906 0-1.719 0.475-2.581 1.475-3.681-0.162-0.406-0.694-2.081 0.162-4.244 1.306-0.406 4.313 1.688 4.313 1.688 1.25-0.35 2.594-0.531 3.925-0.531s2.675 0.181 3.925 0.531c0 0 3.006-2.1 4.313-1.688 0.856 2.169 0.325 3.838 0.163 4.244 1 1.106 1.613 1.969 1.613 3.681 0 6.031-3.681 6.512-7.175 6.906 0.575 0.494 1.063 1.431 1.063 2.9 0 2.106-0.019 4.712-0.019 5.225 0 0.406 0.288 0.9 1.081 0.756 6.25-2.075 10.488-8.006 10.488-14.938 0-8.669-7.031-15.25-15.7-15.25zM6.075 22.056c-0.081 0.063-0.063 0.206 0.044 0.325 0.1 0.1 0.244 0.144 0.325 0.063 0.081-0.063 0.063-0.206-0.044-0.325-0.1-0.1-0.244-0.144-0.325-0.063zM5.4 21.55c-0.044 0.081 0.019 0.181 0.144 0.244 0.1 0.063 0.225 0.044 0.269-0.044 0.044-0.081-0.019-0.181-0.144-0.244-0.125-0.038-0.225-0.019-0.269 0.044zM7.425 23.775c-0.1 0.081-0.063 0.269 0.081 0.387 0.144 0.144 0.325 0.163 0.406 0.063 0.081-0.081 0.044-0.269-0.081-0.387-0.138-0.144-0.325-0.163-0.406-0.063zM6.713 22.856c-0.1 0.063-0.1 0.225 0 0.369s0.269 0.206 0.35 0.144c0.1-0.081 0.1-0.244 0-0.387-0.088-0.144-0.25-0.206-0.35-0.125z"></path></svg></a> <a href="https://www.youtube.com/channel/UC7OK88DW0La_BJlcXZg8ydQ" target="_blank"><svg class="social-icon youtube"><path d="M31.681 9.6c0 0-0.313-2.206-1.275-3.175-1.219-1.275-2.581-1.281-3.206-1.356-4.475-0.325-11.194-0.325-11.194-0.325h-0.012c0 0-6.719 0-11.194 0.325-0.625 0.075-1.987 0.081-3.206 1.356-0.963 0.969-1.269 3.175-1.269 3.175s-0.319 2.588-0.319 5.181v2.425c0 2.587 0.319 5.181 0.319 5.181s0.313 2.206 1.269 3.175c1.219 1.275 2.819 1.231 3.531 1.369 2.563 0.244 10.881 0.319 10.881 0.319s6.725-0.012 11.2-0.331c0.625-0.075 1.988-0.081 3.206-1.356 0.962-0.969 1.275-3.175 1.275-3.175s0.319-2.587 0.319-5.181v-2.425c-0.006-2.588-0.325-5.181-0.325-5.181zM12.694 20.15v-8.994l8.644 4.513-8.644 4.481z"></path></svg></a></div> <div class="legal"><span class="copyright">Copyright © 2019 by the openHAB Community and the openHAB Foundation e.V.</span> <br> <span class="legal-links"><a href="/v2.5/privacy.html">Privacy policy</a> |
    <a href="/v2.5/imprint.html">Imprint</a></span></div> <img src="/openhab-logo-square.png" class="footer-logo"></footer></div> <!----></div></div>
    <script src="/v2.5/assets/js/app.6e1f6232.js" defer></script><script src="/v2.5/assets/js/469.7077b813.js" defer></script><script src="/v2.5/assets/js/35.2b2f6c8f.js" defer></script><script src="/v2.5/assets/js/32.7c8f01a5.js" defer></script><script src="/v2.5/assets/js/33.df59480d.js" defer></script>
  </body>
</html>
